function UrlExists(t){var e=new XMLHttpRequest;return e.open("HEAD",t,!1),e.send(),200==e.status}function uber_op(t,e,i){if(!ubermenu_data.hasOwnProperty(t))return i;var n=ubermenu_data[t];if(e.hasOwnProperty("datatype"))switch(e.datatype){case"numeric":n=parseInt(n);break;case"boolean":n="on"==n||1==n||"1"==n?!0:!1}return n}function uberMenu_openMega(t){jQuery(".ubermenu").ubermenu("openSubmenu",jQuery(t))}function uberMenu_openFlyout(t){jQuery(".ubermenu").ubermenu("openSubmenu",jQuery(t))}function uberMenu_close(t){jQuery(".ubermenu").ubermenu("closeSubmenu",jQuery(t))}function uberMenu_redrawSubmenus(){jQuery(".ubermenu").ubermenu("positionSubmenus")}function addPush(t,e){var i=t.attr("data-href"),n=t.attr("title"),s=t.attr("id").replace("post_","");i||(i=t.attr("href")),history.pushState({url:i,name:n,ID:s,type:e},s,i),document.title=n+" · Faaborg Gymnasium"}function resetOldPush(){var t=$(".reading");t.length&&t.removeClass("reading")}function setPopstateReading(t){t.addClass("reading"),(t.hasClass("mb-entry")||$("body").hasClass("single-nyt")||$("body").hasClass("archive-nyt"))&&(t.next("hr").prependTo(".post-list"),t.prependTo(".post-list")),$("html, body").delay(200).animate({scrollTop:t.offset().top-20},200)}function owlslidePTPreviews(){var t=$("#projekt-tema-preview");t.owlCarousel({responsive:{0:{items:2},480:{items:3},768:{items:4},960:{items:6},1280:{items:8}},pagination:!1,dots:!1,nav:!1})}function PTmakePreviews(t){var e=$("#projekt-tema-preview");for(key in t){var i=$("<a></a>"),n=$("<div></div>");i.addClass("pt-preview-box"),i.addClass("pt-preview-theme-"+t[key].theme),i.attr("data-post-id",t[key].id),i.attr("href",t[key].url),i.append(n);var s=t[key].img;1==t[key].img_should_filter&&i.addClass("image-filter"),null!==s&&i.css("background-image","url("+s+")");var r=$('<div class="title"></div>'),o=$("<span></span>");o.html(t[key].title),r.append(o),n.append(r),e.prepend(i)}e.removeClass("top"),owlslidePTPreviews(),addFilteredImages()}function addFilteredImages(){$(".pt-preview-box").each(function(){if($(this).hasClass("image-filter")){var t=$(this).css("background-image").replace("url(","").replace(")",""),e=$(this);$.ajax({type:"POST",url:wpURL+"/async/image-filter.php",dataType:"json",data:{img:t},success:function(t){var i=$('<img src="'+t.img+'"/>');i.load(function(){e.css({"background-image":"url("+t.img+")"}),e.children("div").css({"background-color":"transparent","background-image":"none"})})}})}})}function sendData(){var t;t=tinyMCE.activeEditor?tinyMCE.activeEditor.getContent():$("#smamo_front_editor").val();var e={image:getThumbID(),postID:getID(),title:$('.fg-editor form input[name="title"]').val(),subheading:$('.fg-editor form input[name="subheading"]').val(),type:"tema-post",theme_id:$('.fg-editor form input[name="theme_id"]').val(),content:t},i=$.param(e),n=$(".fg-editor form").attr("action");""===e.title?(alert("Føj en titel til dit indlæg inden du gemmer"),$(".fg-editor .submit.loading").toggleClass("loading")):""===e.content?(alert("Føj et indhold til dit indlæg inden du gemmer"),$(".fg-editor .submit.loading").toggleClass("loading")):$.ajax({url:n,type:"POST",data:i,dataType:"json",success:function(t){window.location.href=t.href}})}function deletePost(){var t={id:getID(),type:"tema-post",theme_id:$('.fg-editor form input[name="theme_id"]').val()},e=$.param(t);$.ajax({url:wpURL+"/async/delete-post.php",type:"POST",data:e,dataType:"json",success:function(t){window.location.href=t.href}})}function smamoSetCookie(t,e,i){var n=new Date;n.setTime(n.getTime()+24*i*60*60*1e3);var s="expires="+n.toUTCString();document.cookie=t+"="+e+"; "+s}function smamoGetCookie(t){for(var e=t+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var s=i[n];" "==s.charAt(0);)s=s.substring(1);if(0==s.indexOf(e))return s.substring(e.length,s.length)}return""}function makeCookieNotificationElement(){var t=$('<div id="cookie-notify"></div>'),e=$("<div></div>"),i=$("<span>Faaborg Gymnasiums hjemmeside anvender cookies</span>"),n=$('<a href="http://faaborg-gym.dk/cookie/">Læs mere</a>'),s=$('<a id="cookieOK" href="#">Godkend</a>');e.append(i),e.append(s),e.append(n),t.append(e),t.appendTo("body").animate({opacity:.9},1e3),s.click(function(e){e.preventDefault(),smamoSetCookie("cookieOK","true",365),t.remove()})}!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):t("undefined"!=typeof jQuery?jQuery:window.Zepto)}(function(t){"use strict";function e(e){var i=e.data;e.isDefaultPrevented()||(e.preventDefault(),t(e.target).ajaxSubmit(i))}function i(e){var i=e.target,n=t(i);if(!n.is("[type=submit],[type=image]")){var s=n.closest("[type=submit]");if(0===s.length)return;i=s[0]}var r=this;if(r.clk=i,"image"==i.type)if(void 0!==e.offsetX)r.clk_x=e.offsetX,r.clk_y=e.offsetY;else if("function"==typeof t.fn.offset){var o=n.offset();r.clk_x=e.pageX-o.left,r.clk_y=e.pageY-o.top}else r.clk_x=e.pageX-i.offsetLeft,r.clk_y=e.pageY-i.offsetTop;setTimeout(function(){r.clk=r.clk_x=r.clk_y=null},100)}function n(){if(t.fn.ajaxSubmit.debug){var e="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e)}}var s={};s.fileapi=void 0!==t("<input type='file'/>").get(0).files,s.formdata=void 0!==window.FormData;var r=!!t.fn.prop;t.fn.attr2=function(){if(!r)return this.attr.apply(this,arguments);var t=this.prop.apply(this,arguments);return t&&t.jquery||"string"==typeof t?t:this.attr.apply(this,arguments)},t.fn.ajaxSubmit=function(e){function i(i){var n,s,r=t.param(i,e.traditional).split("&"),o=r.length,a=[];for(n=0;o>n;n++)r[n]=r[n].replace(/\+/g," "),s=r[n].split("="),a.push([decodeURIComponent(s[0]),decodeURIComponent(s[1])]);return a}function o(n){for(var s=new FormData,r=0;r<n.length;r++)s.append(n[r].name,n[r].value);if(e.extraData){var o=i(e.extraData);for(r=0;r<o.length;r++)o[r]&&s.append(o[r][0],o[r][1])}e.data=null;var a=t.extend(!0,{},t.ajaxSettings,e,{contentType:!1,processData:!1,cache:!1,type:l||"POST"});e.uploadProgress&&(a.xhr=function(){var i=t.ajaxSettings.xhr();return i.upload&&i.upload.addEventListener("progress",function(t){var i=0,n=t.loaded||t.position,s=t.total;t.lengthComputable&&(i=Math.ceil(n/s*100)),e.uploadProgress(t,n,s,i)},!1),i}),a.data=null;var u=a.beforeSend;return a.beforeSend=function(t,i){i.data=e.formData?e.formData:s,u&&u.call(this,t,i)},t.ajax(a)}function a(i){function s(t){var e=null;try{t.contentWindow&&(e=t.contentWindow.document)}catch(i){n("cannot get iframe.contentWindow document: "+i)}if(e)return e;try{e=t.contentDocument?t.contentDocument:t.document}catch(i){n("cannot get iframe.contentDocument: "+i),e=t.document}return e}function o(){function e(){try{var t=s(v).readyState;n("state = "+t),t&&"uninitialized"==t.toLowerCase()&&setTimeout(e,50)}catch(i){n("Server abort: ",i," (",i.name,")"),a(T),_&&clearTimeout(_),_=void 0}}var i=c.attr2("target"),r=c.attr2("action"),o="multipart/form-data",u=c.attr("enctype")||c.attr("encoding")||o;C.setAttribute("target",g),(!l||/post/i.test(l))&&C.setAttribute("method","POST"),r!=d.url&&C.setAttribute("action",d.url),d.skipEncodingOverride||l&&!/post/i.test(l)||c.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),d.timeout&&(_=setTimeout(function(){x=!0,a($)},d.timeout));var h=[];try{if(d.extraData)for(var p in d.extraData)d.extraData.hasOwnProperty(p)&&h.push(t.isPlainObject(d.extraData[p])&&d.extraData[p].hasOwnProperty("name")&&d.extraData[p].hasOwnProperty("value")?t('<input type="hidden" name="'+d.extraData[p].name+'">').val(d.extraData[p].value).appendTo(C)[0]:t('<input type="hidden" name="'+p+'">').val(d.extraData[p]).appendTo(C)[0]);d.iframeTarget||m.appendTo("body"),v.attachEvent?v.attachEvent("onload",a):v.addEventListener("load",a,!1),setTimeout(e,15);try{C.submit()}catch(f){var b=document.createElement("form").submit;b.apply(C)}}finally{C.setAttribute("action",r),C.setAttribute("enctype",u),i?C.setAttribute("target",i):c.removeAttr("target"),t(h).remove()}}function a(e){if(!b.aborted&&!P){if(E=s(v),E||(n("cannot access response document"),e=T),e===$&&b)return b.abort("timeout"),void k.reject(b,"timeout");if(e==T&&b)return b.abort("server abort"),void k.reject(b,"error","server abort");if(E&&E.location.href!=d.iframeSrc||x){v.detachEvent?v.detachEvent("onload",a):v.removeEventListener("load",a,!1);var i,r="success";try{if(x)throw"timeout";var o="xml"==d.dataType||E.XMLDocument||t.isXMLDoc(E);if(n("isXml="+o),!o&&window.opera&&(null===E.body||!E.body.innerHTML)&&--I)return n("requeing onLoad callback, DOM not available"),void setTimeout(a,250);var l=E.body?E.body:E.documentElement;b.responseText=l?l.innerHTML:null,b.responseXML=E.XMLDocument?E.XMLDocument:E,o&&(d.dataType="xml"),b.getResponseHeader=function(t){var e={"content-type":d.dataType};return e[t.toLowerCase()]},l&&(b.status=Number(l.getAttribute("status"))||b.status,b.statusText=l.getAttribute("statusText")||b.statusText);var u=(d.dataType||"").toLowerCase(),h=/(json|script|text)/.test(u);if(h||d.textarea){var c=E.getElementsByTagName("textarea")[0];if(c)b.responseText=c.value,b.status=Number(c.getAttribute("status"))||b.status,b.statusText=c.getAttribute("statusText")||b.statusText;else if(h){var g=E.getElementsByTagName("pre")[0],f=E.getElementsByTagName("body")[0];g?b.responseText=g.textContent?g.textContent:g.innerText:f&&(b.responseText=f.textContent?f.textContent:f.innerText)}}else"xml"==u&&!b.responseXML&&b.responseText&&(b.responseXML=z(b.responseText));try{M=j(b,u,d)}catch(y){r="parsererror",b.error=i=y||r}}catch(y){n("error caught: ",y),r="error",b.error=i=y||r}b.aborted&&(n("upload aborted"),r=null),b.status&&(r=b.status>=200&&b.status<300||304===b.status?"success":"error"),"success"===r?(d.success&&d.success.call(d.context,M,"success",b),k.resolve(b.responseText,"success",b),p&&t.event.trigger("ajaxSuccess",[b,d])):r&&(void 0===i&&(i=b.statusText),d.error&&d.error.call(d.context,b,r,i),k.reject(b,"error",i),p&&t.event.trigger("ajaxError",[b,d,i])),p&&t.event.trigger("ajaxComplete",[b,d]),p&&!--t.active&&t.event.trigger("ajaxStop"),d.complete&&d.complete.call(d.context,b,r),P=!0,d.timeout&&clearTimeout(_),setTimeout(function(){d.iframeTarget?m.attr("src",d.iframeSrc):m.remove(),b.responseXML=null},100)}}}var u,h,d,p,g,m,v,b,y,w,x,_,C=c[0],k=t.Deferred();if(k.abort=function(t){b.abort(t)},i)for(h=0;h<f.length;h++)u=t(f[h]),r?u.prop("disabled",!1):u.removeAttr("disabled");if(d=t.extend(!0,{},t.ajaxSettings,e),d.context=d.context||d,g="jqFormIO"+(new Date).getTime(),d.iframeTarget?(m=t(d.iframeTarget),w=m.attr2("name"),w?g=w:m.attr2("name",g)):(m=t('<iframe name="'+g+'" src="'+d.iframeSrc+'" />'),m.css({position:"absolute",top:"-1000px",left:"-1000px"})),v=m[0],b={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(e){var i="timeout"===e?"timeout":"aborted";n("aborting upload... "+i),this.aborted=1;try{v.contentWindow.document.execCommand&&v.contentWindow.document.execCommand("Stop")}catch(s){}m.attr("src",d.iframeSrc),b.error=i,d.error&&d.error.call(d.context,b,i,e),p&&t.event.trigger("ajaxError",[b,d,i]),d.complete&&d.complete.call(d.context,b,i)}},p=d.global,p&&0===t.active++&&t.event.trigger("ajaxStart"),p&&t.event.trigger("ajaxSend",[b,d]),d.beforeSend&&d.beforeSend.call(d.context,b,d)===!1)return d.global&&t.active--,k.reject(),k;if(b.aborted)return k.reject(),k;y=C.clk,y&&(w=y.name,w&&!y.disabled&&(d.extraData=d.extraData||{},d.extraData[w]=y.value,"image"==y.type&&(d.extraData[w+".x"]=C.clk_x,d.extraData[w+".y"]=C.clk_y)));var $=1,T=2,S=t("meta[name=csrf-token]").attr("content"),D=t("meta[name=csrf-param]").attr("content");D&&S&&(d.extraData=d.extraData||{},d.extraData[D]=S),d.forceSync?o():setTimeout(o,10);var M,E,P,I=50,z=t.parseXML||function(t,e){return window.ActiveXObject?(e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(t)):e=(new DOMParser).parseFromString(t,"text/xml"),e&&e.documentElement&&"parsererror"!=e.documentElement.nodeName?e:null},L=t.parseJSON||function(t){return window.eval("("+t+")")},j=function(e,i,n){var s=e.getResponseHeader("content-type")||"",r="xml"===i||!i&&s.indexOf("xml")>=0,o=r?e.responseXML:e.responseText;return r&&"parsererror"===o.documentElement.nodeName&&t.error&&t.error("parsererror"),n&&n.dataFilter&&(o=n.dataFilter(o,i)),"string"==typeof o&&("json"===i||!i&&s.indexOf("json")>=0?o=L(o):("script"===i||!i&&s.indexOf("javascript")>=0)&&t.globalEval(o)),o};return k}if(!this.length)return n("ajaxSubmit: skipping submit process - no element selected"),this;var l,u,h,c=this;"function"==typeof e?e={success:e}:void 0===e&&(e={}),l=e.type||this.attr2("method"),u=e.url||this.attr2("action"),h="string"==typeof u?t.trim(u):"",h=h||window.location.href||"",h&&(h=(h.match(/^([^#]+)/)||[])[1]),e=t.extend(!0,{url:h,success:t.ajaxSettings.success,type:l||t.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},e);var d={};if(this.trigger("form-pre-serialize",[this,e,d]),d.veto)return n("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(e.beforeSerialize&&e.beforeSerialize(this,e)===!1)return n("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var p=e.traditional;void 0===p&&(p=t.ajaxSettings.traditional);var g,f=[],m=this.formToArray(e.semantic,f);if(e.data&&(e.extraData=e.data,g=t.param(e.data,p)),e.beforeSubmit&&e.beforeSubmit(m,this,e)===!1)return n("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[m,this,e,d]),d.veto)return n("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var v=t.param(m,p);g&&(v=v?v+"&"+g:g),"GET"==e.type.toUpperCase()?(e.url+=(e.url.indexOf("?")>=0?"&":"?")+v,e.data=null):e.data=v;var b=[];if(e.resetForm&&b.push(function(){c.resetForm()}),e.clearForm&&b.push(function(){c.clearForm(e.includeHidden)}),!e.dataType&&e.target){var y=e.success||function(){};b.push(function(i){var n=e.replaceTarget?"replaceWith":"html";t(e.target)[n](i).each(y,arguments)})}else e.success&&b.push(e.success);if(e.success=function(t,i,n){for(var s=e.context||this,r=0,o=b.length;o>r;r++)b[r].apply(s,[t,i,n||c,c])},e.error){var w=e.error;e.error=function(t,i,n){var s=e.context||this;w.apply(s,[t,i,n,c])}}if(e.complete){var x=e.complete;e.complete=function(t,i){var n=e.context||this;x.apply(n,[t,i,c])}}var _=t("input[type=file]:enabled",this).filter(function(){return""!==t(this).val()}),C=_.length>0,k="multipart/form-data",$=c.attr("enctype")==k||c.attr("encoding")==k,T=s.fileapi&&s.formdata;n("fileAPI :"+T);var S,D=(C||$)&&!T;e.iframe!==!1&&(e.iframe||D)?e.closeKeepAlive?t.get(e.closeKeepAlive,function(){S=a(m)}):S=a(m):S=(C||$)&&T?o(m):t.ajax(e),c.removeData("jqxhr").data("jqxhr",S);for(var M=0;M<f.length;M++)f[M]=null;return this.trigger("form-submit-notify",[this,e]),this},t.fn.ajaxForm=function(s){if(s=s||{},s.delegation=s.delegation&&t.isFunction(t.fn.on),!s.delegation&&0===this.length){var r={s:this.selector,c:this.context};return!t.isReady&&r.s?(n("DOM not ready, queuing ajaxForm"),t(function(){t(r.s,r.c).ajaxForm(s)}),this):(n("terminating; zero elements found by selector"+(t.isReady?"":" (DOM not ready)")),this)}return s.delegation?(t(document).off("submit.form-plugin",this.selector,e).off("click.form-plugin",this.selector,i).on("submit.form-plugin",this.selector,s,e).on("click.form-plugin",this.selector,s,i),this):this.ajaxFormUnbind().bind("submit.form-plugin",s,e).bind("click.form-plugin",s,i)},t.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},t.fn.formToArray=function(e,i){var n=[];if(0===this.length)return n;var r,o=this[0],a=this.attr("id"),l=e?o.getElementsByTagName("*"):o.elements;if(l&&!/MSIE [678]/.test(navigator.userAgent)&&(l=t(l).get()),a&&(r=t(':input[form="'+a+'"]').get(),r.length&&(l=(l||[]).concat(r))),!l||!l.length)return n;var u,h,c,d,p,g,f;for(u=0,g=l.length;g>u;u++)if(p=l[u],c=p.name,c&&!p.disabled)if(e&&o.clk&&"image"==p.type)o.clk==p&&(n.push({name:c,value:t(p).val(),type:p.type}),n.push({name:c+".x",value:o.clk_x},{name:c+".y",value:o.clk_y}));else if(d=t.fieldValue(p,!0),d&&d.constructor==Array)for(i&&i.push(p),h=0,f=d.length;f>h;h++)n.push({name:c,value:d[h]});else if(s.fileapi&&"file"==p.type){i&&i.push(p);var m=p.files;if(m.length)for(h=0;h<m.length;h++)n.push({name:c,value:m[h],type:p.type});else n.push({name:c,value:"",type:p.type})}else null!==d&&"undefined"!=typeof d&&(i&&i.push(p),n.push({name:c,value:d,type:p.type,required:p.required}));if(!e&&o.clk){var v=t(o.clk),b=v[0];c=b.name,c&&!b.disabled&&"image"==b.type&&(n.push({name:c,value:v.val()}),n.push({name:c+".x",value:o.clk_x},{name:c+".y",value:o.clk_y}))}return n},t.fn.formSerialize=function(e){return t.param(this.formToArray(e))},t.fn.fieldSerialize=function(e){var i=[];return this.each(function(){var n=this.name;if(n){var s=t.fieldValue(this,e);if(s&&s.constructor==Array)for(var r=0,o=s.length;o>r;r++)i.push({name:n,value:s[r]});else null!==s&&"undefined"!=typeof s&&i.push({name:this.name,value:s})}}),t.param(i)},t.fn.fieldValue=function(e){for(var i=[],n=0,s=this.length;s>n;n++){var r=this[n],o=t.fieldValue(r,e);null===o||"undefined"==typeof o||o.constructor==Array&&!o.length||(o.constructor==Array?t.merge(i,o):i.push(o))}return i},t.fieldValue=function(e,i){var n=e.name,s=e.type,r=e.tagName.toLowerCase();if(void 0===i&&(i=!0),i&&(!n||e.disabled||"reset"==s||"button"==s||("checkbox"==s||"radio"==s)&&!e.checked||("submit"==s||"image"==s)&&e.form&&e.form.clk!=e||"select"==r&&-1==e.selectedIndex))return null;if("select"==r){var o=e.selectedIndex;if(0>o)return null;for(var a=[],l=e.options,u="select-one"==s,h=u?o+1:l.length,c=u?o:0;h>c;c++){var d=l[c];if(d.selected){var p=d.value;if(p||(p=d.attributes&&d.attributes.value&&!d.attributes.value.specified?d.text:d.value),u)return p;a.push(p)}}return a}return t(e).val()},t.fn.clearForm=function(e){return this.each(function(){t("input,select,textarea",this).clearFields(e)})},t.fn.clearFields=t.fn.clearInputs=function(e){var i=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var n=this.type,s=this.tagName.toLowerCase();i.test(n)||"textarea"==s?this.value="":"checkbox"==n||"radio"==n?this.checked=!1:"select"==s?this.selectedIndex=-1:"file"==n?/MSIE/.test(navigator.userAgent)?t(this).replaceWith(t(this).clone(!0)):t(this).val(""):e&&(e===!0&&/hidden/.test(n)||"string"==typeof e&&t(this).is(e))&&(this.value="")})},t.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},t.fn.enable=function(t){return void 0===t&&(t=!0),this.each(function(){this.disabled=!t})},t.fn.selected=function(e){return void 0===e&&(e=!0),this.each(function(){var i=this.type;if("checkbox"==i||"radio"==i)this.checked=e;else if("option"==this.tagName.toLowerCase()){var n=t(this).parent("select");e&&n[0]&&"select-one"==n[0].type&&n.find("option").selected(!1),this.selected=e}})},t.fn.ajaxSubmit.debug=!1}),function(t,e,i,n){"use strict";var s=i("html"),r=i(t),o=i(e),a=i.fancybox=function(){a.open.apply(this,arguments)},l=navigator.userAgent.match(/msie/i),u=null,h=e.createTouch!==n,c=function(t){return t&&t.hasOwnProperty&&t instanceof i},d=function(t){return t&&"string"===i.type(t)},p=function(t){return d(t)&&t.indexOf("%")>0},g=function(t){return t&&!(t.style.overflow&&"hidden"===t.style.overflow)&&(t.clientWidth&&t.scrollWidth>t.clientWidth||t.clientHeight&&t.scrollHeight>t.clientHeight)},f=function(t,e){var i=parseInt(t,10)||0;return e&&p(t)&&(i=a.getViewport()[e]/100*i),Math.ceil(i)},m=function(t,e){return f(t,e)+"px"};i.extend(a,{version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!h,fitToView:!0,aspectRatio:!1,topRatio:.5,leftRatio:.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(l?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:i.noop,beforeLoad:i.noop,afterLoad:i.noop,beforeShow:i.noop,afterShow:i.noop,beforeChange:i.noop,beforeClose:i.noop,afterClose:i.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(t,e){return t&&(i.isPlainObject(e)||(e={}),!1!==a.close(!0))?(i.isArray(t)||(t=c(t)?i(t).get():[t]),i.each(t,function(s,r){var o,l,u,h,p,g,f,m={};"object"===i.type(r)&&(r.nodeType&&(r=i(r)),c(r)?(m={href:r.data("fancybox-href")||r.attr("href"),title:r.data("fancybox-title")||r.attr("title"),isDom:!0,element:r},i.metadata&&i.extend(!0,m,r.metadata())):m=r),o=e.href||m.href||(d(r)?r:null),l=e.title!==n?e.title:m.title||"",u=e.content||m.content,h=u?"html":e.type||m.type,!h&&m.isDom&&(h=r.data("fancybox-type"),h||(p=r.prop("class").match(/fancybox\.(\w+)/),h=p?p[1]:null)),d(o)&&(h||(a.isImage(o)?h="image":a.isSWF(o)?h="swf":"#"===o.charAt(0)?h="inline":d(r)&&(h="html",u=r)),"ajax"===h&&(g=o.split(/\s+/,2),o=g.shift(),f=g.shift())),u||("inline"===h?o?u=i(d(o)?o.replace(/.*(?=#[^\s]+$)/,""):o):m.isDom&&(u=r):"html"===h?u=o:h||o||!m.isDom||(h="inline",u=r)),i.extend(m,{href:o,type:h,content:u,title:l,selector:f}),t[s]=m}),a.opts=i.extend(!0,{},a.defaults,e),e.keys!==n&&(a.opts.keys=e.keys?i.extend({},a.defaults.keys,e.keys):!1),a.group=t,a._start(a.opts.index)):void 0},cancel:function(){var t=a.coming;t&&!1!==a.trigger("onCancel")&&(a.hideLoading(),a.ajaxLoad&&a.ajaxLoad.abort(),a.ajaxLoad=null,a.imgPreload&&(a.imgPreload.onload=a.imgPreload.onerror=null),t.wrap&&t.wrap.stop(!0,!0).trigger("onReset").remove(),a.coming=null,a.current||a._afterZoomOut(t))},close:function(t){a.cancel(),!1!==a.trigger("beforeClose")&&(a.unbindEvents(),a.isActive&&(a.isOpen&&t!==!0?(a.isOpen=a.isOpened=!1,a.isClosing=!0,i(".fancybox-item, .fancybox-nav").remove(),a.wrap.stop(!0,!0).removeClass("fancybox-opened"),a.transitions[a.current.closeMethod]()):(i(".fancybox-wrap").stop(!0).trigger("onReset").remove(),a._afterZoomOut())))},play:function(t){var e=function(){clearTimeout(a.player.timer)},i=function(){e(),a.current&&a.player.isActive&&(a.player.timer=setTimeout(a.next,a.current.playSpeed))},n=function(){e(),o.unbind(".player"),a.player.isActive=!1,a.trigger("onPlayEnd")},s=function(){a.current&&(a.current.loop||a.current.index<a.group.length-1)&&(a.player.isActive=!0,o.bind({"onCancel.player beforeClose.player":n,"onUpdate.player":i,"beforeLoad.player":e}),i(),a.trigger("onPlayStart"))};t===!0||!a.player.isActive&&t!==!1?s():n()},next:function(t){var e=a.current;e&&(d(t)||(t=e.direction.next),a.jumpto(e.index+1,t,"next"))},prev:function(t){var e=a.current;e&&(d(t)||(t=e.direction.prev),a.jumpto(e.index-1,t,"prev"))},jumpto:function(t,e,i){var s=a.current;s&&(t=f(t),a.direction=e||s.direction[t>=s.index?"next":"prev"],a.router=i||"jumpto",s.loop&&(0>t&&(t=s.group.length+t%s.group.length),t%=s.group.length),s.group[t]!==n&&(a.cancel(),a._start(t)))},reposition:function(t,e){var n,s=a.current,r=s?s.wrap:null;r&&(n=a._getPosition(e),t&&"scroll"===t.type?(delete n.position,r.stop(!0,!0).animate(n,200)):(r.css(n),s.pos=i.extend({},s.dim,n)))},update:function(t){var e=t&&t.type,i=!e||"orientationchange"===e;i&&(clearTimeout(u),u=null),a.isOpen&&!u&&(u=setTimeout(function(){var n=a.current;n&&!a.isClosing&&(a.wrap.removeClass("fancybox-tmp"),(i||"load"===e||"resize"===e&&n.autoResize)&&a._setDimension(),"scroll"===e&&n.canShrink||a.reposition(t),a.trigger("onUpdate"),u=null)},i&&!h?0:300))},toggle:function(t){a.isOpen&&(a.current.fitToView="boolean"===i.type(t)?t:!a.current.fitToView,h&&(a.wrap.removeAttr("style").addClass("fancybox-tmp"),a.trigger("onUpdate")),a.update())},hideLoading:function(){o.unbind(".loading"),i("#fancybox-loading").remove()},showLoading:function(){var t,e;a.hideLoading(),t=i('<div id="fancybox-loading"><div></div></div>').click(a.cancel).appendTo("body"),o.bind("keydown.loading",function(t){27===(t.which||t.keyCode)&&(t.preventDefault(),a.cancel())}),a.defaults.fixed||(e=a.getViewport(),t.css({position:"absolute",top:.5*e.h+e.y,left:.5*e.w+e.x}))},getViewport:function(){var e=a.current&&a.current.locked||!1,i={x:r.scrollLeft(),y:r.scrollTop()};return e?(i.w=e[0].clientWidth,i.h=e[0].clientHeight):(i.w=h&&t.innerWidth?t.innerWidth:r.width(),i.h=h&&t.innerHeight?t.innerHeight:r.height()),i},unbindEvents:function(){a.wrap&&c(a.wrap)&&a.wrap.unbind(".fb"),o.unbind(".fb"),r.unbind(".fb")},bindEvents:function(){var t,e=a.current;e&&(r.bind("orientationchange.fb"+(h?"":" resize.fb")+(e.autoCenter&&!e.locked?" scroll.fb":""),a.update),t=e.keys,t&&o.bind("keydown.fb",function(s){var r=s.which||s.keyCode,o=s.target||s.srcElement;return 27===r&&a.coming?!1:void(s.ctrlKey||s.altKey||s.shiftKey||s.metaKey||o&&(o.type||i(o).is("[contenteditable]"))||i.each(t,function(t,o){return e.group.length>1&&o[r]!==n?(a[t](o[r]),s.preventDefault(),!1):i.inArray(r,o)>-1?(a[t](),s.preventDefault(),!1):void 0}))}),i.fn.mousewheel&&e.mouseWheel&&a.wrap.bind("mousewheel.fb",function(t,n,s,r){for(var o=t.target||null,l=i(o),u=!1;l.length&&!(u||l.is(".fancybox-skin")||l.is(".fancybox-wrap"));)u=g(l[0]),l=i(l).parent();0===n||u||a.group.length>1&&!e.canShrink&&(r>0||s>0?a.prev(r>0?"down":"left"):(0>r||0>s)&&a.next(0>r?"up":"right"),t.preventDefault())}))},trigger:function(t,e){var n,s=e||a.coming||a.current;if(s){if(i.isFunction(s[t])&&(n=s[t].apply(s,Array.prototype.slice.call(arguments,1))),n===!1)return!1;s.helpers&&i.each(s.helpers,function(e,n){n&&a.helpers[e]&&i.isFunction(a.helpers[e][t])&&a.helpers[e][t](i.extend(!0,{},a.helpers[e].defaults,n),s)}),o.trigger(t)}},isImage:function(t){return d(t)&&t.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(t){return d(t)&&t.match(/\.(swf)((\?|#).*)?$/i)},_start:function(t){var e,n,s,r,o,l={};if(t=f(t),e=a.group[t]||null,!e)return!1;if(l=i.extend(!0,{},a.opts,e),r=l.margin,o=l.padding,"number"===i.type(r)&&(l.margin=[r,r,r,r]),"number"===i.type(o)&&(l.padding=[o,o,o,o]),l.modal&&i.extend(!0,l,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}}),l.autoSize&&(l.autoWidth=l.autoHeight=!0),"auto"===l.width&&(l.autoWidth=!0),"auto"===l.height&&(l.autoHeight=!0),l.group=a.group,l.index=t,a.coming=l,!1===a.trigger("beforeLoad"))return void(a.coming=null);if(s=l.type,n=l.href,!s)return a.coming=null,a.current&&a.router&&"jumpto"!==a.router?(a.current.index=t,a[a.router](a.direction)):!1;if(a.isActive=!0,("image"===s||"swf"===s)&&(l.autoHeight=l.autoWidth=!1,l.scrolling="visible"),"image"===s&&(l.aspectRatio=!0),"iframe"===s&&h&&(l.scrolling="scroll"),l.wrap=i(l.tpl.wrap).addClass("fancybox-"+(h?"mobile":"desktop")+" fancybox-type-"+s+" fancybox-tmp "+l.wrapCSS).appendTo(l.parent||"body"),i.extend(l,{skin:i(".fancybox-skin",l.wrap),outer:i(".fancybox-outer",l.wrap),inner:i(".fancybox-inner",l.wrap)}),i.each(["Top","Right","Bottom","Left"],function(t,e){l.skin.css("padding"+e,m(l.padding[t]))}),a.trigger("onReady"),"inline"===s||"html"===s){if(!l.content||!l.content.length)return a._error("content")}else if(!n)return a._error("href");"image"===s?a._loadImage():"ajax"===s?a._loadAjax():"iframe"===s?a._loadIframe():a._afterLoad()},_error:function(t){i.extend(a.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:t,content:a.coming.tpl.error}),a._afterLoad()},_loadImage:function(){var t=a.imgPreload=new Image;t.onload=function(){this.onload=this.onerror=null,a.coming.width=this.width/a.opts.pixelRatio,a.coming.height=this.height/a.opts.pixelRatio,a._afterLoad()},t.onerror=function(){this.onload=this.onerror=null,a._error("image")},t.src=a.coming.href,t.complete!==!0&&a.showLoading()},_loadAjax:function(){var t=a.coming;a.showLoading(),a.ajaxLoad=i.ajax(i.extend({},t.ajax,{url:t.href,error:function(t,e){a.coming&&"abort"!==e?a._error("ajax",t):a.hideLoading()},success:function(e,i){"success"===i&&(t.content=e,a._afterLoad())}}))},_loadIframe:function(){var t=a.coming,e=i(t.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",h?"auto":t.iframe.scrolling).attr("src",t.href);i(t.wrap).bind("onReset",function(){try{i(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(t){}}),t.iframe.preload&&(a.showLoading(),e.one("load",function(){i(this).data("ready",1),h||i(this).bind("load.fb",a.update),i(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show(),a._afterLoad()})),t.content=e.appendTo(t.inner),t.iframe.preload||a._afterLoad()},_preloadImages:function(){var t,e,i=a.group,n=a.current,s=i.length,r=n.preload?Math.min(n.preload,s-1):0;for(e=1;r>=e;e+=1)t=i[(n.index+e)%s],"image"===t.type&&t.href&&((new Image).src=t.href)},_afterLoad:function(){var t,e,n,s,r,o,l=a.coming,u=a.current,h="fancybox-placeholder";if(a.hideLoading(),l&&a.isActive!==!1){if(!1===a.trigger("afterLoad",l,u))return l.wrap.stop(!0).trigger("onReset").remove(),void(a.coming=null);switch(u&&(a.trigger("beforeChange",u),u.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()),a.unbindEvents(),t=l,e=l.content,n=l.type,s=l.scrolling,i.extend(a,{wrap:t.wrap,skin:t.skin,outer:t.outer,inner:t.inner,current:t,previous:u}),r=t.href,n){case"inline":case"ajax":case"html":t.selector?e=i("<div>").html(e).find(t.selector):c(e)&&(e.data(h)||e.data(h,i('<div class="'+h+'"></div>').insertAfter(e).hide()),e=e.show().detach(),t.wrap.bind("onReset",function(){i(this).find(e).length&&e.hide().replaceAll(e.data(h)).data(h,!1)}));break;case"image":e=t.tpl.image.replace("{href}",r);break;case"swf":e='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+r+'"></param>',o="",i.each(t.swf,function(t,i){e+='<param name="'+t+'" value="'+i+'"></param>',o+=" "+t+'="'+i+'"'}),e+='<embed src="'+r+'" type="application/x-shockwave-flash" width="100%" height="100%"'+o+"></embed></object>"}c(e)&&e.parent().is(t.inner)||t.inner.append(e),a.trigger("beforeShow"),t.inner.css("overflow","yes"===s?"scroll":"no"===s?"hidden":s),a._setDimension(),a.reposition(),a.isOpen=!1,a.coming=null,a.bindEvents(),a.isOpened?u.prevMethod&&a.transitions[u.prevMethod]():i(".fancybox-wrap").not(t.wrap).stop(!0).trigger("onReset").remove(),a.transitions[a.isOpened?t.nextMethod:t.openMethod](),a._preloadImages()
}},_setDimension:function(){var t,e,n,s,r,o,l,u,h,c,d,g,v,b,y,w=a.getViewport(),x=0,_=!1,C=!1,k=a.wrap,$=a.skin,T=a.inner,S=a.current,D=S.width,M=S.height,E=S.minWidth,P=S.minHeight,I=S.maxWidth,z=S.maxHeight,L=S.scrolling,j=S.scrollOutside?S.scrollbarWidth:0,R=S.margin,O=f(R[1]+R[3]),A=f(R[0]+R[2]);if(k.add($).add(T).width("auto").height("auto").removeClass("fancybox-tmp"),t=f($.outerWidth(!0)-$.width()),e=f($.outerHeight(!0)-$.height()),n=O+t,s=A+e,r=p(D)?(w.w-n)*f(D)/100:D,o=p(M)?(w.h-s)*f(M)/100:M,"iframe"===S.type){if(b=S.content,S.autoHeight&&1===b.data("ready"))try{b[0].contentWindow.document.location&&(T.width(r).height(9999),y=b.contents().find("body"),j&&y.css("overflow-x","hidden"),o=y.outerHeight(!0))}catch(B){}}else(S.autoWidth||S.autoHeight)&&(T.addClass("fancybox-tmp"),S.autoWidth||T.width(r),S.autoHeight||T.height(o),S.autoWidth&&(r=T.width()),S.autoHeight&&(o=T.height()),T.removeClass("fancybox-tmp"));if(D=f(r),M=f(o),h=r/o,E=f(p(E)?f(E,"w")-n:E),I=f(p(I)?f(I,"w")-n:I),P=f(p(P)?f(P,"h")-s:P),z=f(p(z)?f(z,"h")-s:z),l=I,u=z,S.fitToView&&(I=Math.min(w.w-n,I),z=Math.min(w.h-s,z)),g=w.w-O,v=w.h-A,S.aspectRatio?(D>I&&(D=I,M=f(D/h)),M>z&&(M=z,D=f(M*h)),E>D&&(D=E,M=f(D/h)),P>M&&(M=P,D=f(M*h))):(D=Math.max(E,Math.min(D,I)),S.autoHeight&&"iframe"!==S.type&&(T.width(D),M=T.height()),M=Math.max(P,Math.min(M,z))),S.fitToView)if(T.width(D).height(M),k.width(D+t),c=k.width(),d=k.height(),S.aspectRatio)for(;(c>g||d>v)&&D>E&&M>P&&!(x++>19);)M=Math.max(P,Math.min(z,M-10)),D=f(M*h),E>D&&(D=E,M=f(D/h)),D>I&&(D=I,M=f(D/h)),T.width(D).height(M),k.width(D+t),c=k.width(),d=k.height();else D=Math.max(E,Math.min(D,D-(c-g))),M=Math.max(P,Math.min(M,M-(d-v)));j&&"auto"===L&&o>M&&g>D+t+j&&(D+=j),T.width(D).height(M),k.width(D+t),c=k.width(),d=k.height(),_=(c>g||d>v)&&D>E&&M>P,C=S.aspectRatio?l>D&&u>M&&r>D&&o>M:(l>D||u>M)&&(r>D||o>M),i.extend(S,{dim:{width:m(c),height:m(d)},origWidth:r,origHeight:o,canShrink:_,canExpand:C,wPadding:t,hPadding:e,wrapSpace:d-$.outerHeight(!0),skinSpace:$.height()-M}),!b&&S.autoHeight&&M>P&&z>M&&!C&&T.height("auto")},_getPosition:function(t){var e=a.current,i=a.getViewport(),n=e.margin,s=a.wrap.width()+n[1]+n[3],r=a.wrap.height()+n[0]+n[2],o={position:"absolute",top:n[0],left:n[3]};return e.autoCenter&&e.fixed&&!t&&r<=i.h&&s<=i.w?o.position="fixed":e.locked||(o.top+=i.y,o.left+=i.x),o.top=m(Math.max(o.top,o.top+(i.h-r)*e.topRatio)),o.left=m(Math.max(o.left,o.left+(i.w-s)*e.leftRatio)),o},_afterZoomIn:function(){var t=a.current;t&&(a.isOpen=a.isOpened=!0,a.wrap.css("overflow","visible").addClass("fancybox-opened"),a.update(),(t.closeClick||t.nextClick&&a.group.length>1)&&a.inner.css("cursor","pointer").bind("click.fb",function(e){i(e.target).is("a")||i(e.target).parent().is("a")||(e.preventDefault(),a[t.closeClick?"close":"next"]())}),t.closeBtn&&i(t.tpl.closeBtn).appendTo(a.skin).bind("click.fb",function(t){t.preventDefault(),a.close()}),t.arrows&&a.group.length>1&&((t.loop||t.index>0)&&i(t.tpl.prev).appendTo(a.outer).bind("click.fb",a.prev),(t.loop||t.index<a.group.length-1)&&i(t.tpl.next).appendTo(a.outer).bind("click.fb",a.next)),a.trigger("afterShow"),t.loop||t.index!==t.group.length-1?a.opts.autoPlay&&!a.player.isActive&&(a.opts.autoPlay=!1,a.play()):a.play(!1))},_afterZoomOut:function(t){t=t||a.current,i(".fancybox-wrap").trigger("onReset").remove(),i.extend(a,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null}),a.trigger("afterClose",t)}}),a.transitions={getOrigPosition:function(){var t=a.current,e=t.element,i=t.orig,n={},s=50,r=50,o=t.hPadding,l=t.wPadding,u=a.getViewport();return!i&&t.isDom&&e.is(":visible")&&(i=e.find("img:first"),i.length||(i=e)),c(i)?(n=i.offset(),i.is("img")&&(s=i.outerWidth(),r=i.outerHeight())):(n.top=u.y+(u.h-r)*t.topRatio,n.left=u.x+(u.w-s)*t.leftRatio),("fixed"===a.wrap.css("position")||t.locked)&&(n.top-=u.y,n.left-=u.x),n={top:m(n.top-o*t.topRatio),left:m(n.left-l*t.leftRatio),width:m(s+l),height:m(r+o)}},step:function(t,e){var i,n,s,r=e.prop,o=a.current,l=o.wrapSpace,u=o.skinSpace;("width"===r||"height"===r)&&(i=e.end===e.start?1:(t-e.start)/(e.end-e.start),a.isClosing&&(i=1-i),n="width"===r?o.wPadding:o.hPadding,s=t-n,a.skin[r](f("width"===r?s:s-l*i)),a.inner[r](f("width"===r?s:s-l*i-u*i)))},zoomIn:function(){var t=a.current,e=t.pos,n=t.openEffect,s="elastic"===n,r=i.extend({opacity:1},e);delete r.position,s?(e=this.getOrigPosition(),t.openOpacity&&(e.opacity=.1)):"fade"===n&&(e.opacity=.1),a.wrap.css(e).animate(r,{duration:"none"===n?0:t.openSpeed,easing:t.openEasing,step:s?this.step:null,complete:a._afterZoomIn})},zoomOut:function(){var t=a.current,e=t.closeEffect,i="elastic"===e,n={opacity:.1};i&&(n=this.getOrigPosition(),t.closeOpacity&&(n.opacity=.1)),a.wrap.animate(n,{duration:"none"===e?0:t.closeSpeed,easing:t.closeEasing,step:i?this.step:null,complete:a._afterZoomOut})},changeIn:function(){var t,e=a.current,i=e.nextEffect,n=e.pos,s={opacity:1},r=a.direction,o=200;n.opacity=.1,"elastic"===i&&(t="down"===r||"up"===r?"top":"left","down"===r||"right"===r?(n[t]=m(f(n[t])-o),s[t]="+="+o+"px"):(n[t]=m(f(n[t])+o),s[t]="-="+o+"px")),"none"===i?a._afterZoomIn():a.wrap.css(n).animate(s,{duration:e.nextSpeed,easing:e.nextEasing,complete:a._afterZoomIn})},changeOut:function(){var t=a.previous,e=t.prevEffect,n={opacity:.1},s=a.direction,r=200;"elastic"===e&&(n["down"===s||"up"===s?"top":"left"]=("up"===s||"left"===s?"-":"+")+"="+r+"px"),t.wrap.animate(n,{duration:"none"===e?0:t.prevSpeed,easing:t.prevEasing,complete:function(){i(this).trigger("onReset").remove()}})}},a.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!h,fixed:!0},overlay:null,fixed:!1,el:i("html"),create:function(t){t=i.extend({},this.defaults,t),this.overlay&&this.close(),this.overlay=i('<div class="fancybox-overlay"></div>').appendTo(a.coming?a.coming.parent:t.parent),this.fixed=!1,t.fixed&&a.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)},open:function(t){var e=this;t=i.extend({},this.defaults,t),this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(t),this.fixed||(r.bind("resize.overlay",i.proxy(this.update,this)),this.update()),t.closeClick&&this.overlay.bind("click.overlay",function(t){return i(t.target).hasClass("fancybox-overlay")?(a.isActive?a.close():e.close(),!1):void 0}),this.overlay.css(t.css).show()},close:function(){var t,e;r.unbind("resize.overlay"),this.el.hasClass("fancybox-lock")&&(i(".fancybox-margin").removeClass("fancybox-margin"),t=r.scrollTop(),e=r.scrollLeft(),this.el.removeClass("fancybox-lock"),r.scrollTop(t).scrollLeft(e)),i(".fancybox-overlay").remove().hide(),i.extend(this,{overlay:null,fixed:!1})},update:function(){var t,i="100%";this.overlay.width(i).height("100%"),l?(t=Math.max(e.documentElement.offsetWidth,e.body.offsetWidth),o.width()>t&&(i=o.width())):o.width()>r.width()&&(i=o.width()),this.overlay.width(i).height(o.height())},onReady:function(t,e){var n=this.overlay;i(".fancybox-overlay").stop(!0,!0),n||this.create(t),t.locked&&this.fixed&&e.fixed&&(n||(this.margin=o.height()>r.height()?i("html").css("margin-right").replace("px",""):!1),e.locked=this.overlay.append(e.wrap),e.fixed=!1),t.showEarly===!0&&this.beforeShow.apply(this,arguments)},beforeShow:function(t,e){var n,s;e.locked&&(this.margin!==!1&&(i("*").filter(function(){return"fixed"===i(this).css("position")&&!i(this).hasClass("fancybox-overlay")&&!i(this).hasClass("fancybox-wrap")}).addClass("fancybox-margin"),this.el.addClass("fancybox-margin")),n=r.scrollTop(),s=r.scrollLeft(),this.el.addClass("fancybox-lock"),r.scrollTop(n).scrollLeft(s)),this.open(t)},onUpdate:function(){this.fixed||this.update()},afterClose:function(t){this.overlay&&!a.coming&&this.overlay.fadeOut(t.speedOut,i.proxy(this.close,this))}},a.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(t){var e,n,s=a.current,r=s.title,o=t.type;if(i.isFunction(r)&&(r=r.call(s.element,s)),d(r)&&""!==i.trim(r)){switch(e=i('<div class="fancybox-title fancybox-title-'+o+'-wrap">'+r+"</div>"),o){case"inside":n=a.skin;break;case"outside":n=a.wrap;break;case"over":n=a.inner;break;default:n=a.skin,e.appendTo("body"),l&&e.width(e.width()),e.wrapInner('<span class="child"></span>'),a.current.margin[2]+=Math.abs(f(e.css("margin-bottom")))}e["top"===t.position?"prependTo":"appendTo"](n)}}},i.fn.fancybox=function(t){var e,n=i(this),s=this.selector||"",r=function(r){var o,l,u=i(this).blur(),h=e;r.ctrlKey||r.altKey||r.shiftKey||r.metaKey||u.is(".fancybox-wrap")||(o=t.groupAttr||"data-fancybox-group",l=u.attr(o),l||(o="rel",l=u.get(0)[o]),l&&""!==l&&"nofollow"!==l&&(u=s.length?i(s):n,u=u.filter("["+o+'="'+l+'"]'),h=u.index(this)),t.index=h,a.open(u,t)!==!1&&r.preventDefault())};return t=t||{},e=t.index||0,s&&t.live!==!1?o.undelegate(s,"click.fb-start").delegate(s+":not('.fancybox-item, .fancybox-nav')","click.fb-start",r):n.unbind("click.fb-start").bind("click.fb-start",r),this.filter("[data-fancybox-start=1]").trigger("click"),this},o.ready(function(){var e,r;i.scrollbarWidth===n&&(i.scrollbarWidth=function(){var t=i('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),e=t.children(),n=e.innerWidth()-e.height(99).innerWidth();return t.remove(),n}),i.support.fixedPosition===n&&(i.support.fixedPosition=function(){var t=i('<div style="position:fixed;top:20px;"></div>').appendTo("body"),e=20===t[0].offsetTop||15===t[0].offsetTop;return t.remove(),e}()),i.extend(a.defaults,{scrollbarWidth:i.scrollbarWidth(),fixed:i.support.fixedPosition,parent:i("body")}),e=i(t).width(),s.addClass("fancybox-lock-test"),r=i(t).width(),s.removeClass("fancybox-lock-test"),i("<style type='text/css'>.fancybox-margin{margin-right:"+(r-e)+"px;}</style>").appendTo("head")})}(window,document,jQuery);var ubermenu_data={remove_conflicts:"on",reposition_on_load:"off",intent_delay:"300",intent_interval:"100",intent_threshold:"7",scrollto_offset:"50",responsive_breakpoint:"0",accessible:"on",retractor_display_strategy:"responsive"};!function(t){t.fn.wp_editor=function(e){if(t(this).is("textarea")||console.warn("Element must be a textarea"),"undefined"==typeof tinyMCEPreInit&&console.warn("typeof tinyMCEPreInit == undefined"),"undefined"==typeof QTags&&console.warn("typeof QTags == undefined"),"undefined"==typeof ap_vars&&console.warn("typeof ap_vars == undefined"),!t(this).is("textarea")||"undefined"==typeof tinyMCEPreInit||"undefined"==typeof QTags||"undefined"==typeof ap_vars)return this;var i={mode:"html",mceInit:{theme:"modern",skin:"lightgray",language:"da",formats:{alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"},deep:!1,remove:"none"},{selector:"img,table,dl.wp-caption",classes:["alignleft"],deep:!1,remove:"none"}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"},deep:!1,remove:"none"},{selector:"img,table,dl.wp-caption",classes:["aligncenter"],deep:!1,remove:"none"}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"},deep:!1,remove:"none"},{selector:"img,table,dl.wp-caption",classes:["alignright"],deep:!1,remove:"none"}],strikethrough:{inline:"del",deep:!0,split:!0}},relative_urls:!1,remove_script_host:!1,convert_urls:!1,browser_spellcheck:!0,fix_list_elements:!0,entities:"38,amp,60,lt,62,gt",entity_encoding:"raw",keep_styles:!1,paste_webkit_styles:"font-weight font-style color",preview_styles:"font-family font-size font-weight font-style text-decoration text-transform",wpeditimage_disable_captions:!1,wpeditimage_html5_captions:!1,plugins:"charmap,hr,media,paste,tabfocus,textcolor,fullscreen,wordpress,wpeditimage,wpgallery,wplink,wpdialogs,wpview,image",content_css:ap_vars.includes_url+"css/dashicons.css?ver=3.9,"+ap_vars.includes_url+"js/mediaelement/mediaelementplayer.min.css?ver=3.9,"+ap_vars.includes_url+"js/mediaelement/wp-mediaelement.css?ver=3.9,"+ap_vars.includes_url+"js/tinymce/skins/wordpress/wp-content.css?ver=3.9",selector:"#apid",resize:"vertical",menubar:!1,wpautop:!0,indent:!1,toolbar1:"bold,italic,strikethrough,bullist,numlist,blockquote,hr,alignleft,aligncenter,alignright,link,unlink,wp_more,spellchecker,fullscreen,wp_adv",toolbar2:"formatselect,underline,alignjustify,forecolor,pastetext,removeformat,charmap,outdent,indent,undo,redo,wp_help",toolbar3:"",toolbar4:"",tabfocus_elements:":prev,:next",body_class:"apid"}},n=new RegExp("apid","g");tinyMCEPreInit.mceInit.apid&&(i.mceInit=tinyMCEPreInit.mceInit.apid);var e=t.extend(!0,i,e);return this.each(function(){if(t(this).is("textarea")){var i=t(this).attr("id");t.each(e.mceInit,function(s,r){"string"==t.type(r)&&(e.mceInit[s]=r.replace(n,i))}),e.mode="tmce"==e.mode?"tmce":"html",tinyMCEPreInit.mceInit[i]=e.mceInit,t(this).addClass("wp-editor-area").show();var s=this;if(t(this).closest(".wp-editor-wrap").length){var r=t(this).closest(".wp-editor-wrap").parent();t(this).closest(".wp-editor-wrap").before(t(this).clone()),t(this).closest(".wp-editor-wrap").remove(),s=r.find('textarea[id="'+i+'"]')}var o=t('<div id="wp-'+i+'-wrap" class="wp-core-ui wp-editor-wrap '+e.mode+'-active" />'),a=t('<div id="wp-'+i+'-editor-tools" class="wp-editor-tools hide-if-no-js" />'),l=t('<div class="wp-editor-tabs" />'),u=t('<a id="'+i+'-html" class="wp-switch-editor switch-html" onclick="switchEditors.switchto(this);">Text</a>'),h=t('<a id="'+i+'-tmce" class="wp-switch-editor switch-tmce" onclick="switchEditors.switchto(this);">Visual</a>'),c=t('<div id="wp-'+i+'-media-buttons" class="wp-media-buttons" />'),d=t('<a href="#" id="insert-media-button" class="button insert-media add_media" data-editor="'+i+'" title="Add Media"><span class="wp-media-buttons-icon"></span> Add Media</a>'),p=t('<div id="wp-'+i+'-editor-container" class="wp-editor-container" />'),g=!1;d.appendTo(c),c.appendTo(a),u.appendTo(l),h.appendTo(l),l.appendTo(a),a.appendTo(o),p.appendTo(o),p.append(t(s).clone().addClass("wp-editor-area")),0!=g&&t.each(g,function(){t('link[href="'+this+'"]').length||t(s).before('<link rel="stylesheet" type="text/css" href="'+this+'">')}),t(s).before('<link rel="stylesheet" id="editor-buttons-css" href="'+ap_vars.includes_url+'css/editor.css" type="text/css" media="all">'),t(s).before(o),t(s).remove(),new QTags(i),QTags._buttonsInit(),switchEditors.go(i,e.mode),t(o).on("click",".insert-media",function(e){var i=t(e.currentTarget),n=i.data("editor"),s={frame:"post",state:"insert",title:wp.media.view.l10n.addMedia,multiple:!0};e.preventDefault(),i.blur(),i.hasClass("gallery")&&(s.state="gallery",s.title=wp.media.view.l10n.createGalleryTitle),wp.media.editor.open(n,s)})}else console.warn("Element must be a textarea")})}}(jQuery,window),function(t){t.fn.autogrow=function(e){return this.filter("textarea").each(function(){var i=this,n=t(i),s=n.height(),r=n.hasClass("autogrow-short")?0:parseInt(n.css("lineHeight"))||0,o=t.extend({preGrowCallback:null,postGrowCallback:null},e),a=t("<div></div>").css({position:"absolute",top:-1e4,left:-1e4,width:n.width(),fontSize:n.css("fontSize"),fontFamily:n.css("fontFamily"),fontWeight:n.css("fontWeight"),lineHeight:n.css("lineHeight"),resize:"none","word-wrap":"break-word"}).appendTo(document.body),l=function(t){var e=function(t,e){for(var i=0,n="";e>i;i++)n+=t;return n},l=i.value.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(t){return e("&nbsp;",t.length-1)+" "});t&&t.data&&"keydown"===t.data.event&&13===t.keyCode&&(l+="<br />"),a.css("width",n.width()),a.html(l+(0===r?"...":""));var u=Math.max(a.height()+r,s);null!=o.preGrowCallback&&(u=o.preGrowCallback(n,a,u,s)),n.height(u),null!=o.postGrowCallback&&o.postGrowCallback(n)};n.change(l).keyup(l).keydown({event:"keydown"},l),t(window).resize(l),l()})}}(jQuery),function(t,e){"use strict";"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.autosize=e()}(this,function(){function t(t){function e(){var e=window.getComputedStyle(t,null);"vertical"===e.resize?t.style.resize="none":"both"===e.resize&&(t.style.resize="horizontal"),t.style.wordWrap="break-word";var r=t.style.width;t.style.width="0px",t.offsetWidth,t.style.width=r,n="none"!==e.maxHeight?parseFloat(e.maxHeight):!1,s="content-box"===e.boxSizing?-(parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)):parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth),i()}function i(){var e=t.style.height,i=document.documentElement.scrollTop,r=document.body.scrollTop;t.style.height="auto";var o=t.scrollHeight+s;if(n!==!1&&o>n?(o=n,"scroll"!==t.style.overflowY&&(t.style.overflowY="scroll")):"hidden"!==t.style.overflowY&&(t.style.overflowY="hidden"),t.style.height=o+"px",document.documentElement.scrollTop=i,document.body.scrollTop=r,e!==t.style.height){var a=document.createEvent("Event");a.initEvent("autosize.resized",!0,!1),t.dispatchEvent(a)}}if(t&&t.nodeName&&"TEXTAREA"===t.nodeName&&!t.hasAttribute("data-autosize-on")){var n,s;"onpropertychange"in t&&"oninput"in t&&t.addEventListener("keyup",i),window.addEventListener("resize",i),t.addEventListener("input",i),t.addEventListener("autosize.update",i),t.addEventListener("autosize.destroy",function(e){window.removeEventListener("resize",i),t.removeEventListener("input",i),t.removeEventListener("keyup",i),t.removeEventListener("autosize.destroy"),Object.keys(e).forEach(function(i){t.style[i]=e[i]}),t.removeAttribute("data-autosize-on")}.bind(t,{height:t.style.height,overflow:t.style.overflow,overflowY:t.style.overflowY,wordWrap:t.style.wordWrap,resize:t.style.resize})),t.setAttribute("data-autosize-on",!0),t.style.overflow="hidden",t.style.overflowY="hidden",e()}}return"function"!=typeof window.getComputedStyle?function(t){return t}:function(e){return e&&e.length?Array.prototype.forEach.call(e,t):e&&e.nodeName&&t(e),e}}),function(t,e,i,n){function s(e,i){this.settings=null,this.options=t.extend({},s.Defaults,i),this.$element=t(e),this.drag=t.extend({},d),this.state=t.extend({},p),this.e=t.extend({},g),this._plugins={},this._supress={},this._current=null,this._speed=null,this._coordinates=[],this._breakpoint=null,this._width=null,this._items=[],this._clones=[],this._mergers=[],this._invalidated={},this._pipe=[],t.each(s.Plugins,t.proxy(function(t,e){this._plugins[t[0].toLowerCase()+t.slice(1)]=new e(this)},this)),t.each(s.Pipe,t.proxy(function(e,i){this._pipe.push({filter:i.filter,run:t.proxy(i.run,this)})},this)),this.setup(),this.initialize()}function r(t){if(t.touches!==n)return{x:t.touches[0].pageX,y:t.touches[0].pageY};if(t.touches===n){if(t.pageX!==n)return{x:t.pageX,y:t.pageY};if(t.pageX===n)return{x:t.clientX,y:t.clientY}}}function o(t){var e,n,s=i.createElement("div"),r=t;for(e in r)if(n=r[e],"undefined"!=typeof s.style[n])return s=null,[n,e];return[!1]}function a(){return o(["transition","WebkitTransition","MozTransition","OTransition"])[1]}function l(){return o(["transform","WebkitTransform","MozTransform","OTransform","msTransform"])[0]}function u(){return o(["perspective","webkitPerspective","MozPerspective","OPerspective","MsPerspective"])[0]}function h(){return"ontouchstart"in e||!!navigator.msMaxTouchPoints}function c(){return e.navigator.msPointerEnabled}var d,p,g;d={start:0,startX:0,startY:0,current:0,currentX:0,currentY:0,offsetX:0,offsetY:0,distance:null,startTime:0,endTime:0,updatedX:0,targetEl:null},p={isTouch:!1,isScrolling:!1,isSwiping:!1,direction:!1,inMotion:!1},g={_onDragStart:null,_onDragMove:null,_onDragEnd:null,_transitionEnd:null,_resizer:null,_responsiveCall:null,_goToLoop:null,_checkVisibile:null},s.Defaults={items:3,loop:!1,center:!1,mouseDrag:!0,touchDrag:!0,pullDrag:!0,freeDrag:!1,margin:0,stagePadding:0,merge:!1,mergeFit:!0,autoWidth:!1,startPosition:0,rtl:!1,smartSpeed:250,fluidSpeed:!1,dragEndSpeed:!1,responsive:{},responsiveRefreshRate:200,responsiveBaseElement:e,responsiveClass:!1,fallbackEasing:"swing",info:!1,nestedItemSelector:!1,itemElement:"div",stageElement:"div",themeClass:"owl-theme",baseClass:"owl-carousel",itemClass:"owl-item",centerClass:"center",activeClass:"active"},s.Width={Default:"default",Inner:"inner",Outer:"outer"},s.Plugins={},s.Pipe=[{filter:["width","items","settings"],run:function(t){t.current=this._items&&this._items[this.relative(this._current)]}},{filter:["items","settings"],run:function(){var t=this._clones,e=this.$stage.children(".cloned");(e.length!==t.length||!this.settings.loop&&t.length>0)&&(this.$stage.children(".cloned").remove(),this._clones=[])}},{filter:["items","settings"],run:function(){var t,e,i=this._clones,n=this._items,s=this.settings.loop?i.length-Math.max(2*this.settings.items,4):0;for(t=0,e=Math.abs(s/2);e>t;t++)s>0?(this.$stage.children().eq(n.length+i.length-1).remove(),i.pop(),this.$stage.children().eq(0).remove(),i.pop()):(i.push(i.length/2),this.$stage.append(n[i[i.length-1]].clone().addClass("cloned")),i.push(n.length-1-(i.length-1)/2),this.$stage.prepend(n[i[i.length-1]].clone().addClass("cloned")))}},{filter:["width","items","settings"],run:function(){var t,e,i,n=this.settings.rtl?1:-1,s=(this.width()/this.settings.items).toFixed(3),r=0;for(this._coordinates=[],e=0,i=this._clones.length+this._items.length;i>e;e++)t=this._mergers[this.relative(e)],t=this.settings.mergeFit&&Math.min(t,this.settings.items)||t,r+=(this.settings.autoWidth?this._items[this.relative(e)].width()+this.settings.margin:s*t)*n,this._coordinates.push(r)}},{filter:["width","items","settings"],run:function(){var e,i,n=(this.width()/this.settings.items).toFixed(3),s={width:Math.abs(this._coordinates[this._coordinates.length-1])+2*this.settings.stagePadding,"padding-left":this.settings.stagePadding||"","padding-right":this.settings.stagePadding||""};if(this.$stage.css(s),s={width:this.settings.autoWidth?"auto":n-this.settings.margin},s[this.settings.rtl?"margin-left":"margin-right"]=this.settings.margin,!this.settings.autoWidth&&t.grep(this._mergers,function(t){return t>1}).length>0)for(e=0,i=this._coordinates.length;i>e;e++)s.width=Math.abs(this._coordinates[e])-Math.abs(this._coordinates[e-1]||0)-this.settings.margin,this.$stage.children().eq(e).css(s);else this.$stage.children().css(s)}},{filter:["width","items","settings"],run:function(t){t.current&&this.reset(this.$stage.children().index(t.current))}},{filter:["position"],run:function(){this.animate(this.coordinates(this._current))}},{filter:["width","position","items","settings"],run:function(){var t,e,i,n,s=this.settings.rtl?1:-1,r=2*this.settings.stagePadding,o=this.coordinates(this.current())+r,a=o+this.width()*s,l=[];for(i=0,n=this._coordinates.length;n>i;i++)t=this._coordinates[i-1]||0,e=Math.abs(this._coordinates[i])+r*s,(this.op(t,"<=",o)&&this.op(t,">",a)||this.op(e,"<",o)&&this.op(e,">",a))&&l.push(i);this.$stage.children("."+this.settings.activeClass).removeClass(this.settings.activeClass),this.$stage.children(":eq("+l.join("), :eq(")+")").addClass(this.settings.activeClass),this.settings.center&&(this.$stage.children("."+this.settings.centerClass).removeClass(this.settings.centerClass),this.$stage.children().eq(this.current()).addClass(this.settings.centerClass))}}],s.prototype.initialize=function(){if(this.trigger("initialize"),this.$element.addClass(this.settings.baseClass).addClass(this.settings.themeClass).toggleClass("owl-rtl",this.settings.rtl),this.browserSupport(),this.settings.autoWidth&&this.state.imagesLoaded!==!0){var e,i,s;if(e=this.$element.find("img"),i=this.settings.nestedItemSelector?"."+this.settings.nestedItemSelector:n,s=this.$element.children(i).width(),e.length&&0>=s)return this.preloadAutoWidthImages(e),!1}this.$element.addClass("owl-loading"),this.$stage=t("<"+this.settings.stageElement+' class="owl-stage"/>').wrap('<div class="owl-stage-outer">'),this.$element.append(this.$stage.parent()),this.replace(this.$element.children().not(this.$stage.parent())),this._width=this.$element.width(),this.refresh(),this.$element.removeClass("owl-loading").addClass("owl-loaded"),this.eventsCall(),this.internalEvents(),this.addTriggerableEvents(),this.trigger("initialized")},s.prototype.setup=function(){var e=this.viewport(),i=this.options.responsive,n=-1,s=null;i?(t.each(i,function(t){e>=t&&t>n&&(n=Number(t))}),s=t.extend({},this.options,i[n]),delete s.responsive,s.responsiveClass&&this.$element.attr("class",function(t,e){return e.replace(/\b owl-responsive-\S+/g,"")}).addClass("owl-responsive-"+n)):s=t.extend({},this.options),(null===this.settings||this._breakpoint!==n)&&(this.trigger("change",{property:{name:"settings",value:s}}),this._breakpoint=n,this.settings=s,this.invalidate("settings"),this.trigger("changed",{property:{name:"settings",value:this.settings}}))},s.prototype.optionsLogic=function(){this.$element.toggleClass("owl-center",this.settings.center),this.settings.loop&&this._items.length<this.settings.items&&(this.settings.loop=!1),this.settings.autoWidth&&(this.settings.stagePadding=!1,this.settings.merge=!1)},s.prototype.prepare=function(e){var i=this.trigger("prepare",{content:e});return i.data||(i.data=t("<"+this.settings.itemElement+"/>").addClass(this.settings.itemClass).append(e)),this.trigger("prepared",{content:i.data}),i.data},s.prototype.update=function(){for(var e=0,i=this._pipe.length,n=t.proxy(function(t){return this[t]},this._invalidated),s={};i>e;)(this._invalidated.all||t.grep(this._pipe[e].filter,n).length>0)&&this._pipe[e].run(s),e++;this._invalidated={}},s.prototype.width=function(t){switch(t=t||s.Width.Default){case s.Width.Inner:case s.Width.Outer:return this._width;default:return this._width-2*this.settings.stagePadding+this.settings.margin}},s.prototype.refresh=function(){if(0===this._items.length)return!1;(new Date).getTime();this.trigger("refresh"),this.setup(),this.optionsLogic(),this.$stage.addClass("owl-refresh"),this.update(),this.$stage.removeClass("owl-refresh"),this.state.orientation=e.orientation,this.watchVisibility(),this.trigger("refreshed")},s.prototype.eventsCall=function(){this.e._onDragStart=t.proxy(function(t){this.onDragStart(t)},this),this.e._onDragMove=t.proxy(function(t){this.onDragMove(t)},this),this.e._onDragEnd=t.proxy(function(t){this.onDragEnd(t)},this),this.e._onResize=t.proxy(function(t){this.onResize(t)},this),this.e._transitionEnd=t.proxy(function(t){this.transitionEnd(t)},this),this.e._preventClick=t.proxy(function(t){this.preventClick(t)},this)},s.prototype.onThrottledResize=function(){e.clearTimeout(this.resizeTimer),this.resizeTimer=e.setTimeout(this.e._onResize,this.settings.responsiveRefreshRate)},s.prototype.onResize=function(){return this._items.length?this._width===this.$element.width()?!1:this.trigger("resize").isDefaultPrevented()?!1:(this._width=this.$element.width(),this.invalidate("width"),this.refresh(),void this.trigger("resized")):!1},s.prototype.eventsRouter=function(t){var e=t.type;"mousedown"===e||"touchstart"===e?this.onDragStart(t):"mousemove"===e||"touchmove"===e?this.onDragMove(t):"mouseup"===e||"touchend"===e?this.onDragEnd(t):"touchcancel"===e&&this.onDragEnd(t)},s.prototype.internalEvents=function(){var i=(h(),c());this.settings.mouseDrag?(this.$stage.on("mousedown",t.proxy(function(t){this.eventsRouter(t)},this)),this.$stage.on("dragstart",function(){return!1}),this.$stage.get(0).onselectstart=function(){return!1}):this.$element.addClass("owl-text-select-on"),this.settings.touchDrag&&!i&&this.$stage.on("touchstart touchcancel",t.proxy(function(t){this.eventsRouter(t)},this)),this.transitionEndVendor&&this.on(this.$stage.get(0),this.transitionEndVendor,this.e._transitionEnd,!1),this.settings.responsive!==!1&&this.on(e,"resize",t.proxy(this.onThrottledResize,this))},s.prototype.onDragStart=function(n){var s,o,a,l;if(s=n.originalEvent||n||e.event,3===s.which||this.state.isTouch)return!1;if("mousedown"===s.type&&this.$stage.addClass("owl-grab"),this.trigger("drag"),this.drag.startTime=(new Date).getTime(),this.speed(0),this.state.isTouch=!0,this.state.isScrolling=!1,this.state.isSwiping=!1,this.drag.distance=0,o=r(s).x,a=r(s).y,this.drag.offsetX=this.$stage.position().left,this.drag.offsetY=this.$stage.position().top,this.settings.rtl&&(this.drag.offsetX=this.$stage.position().left+this.$stage.width()-this.width()+this.settings.margin),this.state.inMotion&&this.support3d)l=this.getTransformProperty(),this.drag.offsetX=l,this.animate(l),this.state.inMotion=!0;else if(this.state.inMotion&&!this.support3d)return this.state.inMotion=!1,!1;this.drag.startX=o-this.drag.offsetX,this.drag.startY=a-this.drag.offsetY,this.drag.start=o-this.drag.startX,this.drag.targetEl=s.target||s.srcElement,this.drag.updatedX=this.drag.start,("IMG"===this.drag.targetEl.tagName||"A"===this.drag.targetEl.tagName)&&(this.drag.targetEl.draggable=!1),t(i).on("mousemove.owl.dragEvents mouseup.owl.dragEvents touchmove.owl.dragEvents touchend.owl.dragEvents",t.proxy(function(t){this.eventsRouter(t)},this))},s.prototype.onDragMove=function(t){var i,s,o,a,l,u;this.state.isTouch&&(this.state.isScrolling||(i=t.originalEvent||t||e.event,s=r(i).x,o=r(i).y,this.drag.currentX=s-this.drag.startX,this.drag.currentY=o-this.drag.startY,this.drag.distance=this.drag.currentX-this.drag.offsetX,this.drag.distance<0?this.state.direction=this.settings.rtl?"right":"left":this.drag.distance>0&&(this.state.direction=this.settings.rtl?"left":"right"),this.settings.loop?this.op(this.drag.currentX,">",this.coordinates(this.minimum()))&&"right"===this.state.direction?this.drag.currentX-=(this.settings.center&&this.coordinates(0))-this.coordinates(this._items.length):this.op(this.drag.currentX,"<",this.coordinates(this.maximum()))&&"left"===this.state.direction&&(this.drag.currentX+=(this.settings.center&&this.coordinates(0))-this.coordinates(this._items.length)):(a=this.coordinates(this.settings.rtl?this.maximum():this.minimum()),l=this.coordinates(this.settings.rtl?this.minimum():this.maximum()),u=this.settings.pullDrag?this.drag.distance/5:0,this.drag.currentX=Math.max(Math.min(this.drag.currentX,a+u),l+u)),(this.drag.distance>8||this.drag.distance<-8)&&(i.preventDefault!==n?i.preventDefault():i.returnValue=!1,this.state.isSwiping=!0),this.drag.updatedX=this.drag.currentX,(this.drag.currentY>16||this.drag.currentY<-16)&&this.state.isSwiping===!1&&(this.state.isScrolling=!0,this.drag.updatedX=this.drag.start),this.animate(this.drag.updatedX)))},s.prototype.onDragEnd=function(e){var n,s,r;if(this.state.isTouch){if("mouseup"===e.type&&this.$stage.removeClass("owl-grab"),this.trigger("dragged"),this.drag.targetEl.removeAttribute("draggable"),this.state.isTouch=!1,this.state.isScrolling=!1,this.state.isSwiping=!1,0===this.drag.distance&&this.state.inMotion!==!0)return this.state.inMotion=!1,!1;this.drag.endTime=(new Date).getTime(),n=this.drag.endTime-this.drag.startTime,s=Math.abs(this.drag.distance),(s>3||n>300)&&this.removeClick(this.drag.targetEl),r=this.closest(this.drag.updatedX),this.speed(this.settings.dragEndSpeed||this.settings.smartSpeed),this.current(r),this.invalidate("position"),this.update(),this.settings.pullDrag||this.drag.updatedX!==this.coordinates(r)||this.transitionEnd(),this.drag.distance=0,t(i).off(".owl.dragEvents")}},s.prototype.removeClick=function(i){this.drag.targetEl=i,t(i).on("click.preventClick",this.e._preventClick),e.setTimeout(function(){t(i).off("click.preventClick")},300)},s.prototype.preventClick=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),t(e.target).off("click.preventClick")},s.prototype.getTransformProperty=function(){var t,i;return t=e.getComputedStyle(this.$stage.get(0),null).getPropertyValue(this.vendorName+"transform"),t=t.replace(/matrix(3d)?\(|\)/g,"").split(","),i=16===t.length,i!==!0?t[4]:t[12]},s.prototype.closest=function(e){var i=-1,n=30,s=this.width(),r=this.coordinates();return this.settings.freeDrag||t.each(r,t.proxy(function(t,o){return e>o-n&&o+n>e?i=t:this.op(e,"<",o)&&this.op(e,">",r[t+1]||o-s)&&(i="left"===this.state.direction?t+1:t),-1===i},this)),this.settings.loop||(this.op(e,">",r[this.minimum()])?i=e=this.minimum():this.op(e,"<",r[this.maximum()])&&(i=e=this.maximum())),i
},s.prototype.animate=function(e){this.trigger("translate"),this.state.inMotion=this.speed()>0,this.support3d?this.$stage.css({transform:"translate3d("+e+"px,0px, 0px)",transition:this.speed()/1e3+"s"}):this.state.isTouch?this.$stage.css({left:e+"px"}):this.$stage.animate({left:e},this.speed()/1e3,this.settings.fallbackEasing,t.proxy(function(){this.state.inMotion&&this.transitionEnd()},this))},s.prototype.current=function(t){if(t===n)return this._current;if(0===this._items.length)return n;if(t=this.normalize(t),this._current!==t){var e=this.trigger("change",{property:{name:"position",value:t}});e.data!==n&&(t=this.normalize(e.data)),this._current=t,this.invalidate("position"),this.trigger("changed",{property:{name:"position",value:this._current}})}return this._current},s.prototype.invalidate=function(t){this._invalidated[t]=!0},s.prototype.reset=function(t){t=this.normalize(t),t!==n&&(this._speed=0,this._current=t,this.suppress(["translate","translated"]),this.animate(this.coordinates(t)),this.release(["translate","translated"]))},s.prototype.normalize=function(e,i){var s=i?this._items.length:this._items.length+this._clones.length;return!t.isNumeric(e)||1>s?n:e=this._clones.length?(e%s+s)%s:Math.max(this.minimum(i),Math.min(this.maximum(i),e))},s.prototype.relative=function(t){return t=this.normalize(t),t-=this._clones.length/2,this.normalize(t,!0)},s.prototype.maximum=function(t){var e,i,n,s=0,r=this.settings;if(t)return this._items.length-1;if(!r.loop&&r.center)e=this._items.length-1;else if(r.loop||r.center)if(r.loop||r.center)e=this._items.length+r.items;else{if(!r.autoWidth&&!r.merge)throw"Can not detect maximum absolute position.";for(revert=r.rtl?1:-1,i=this.$stage.width()-this.$element.width();(n=this.coordinates(s))&&!(n*revert>=i);)e=++s}else e=this._items.length-r.items;return e},s.prototype.minimum=function(t){return t?0:this._clones.length/2},s.prototype.items=function(t){return t===n?this._items.slice():(t=this.normalize(t,!0),this._items[t])},s.prototype.mergers=function(t){return t===n?this._mergers.slice():(t=this.normalize(t,!0),this._mergers[t])},s.prototype.clones=function(e){var i=this._clones.length/2,s=i+this._items.length,r=function(t){return t%2===0?s+t/2:i-(t+1)/2};return e===n?t.map(this._clones,function(t,e){return r(e)}):t.map(this._clones,function(t,i){return t===e?r(i):null})},s.prototype.speed=function(t){return t!==n&&(this._speed=t),this._speed},s.prototype.coordinates=function(e){var i=null;return e===n?t.map(this._coordinates,t.proxy(function(t,e){return this.coordinates(e)},this)):(this.settings.center?(i=this._coordinates[e],i+=(this.width()-i+(this._coordinates[e-1]||0))/2*(this.settings.rtl?-1:1)):i=this._coordinates[e-1]||0,i)},s.prototype.duration=function(t,e,i){return Math.min(Math.max(Math.abs(e-t),1),6)*Math.abs(i||this.settings.smartSpeed)},s.prototype.to=function(i,n){if(this.settings.loop){var s=i-this.relative(this.current()),r=this.current(),o=this.current(),a=this.current()+s,l=0>o-a?!0:!1,u=this._clones.length+this._items.length;a<this.settings.items&&l===!1?(r=o+this._items.length,this.reset(r)):a>=u-this.settings.items&&l===!0&&(r=o-this._items.length,this.reset(r)),e.clearTimeout(this.e._goToLoop),this.e._goToLoop=e.setTimeout(t.proxy(function(){this.speed(this.duration(this.current(),r+s,n)),this.current(r+s),this.update()},this),30)}else this.speed(this.duration(this.current(),i,n)),this.current(i),this.update()},s.prototype.next=function(t){t=t||!1,this.to(this.relative(this.current())+1,t)},s.prototype.prev=function(t){t=t||!1,this.to(this.relative(this.current())-1,t)},s.prototype.transitionEnd=function(t){return t!==n&&(t.stopPropagation(),(t.target||t.srcElement||t.originalTarget)!==this.$stage.get(0))?!1:(this.state.inMotion=!1,void this.trigger("translated"))},s.prototype.viewport=function(){var n;if(this.options.responsiveBaseElement!==e)n=t(this.options.responsiveBaseElement).width();else if(e.innerWidth)n=e.innerWidth;else{if(!i.documentElement||!i.documentElement.clientWidth)throw"Can not detect viewport width.";n=i.documentElement.clientWidth}return n},s.prototype.replace=function(e){this.$stage.empty(),this._items=[],e&&(e=e instanceof jQuery?e:t(e)),this.settings.nestedItemSelector&&(e=e.find("."+this.settings.nestedItemSelector)),e.filter(function(){return 1===this.nodeType}).each(t.proxy(function(t,e){e=this.prepare(e),this.$stage.append(e),this._items.push(e),this._mergers.push(1*e.find("[data-merge]").andSelf("[data-merge]").attr("data-merge")||1)},this)),this.reset(t.isNumeric(this.settings.startPosition)?this.settings.startPosition:0),this.invalidate("items")},s.prototype.add=function(t,e){e=e===n?this._items.length:this.normalize(e,!0),this.trigger("add",{content:t,position:e}),0===this._items.length||e===this._items.length?(this.$stage.append(t),this._items.push(t),this._mergers.push(1*t.find("[data-merge]").andSelf("[data-merge]").attr("data-merge")||1)):(this._items[e].before(t),this._items.splice(e,0,t),this._mergers.splice(e,0,1*t.find("[data-merge]").andSelf("[data-merge]").attr("data-merge")||1)),this.invalidate("items"),this.trigger("added",{content:t,position:e})},s.prototype.remove=function(t){t=this.normalize(t,!0),t!==n&&(this.trigger("remove",{content:this._items[t],position:t}),this._items[t].remove(),this._items.splice(t,1),this._mergers.splice(t,1),this.invalidate("items"),this.trigger("removed",{content:null,position:t}))},s.prototype.addTriggerableEvents=function(){var e=t.proxy(function(e,i){return t.proxy(function(t){t.relatedTarget!==this&&(this.suppress([i]),e.apply(this,[].slice.call(arguments,1)),this.release([i]))},this)},this);t.each({next:this.next,prev:this.prev,to:this.to,destroy:this.destroy,refresh:this.refresh,replace:this.replace,add:this.add,remove:this.remove},t.proxy(function(t,i){this.$element.on(t+".owl.carousel",e(i,t+".owl.carousel"))},this))},s.prototype.watchVisibility=function(){function i(t){return t.offsetWidth>0&&t.offsetHeight>0}function n(){i(this.$element.get(0))&&(this.$element.removeClass("owl-hidden"),this.refresh(),e.clearInterval(this.e._checkVisibile))}i(this.$element.get(0))||(this.$element.addClass("owl-hidden"),e.clearInterval(this.e._checkVisibile),this.e._checkVisibile=e.setInterval(t.proxy(n,this),500))},s.prototype.preloadAutoWidthImages=function(e){var i,n,s,r;i=0,n=this,e.each(function(o,a){s=t(a),r=new Image,r.onload=function(){i++,s.attr("src",r.src),s.css("opacity",1),i>=e.length&&(n.state.imagesLoaded=!0,n.initialize())},r.src=s.attr("src")||s.attr("data-src")||s.attr("data-src-retina")})},s.prototype.destroy=function(){this.$element.hasClass(this.settings.themeClass)&&this.$element.removeClass(this.settings.themeClass),this.settings.responsive!==!1&&t(e).off("resize.owl.carousel"),this.transitionEndVendor&&this.off(this.$stage.get(0),this.transitionEndVendor,this.e._transitionEnd);for(var n in this._plugins)this._plugins[n].destroy();(this.settings.mouseDrag||this.settings.touchDrag)&&(this.$stage.off("mousedown touchstart touchcancel"),t(i).off(".owl.dragEvents"),this.$stage.get(0).onselectstart=function(){},this.$stage.off("dragstart",function(){return!1})),this.$element.off(".owl"),this.$stage.children(".cloned").remove(),this.e=null,this.$element.removeData("owlCarousel"),this.$stage.children().contents().unwrap(),this.$stage.children().unwrap(),this.$stage.unwrap()},s.prototype.op=function(t,e,i){var n=this.settings.rtl;switch(e){case"<":return n?t>i:i>t;case">":return n?i>t:t>i;case">=":return n?i>=t:t>=i;case"<=":return n?t>=i:i>=t}},s.prototype.on=function(t,e,i,n){t.addEventListener?t.addEventListener(e,i,n):t.attachEvent&&t.attachEvent("on"+e,i)},s.prototype.off=function(t,e,i,n){t.removeEventListener?t.removeEventListener(e,i,n):t.detachEvent&&t.detachEvent("on"+e,i)},s.prototype.trigger=function(e,i,n){var s={item:{count:this._items.length,index:this.current()}},r=t.camelCase(t.grep(["on",e,n],function(t){return t}).join("-").toLowerCase()),o=t.Event([e,"owl",n||"carousel"].join(".").toLowerCase(),t.extend({relatedTarget:this},s,i));return this._supress[e]||(t.each(this._plugins,function(t,e){e.onTrigger&&e.onTrigger(o)}),this.$element.trigger(o),this.settings&&"function"==typeof this.settings[r]&&this.settings[r].apply(this,o)),o},s.prototype.suppress=function(e){t.each(e,t.proxy(function(t,e){this._supress[e]=!0},this))},s.prototype.release=function(e){t.each(e,t.proxy(function(t,e){delete this._supress[e]},this))},s.prototype.browserSupport=function(){if(this.support3d=u(),this.support3d){this.transformVendor=l();var t=["transitionend","webkitTransitionEnd","transitionend","oTransitionEnd"];this.transitionEndVendor=t[a()],this.vendorName=this.transformVendor.replace(/Transform/i,""),this.vendorName=""!==this.vendorName?"-"+this.vendorName.toLowerCase()+"-":""}this.state.orientation=e.orientation},t.fn.owlCarousel=function(e){return this.each(function(){t(this).data("owlCarousel")||t(this).data("owlCarousel",new s(this,e))})},t.fn.owlCarousel.Constructor=s}(window.Zepto||window.jQuery,window,document),function(t,e){var i=function(e){this._core=e,this._loaded=[],this._handlers={"initialized.owl.carousel change.owl.carousel":t.proxy(function(e){if(e.namespace&&this._core.settings&&this._core.settings.lazyLoad&&(e.property&&"position"==e.property.name||"initialized"==e.type))for(var i=this._core.settings,n=i.center&&Math.ceil(i.items/2)||i.items,s=i.center&&-1*n||0,r=(e.property&&e.property.value||this._core.current())+s,o=this._core.clones().length,a=t.proxy(function(t,e){this.load(e)},this);s++<n;)this.load(o/2+this._core.relative(r)),o&&t.each(this._core.clones(this._core.relative(r++)),a)},this)},this._core.options=t.extend({},i.Defaults,this._core.options),this._core.$element.on(this._handlers)};i.Defaults={lazyLoad:!1},i.prototype.load=function(i){var n=this._core.$stage.children().eq(i),s=n&&n.find(".owl-lazy");!s||t.inArray(n.get(0),this._loaded)>-1||(s.each(t.proxy(function(i,n){var s,r=t(n),o=e.devicePixelRatio>1&&r.attr("data-src-retina")||r.attr("data-src");this._core.trigger("load",{element:r,url:o},"lazy"),r.is("img")?r.one("load.owl.lazy",t.proxy(function(){r.css("opacity",1),this._core.trigger("loaded",{element:r,url:o},"lazy")},this)).attr("src",o):(s=new Image,s.onload=t.proxy(function(){r.css({"background-image":"url("+o+")",opacity:"1"}),this._core.trigger("loaded",{element:r,url:o},"lazy")},this),s.src=o)},this)),this._loaded.push(n.get(0)))},i.prototype.destroy=function(){var t,e;for(t in this.handlers)this._core.$element.off(t,this.handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},t.fn.owlCarousel.Constructor.Plugins.Lazy=i}(window.Zepto||window.jQuery,window,document),function(t){var e=function(i){this._core=i,this._handlers={"initialized.owl.carousel":t.proxy(function(){this._core.settings.autoHeight&&this.update()},this),"changed.owl.carousel":t.proxy(function(t){this._core.settings.autoHeight&&"position"==t.property.name&&this.update()},this),"loaded.owl.lazy":t.proxy(function(t){this._core.settings.autoHeight&&t.element.closest("."+this._core.settings.itemClass)===this._core.$stage.children().eq(this._core.current())&&this.update()},this)},this._core.options=t.extend({},e.Defaults,this._core.options),this._core.$element.on(this._handlers)};e.Defaults={autoHeight:!1,autoHeightClass:"owl-height"},e.prototype.update=function(){this._core.$stage.parent().height(this._core.$stage.children().eq(this._core.current()).height()).addClass(this._core.settings.autoHeightClass)},e.prototype.destroy=function(){var t,e;for(t in this._handlers)this._core.$element.off(t,this._handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},t.fn.owlCarousel.Constructor.Plugins.AutoHeight=e}(window.Zepto||window.jQuery,window,document),function(t,e,i){var n=function(e){this._core=e,this._videos={},this._playing=null,this._fullscreen=!1,this._handlers={"resize.owl.carousel":t.proxy(function(t){this._core.settings.video&&!this.isInFullScreen()&&t.preventDefault()},this),"refresh.owl.carousel changed.owl.carousel":t.proxy(function(){this._playing&&this.stop()},this),"prepared.owl.carousel":t.proxy(function(e){var i=t(e.content).find(".owl-video");i.length&&(i.css("display","none"),this.fetch(i,t(e.content)))},this)},this._core.options=t.extend({},n.Defaults,this._core.options),this._core.$element.on(this._handlers),this._core.$element.on("click.owl.video",".owl-video-play-icon",t.proxy(function(t){this.play(t)},this))};n.Defaults={video:!1,videoHeight:!1,videoWidth:!1},n.prototype.fetch=function(t,e){var i=t.attr("data-vimeo-id")?"vimeo":"youtube",n=t.attr("data-vimeo-id")||t.attr("data-youtube-id"),s=t.attr("data-width")||this._core.settings.videoWidth,r=t.attr("data-height")||this._core.settings.videoHeight,o=t.attr("href");if(!o)throw new Error("Missing video URL.");if(n=o.match(/(http:|https:|)\/\/(player.|www.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com))\/(video\/|embed\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/),n[3].indexOf("youtu")>-1)i="youtube";else{if(!(n[3].indexOf("vimeo")>-1))throw new Error("Video URL not supported.");i="vimeo"}n=n[6],this._videos[o]={type:i,id:n,width:s,height:r},e.attr("data-video",o),this.thumbnail(t,this._videos[o])},n.prototype.thumbnail=function(e,i){var n,s,r,o=i.width&&i.height?'style="width:'+i.width+"px;height:"+i.height+'px;"':"",a=e.find("img"),l="src",u="",h=this._core.settings,c=function(t){s='<div class="owl-video-play-icon"></div>',n=h.lazyLoad?'<div class="owl-video-tn '+u+'" '+l+'="'+t+'"></div>':'<div class="owl-video-tn" style="opacity:1;background-image:url('+t+')"></div>',e.after(n),e.after(s)};return e.wrap('<div class="owl-video-wrapper"'+o+"></div>"),this._core.settings.lazyLoad&&(l="data-src",u="owl-lazy"),a.length?(c(a.attr(l)),a.remove(),!1):void("youtube"===i.type?(r="http://img.youtube.com/vi/"+i.id+"/hqdefault.jpg",c(r)):"vimeo"===i.type&&t.ajax({type:"GET",url:"http://vimeo.com/api/v2/video/"+i.id+".json",jsonp:"callback",dataType:"jsonp",success:function(t){r=t[0].thumbnail_large,c(r)}}))},n.prototype.stop=function(){this._core.trigger("stop",null,"video"),this._playing.find(".owl-video-frame").remove(),this._playing.removeClass("owl-video-playing"),this._playing=null},n.prototype.play=function(e){this._core.trigger("play",null,"video"),this._playing&&this.stop();var i,n,s=t(e.target||e.srcElement),r=s.closest("."+this._core.settings.itemClass),o=this._videos[r.attr("data-video")],a=o.width||"100%",l=o.height||this._core.$stage.height();"youtube"===o.type?i='<iframe width="'+a+'" height="'+l+'" src="http://www.youtube.com/embed/'+o.id+"?autoplay=1&v="+o.id+'" frameborder="0" allowfullscreen></iframe>':"vimeo"===o.type&&(i='<iframe src="http://player.vimeo.com/video/'+o.id+'?autoplay=1" width="'+a+'" height="'+l+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>'),r.addClass("owl-video-playing"),this._playing=r,n=t('<div style="height:'+l+"px; width:"+a+'px" class="owl-video-frame">'+i+"</div>"),s.after(n)},n.prototype.isInFullScreen=function(){var n=i.fullscreenElement||i.mozFullScreenElement||i.webkitFullscreenElement;return n&&t(n).parent().hasClass("owl-video-frame")&&(this._core.speed(0),this._fullscreen=!0),n&&this._fullscreen&&this._playing?!1:this._fullscreen?(this._fullscreen=!1,!1):this._playing&&this._core.state.orientation!==e.orientation?(this._core.state.orientation=e.orientation,!1):!0},n.prototype.destroy=function(){var t,e;this._core.$element.off("click.owl.video");for(t in this._handlers)this._core.$element.off(t,this._handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},t.fn.owlCarousel.Constructor.Plugins.Video=n}(window.Zepto||window.jQuery,window,document),function(t,e,i,n){var s=function(e){this.core=e,this.core.options=t.extend({},s.Defaults,this.core.options),this.swapping=!0,this.previous=n,this.next=n,this.handlers={"change.owl.carousel":t.proxy(function(t){"position"==t.property.name&&(this.previous=this.core.current(),this.next=t.property.value)},this),"drag.owl.carousel dragged.owl.carousel translated.owl.carousel":t.proxy(function(t){this.swapping="translated"==t.type},this),"translate.owl.carousel":t.proxy(function(){this.swapping&&(this.core.options.animateOut||this.core.options.animateIn)&&this.swap()},this)},this.core.$element.on(this.handlers)};s.Defaults={animateOut:!1,animateIn:!1},s.prototype.swap=function(){if(1===this.core.settings.items&&this.core.support3d){this.core.speed(0);var e,i=t.proxy(this.clear,this),n=this.core.$stage.children().eq(this.previous),s=this.core.$stage.children().eq(this.next),r=this.core.settings.animateIn,o=this.core.settings.animateOut;this.core.current()!==this.previous&&(o&&(e=this.core.coordinates(this.previous)-this.core.coordinates(this.next),n.css({left:e+"px"}).addClass("animated owl-animated-out").addClass(o).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",i)),r&&s.addClass("animated owl-animated-in").addClass(r).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",i))}},s.prototype.clear=function(e){t(e.target).css({left:""}).removeClass("animated owl-animated-out owl-animated-in").removeClass(this.core.settings.animateIn).removeClass(this.core.settings.animateOut),this.core.transitionEnd()},s.prototype.destroy=function(){var t,e;for(t in this.handlers)this.core.$element.off(t,this.handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},t.fn.owlCarousel.Constructor.Plugins.Animate=s}(window.Zepto||window.jQuery,window,document),function(t,e,i){var n=function(e){this.core=e,this.core.options=t.extend({},n.Defaults,this.core.options),this.handlers={"translated.owl.carousel refreshed.owl.carousel":t.proxy(function(){this.autoplay()},this),"play.owl.autoplay":t.proxy(function(t,e,i){this.play(e,i)},this),"stop.owl.autoplay":t.proxy(function(){this.stop()},this),"mouseover.owl.autoplay":t.proxy(function(){this.core.settings.autoplayHoverPause&&this.pause()},this),"mouseleave.owl.autoplay":t.proxy(function(){this.core.settings.autoplayHoverPause&&this.autoplay()},this)},this.core.$element.on(this.handlers)};n.Defaults={autoplay:!1,autoplayTimeout:5e3,autoplayHoverPause:!1,autoplaySpeed:!1},n.prototype.autoplay=function(){this.core.settings.autoplay&&!this.core.state.videoPlay?(e.clearInterval(this.interval),this.interval=e.setInterval(t.proxy(function(){this.play()},this),this.core.settings.autoplayTimeout)):e.clearInterval(this.interval)},n.prototype.play=function(){return i.hidden===!0||this.core.state.isTouch||this.core.state.isScrolling||this.core.state.isSwiping||this.core.state.inMotion?void 0:this.core.settings.autoplay===!1?void e.clearInterval(this.interval):void this.core.next(this.core.settings.autoplaySpeed)},n.prototype.stop=function(){e.clearInterval(this.interval)},n.prototype.pause=function(){e.clearInterval(this.interval)},n.prototype.destroy=function(){var t,i;e.clearInterval(this.interval);for(t in this.handlers)this.core.$element.off(t,this.handlers[t]);for(i in Object.getOwnPropertyNames(this))"function"!=typeof this[i]&&(this[i]=null)},t.fn.owlCarousel.Constructor.Plugins.autoplay=n}(window.Zepto||window.jQuery,window,document),function(t){"use strict";var e=function(i){this._core=i,this._initialized=!1,this._pages=[],this._controls={},this._templates=[],this.$element=this._core.$element,this._overrides={next:this._core.next,prev:this._core.prev,to:this._core.to},this._handlers={"prepared.owl.carousel":t.proxy(function(e){this._core.settings.dotsData&&this._templates.push(t(e.content).find("[data-dot]").andSelf("[data-dot]").attr("data-dot"))},this),"add.owl.carousel":t.proxy(function(e){this._core.settings.dotsData&&this._templates.splice(e.position,0,t(e.content).find("[data-dot]").andSelf("[data-dot]").attr("data-dot"))},this),"remove.owl.carousel prepared.owl.carousel":t.proxy(function(t){this._core.settings.dotsData&&this._templates.splice(t.position,1)},this),"change.owl.carousel":t.proxy(function(t){if("position"==t.property.name&&!this._core.state.revert&&!this._core.settings.loop&&this._core.settings.navRewind){var e=this._core.current(),i=this._core.maximum(),n=this._core.minimum();t.data=t.property.value>i?e>=i?n:i:t.property.value<n?i:t.property.value}},this),"changed.owl.carousel":t.proxy(function(t){"position"==t.property.name&&this.draw()},this),"refreshed.owl.carousel":t.proxy(function(){this._initialized||(this.initialize(),this._initialized=!0),this._core.trigger("refresh",null,"navigation"),this.update(),this.draw(),this._core.trigger("refreshed",null,"navigation")},this)},this._core.options=t.extend({},e.Defaults,this._core.options),this.$element.on(this._handlers)};e.Defaults={nav:!1,navRewind:!0,navText:["prev","next"],navSpeed:!1,navElement:"div",navContainer:!1,navContainerClass:"owl-nav",navClass:["owl-prev","owl-next"],slideBy:1,dotClass:"owl-dot",dotsClass:"owl-dots",dots:!0,dotsEach:!1,dotData:!1,dotsSpeed:!1,dotsContainer:!1,controlsClass:"owl-controls"},e.prototype.initialize=function(){var e,i,n=this._core.settings;n.dotsData||(this._templates=[t("<div>").addClass(n.dotClass).append(t("<span>")).prop("outerHTML")]),n.navContainer&&n.dotsContainer||(this._controls.$container=t("<div>").addClass(n.controlsClass).appendTo(this.$element)),this._controls.$indicators=n.dotsContainer?t(n.dotsContainer):t("<div>").hide().addClass(n.dotsClass).appendTo(this._controls.$container),this._controls.$indicators.on("click","div",t.proxy(function(e){var i=t(e.target).parent().is(this._controls.$indicators)?t(e.target).index():t(e.target).parent().index();e.preventDefault(),this.to(i,n.dotsSpeed)},this)),e=n.navContainer?t(n.navContainer):t("<div>").addClass(n.navContainerClass).prependTo(this._controls.$container),this._controls.$next=t("<"+n.navElement+">"),this._controls.$previous=this._controls.$next.clone(),this._controls.$previous.addClass(n.navClass[0]).html(n.navText[0]).hide().prependTo(e).on("click",t.proxy(function(){this.prev(n.navSpeed)},this)),this._controls.$next.addClass(n.navClass[1]).html(n.navText[1]).hide().appendTo(e).on("click",t.proxy(function(){this.next(n.navSpeed)},this));for(i in this._overrides)this._core[i]=t.proxy(this[i],this)},e.prototype.destroy=function(){var t,e,i,n;for(t in this._handlers)this.$element.off(t,this._handlers[t]);for(e in this._controls)this._controls[e].remove();for(n in this.overides)this._core[n]=this._overrides[n];for(i in Object.getOwnPropertyNames(this))"function"!=typeof this[i]&&(this[i]=null)},e.prototype.update=function(){var t,e,i,n=this._core.settings,s=this._core.clones().length/2,r=s+this._core.items().length,o=n.center||n.autoWidth||n.dotData?1:n.dotsEach||n.items;if("page"!==n.slideBy&&(n.slideBy=Math.min(n.slideBy,n.items)),n.dots||"page"==n.slideBy)for(this._pages=[],t=s,e=0,i=0;r>t;t++)(e>=o||0===e)&&(this._pages.push({start:t-s,end:t-s+o-1}),e=0,++i),e+=this._core.mergers(this._core.relative(t))},e.prototype.draw=function(){var e,i,n="",s=this._core.settings,r=(this._core.$stage.children(),this._core.relative(this._core.current()));if(!s.nav||s.loop||s.navRewind||(this._controls.$previous.toggleClass("disabled",0>=r),this._controls.$next.toggleClass("disabled",r>=this._core.maximum())),this._controls.$previous.toggle(s.nav),this._controls.$next.toggle(s.nav),s.dots){if(e=this._pages.length-this._controls.$indicators.children().length,s.dotData&&0!==e){for(i=0;i<this._controls.$indicators.children().length;i++)n+=this._templates[this._core.relative(i)];this._controls.$indicators.html(n)}else e>0?(n=new Array(e+1).join(this._templates[0]),this._controls.$indicators.append(n)):0>e&&this._controls.$indicators.children().slice(e).remove();this._controls.$indicators.find(".active").removeClass("active"),this._controls.$indicators.children().eq(t.inArray(this.current(),this._pages)).addClass("active")}this._controls.$indicators.toggle(s.dots)},e.prototype.onTrigger=function(e){var i=this._core.settings;e.page={index:t.inArray(this.current(),this._pages),count:this._pages.length,size:i&&(i.center||i.autoWidth||i.dotData?1:i.dotsEach||i.items)}},e.prototype.current=function(){var e=this._core.relative(this._core.current());return t.grep(this._pages,function(t){return t.start<=e&&t.end>=e}).pop()},e.prototype.getPosition=function(e){var i,n,s=this._core.settings;return"page"==s.slideBy?(i=t.inArray(this.current(),this._pages),n=this._pages.length,e?++i:--i,i=this._pages[(i%n+n)%n].start):(i=this._core.relative(this._core.current()),n=this._core.items().length,e?i+=s.slideBy:i-=s.slideBy),i},e.prototype.next=function(e){t.proxy(this._overrides.to,this._core)(this.getPosition(!0),e)},e.prototype.prev=function(e){t.proxy(this._overrides.to,this._core)(this.getPosition(!1),e)},e.prototype.to=function(e,i,n){var s;n?t.proxy(this._overrides.to,this._core)(e,i):(s=this._pages.length,t.proxy(this._overrides.to,this._core)(this._pages[(e%s+s)%s].start,i))},t.fn.owlCarousel.Constructor.Plugins.Navigation=e}(window.Zepto||window.jQuery,window,document),function(t,e){"use strict";var i=function(n){this._core=n,this._hashes={},this.$element=this._core.$element,this._handlers={"initialized.owl.carousel":t.proxy(function(){"URLHash"==this._core.settings.startPosition&&t(e).trigger("hashchange.owl.navigation")},this),"prepared.owl.carousel":t.proxy(function(e){var i=t(e.content).find("[data-hash]").andSelf("[data-hash]").attr("data-hash");this._hashes[i]=e.content},this)},this._core.options=t.extend({},i.Defaults,this._core.options),this.$element.on(this._handlers),t(e).on("hashchange.owl.navigation",t.proxy(function(){var t=e.location.hash.substring(1),i=this._core.$stage.children(),n=this._hashes[t]&&i.index(this._hashes[t])||0;return t?void this._core.to(n,!1,!0):!1},this))};i.Defaults={URLhashListener:!1},i.prototype.destroy=function(){var i,n;t(e).off("hashchange.owl.navigation");for(i in this._handlers)this._core.$element.off(i,this._handlers[i]);for(n in Object.getOwnPropertyNames(this))"function"!=typeof this[n]&&(this[n]=null)},t.fn.owlCarousel.Constructor.Plugins.Hash=i}(window.Zepto||window.jQuery,window,document),function(t,e,i,n){"use strict";function s(i,n){var s=this;this.element=i,this.$ubermenu=t(this.element),this.orientation=this.$ubermenu.hasClass("ubermenu-vertical")?"v":"h",this.settings=t.extend({},h,n),this._defaults=h,this._name=u,this.settings.debug&&this.settings.debug_onscreen&&(t("body").append('<div id="uber-onscreen-debug" style="color:#eee;z-index:10000;background:#222;position:fixed;left:0; bottom:0; width:100%; height:50%; padding:10px;overflow:scroll;"> '),this.debug_target=t("#uber-onscreen-debug"),this.debug_target.on("click",function(){t(this).height(t(this).height()<100?"50%":"50px")})),this.log("-- START UBERMENU DEBUG --"),this.events_disabled=!1,this.suppress_clicks=!1,this.touchenabled="ontouchstart"in e||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,this.$ubermenu.addClass(this.touchenabled?"ubermenu-touch":"ubermenu-notouch"),e.navigator.pointerEnabled?(this.touchStart="pointerdown",this.touchEnd="pointerup",this.touchMove="pointermove",this.suppress_clicks=!0):e.navigator.msPointerEnabled?(this.touchStart="MSPointerDown",this.touchEnd="MSPointerUp",this.touchMove="MSPointerMove",this.suppress_clicks=!0):(this.touchStart="touchstart",this.touchEnd="touchend",this.touchMove="touchmove"),this.toggleevent="touchend"==this.touchEnd?this.touchEnd+" click":this.touchEnd,this.transitionend="transitionend.ubermenu webkitTransitionEnd.ubermenu msTransitionEnd.ubermenu oTransitionEnd.ubermenu",this.transitions=uber_supports("transition")&&!this.$ubermenu.hasClass("ubermenu-transition-none"),this.transitions||this.$ubermenu.addClass("ubermenu-no-transitions");var r=navigator.userAgent.toLowerCase();this.log(r),this.allow_trigger_overrides=!0,this.noTouchEnd=!1;var o=this.settings.android=/android/.test(r),a=this.settings.windowsmobile=/iemobile/.test(r);(o||a)&&(o&&!(/chrome/.test(r)||/firefox/.test(r)||/opera/.test(r))||a)&&(this.settings.touchOffClose=!1,this.disableTransitions(),o&&(this.$ubermenu.removeClass("ubermenu-trigger-hover_intent").removeClass("ubermenu-trigger-hover").addClass("ubermenu-trigger-click"),this.settings.touchEvents=!1,this.allow_trigger_overrides=!1)),a&&(this.log("disable touchoff close and accessibility"),this.settings.touchOffClose=!1,this.settings.accessible=!1,this.settings.mouseEvents=!1);var l=!/chrome/.test(r)&&/safari/.test(r)&&/version\/5/.test(r);l&&this.disableTransitions(),this.last_width=t(e).width();var c=this.last_width,d=s.$ubermenu.find(".ubermenu-item-level-0.ubermenu-align-right");d.size()&&t(e).ubersmartresize(function(){c=t(e).width(),s.last_width<=s.settings.breakpoint&&c>=s.settings.breakpoint&&(d.hide(),d[0].offsetHeight,d.show()),s.last_width=c}),this.settings.clicktest&&(this.touchEnd="click"),this.init()}var r,o,a,l,u="ubermenu",h={breakpoint:uber_op("responsive_breakpoint",{datatype:"numeric"},959),touchEvents:!0,mouseEvents:!0,retractors:!0,touchOffClose:!0,moveThreshold:10,submenuAnimationDuration:500,ignoreDummies:!0,clicktest:!1,windowstest:!1,debug:!1,debug_onscreen:!1,remove_conflicts:uber_op("remove_conflicts",{datatype:"boolean"},!0),reposition_on_load:uber_op("reposition_on_load",{datatype:"boolean"},!1),accessible:uber_op("accessible",{datatype:"boolean"},!0),retractor_display_strategy:uber_op("retractor_display_strategy",{datatype:"string"},"responsive"),intent_delay:uber_op("intent_delay",{datatype:"numeric"},300),intent_interval:uber_op("intent_interval",{datatype:"numeric"},100),intent_threshold:uber_op("intent_threshold",{datatype:"numeric"},300),scrollto_offset:uber_op("scrollto_offset",{datatype:"numeric"},0)};s.prototype={init:function(){this.log("Initializing UberMenu"),this.$ubermenu.removeClass("ubermenu-nojs"),this.removeConflicts(),this.initializeSubmenuToggleTouchEvents(),this.initializeSubmenuToggleMouseEvents(),this.initializeRetractors(),this.initializeResponsiveToggle(),this.initializeTouchoffClose(),this.initializeTabs(),this.initializeSubmenuPositioning(),this.initializeSegmentCurrentStates(),this.initializeAccessibilityOnTab(),this.initializeImageLazyLoad()},removeConflicts:function(){this.settings.remove_conflicts&&this.$ubermenu.find(".ubermenu-item, .ubermenu-target, .ubermenu-submenu").add(this.$ubermenu).removeAttr("style").unbind().off()},initializeAccessibilityOnTab:function(){if(this.settings.accessible){var e=this;t("body").on("keydown.ubermenu",function(i){var n=i.keyCode||i.which;9==n&&(t("body").off("keydown.ubermenu"),e.initializeAccessibility())})}},initializeImageLazyLoad:function(){t(".ubermenu-item-level-0").one("ubermenuopen",function(){t(this).find(".ubermenu-image-lazyload").each(function(){t(this).attr("src",t(this).data("src")).removeClass("ubermenu-image-lazyload")})})},initializeAccessibility:function(){var e=this,i=".ubermenu-target, a, input, select, textarea";e.$current_focus=!1,e.mousedown=!1,e.$ubermenu.addClass("ubermenu-accessible"),e.$ubermenu.on("focus",i,function(){if(!e.mousedown){var n=t(this);e.$current_focus=n;var s=n.parent(".ubermenu-item");s.size()&&(s.is(".ubermenu-item-level-0")&&e.closeAllSubmenus(),s.is(".ubermenu-has-submenu-drop")&&setTimeout(function(){n.is(":focus")&&(s.siblings(".ubermenu-has-submenu-drop").each(function(){e.closeSubmenu(t(this),"umac",e)}),e.openSubmenu(s,"umac",e))},500),n.on("blur.ubermenu",i,function(){e.mousedown||(e.$current_focus=!1,t(this).off("blur.ubermenu"),setTimeout(function(){e.$current_focus||e.closeAllSubmenus()},500)),e.mousedown=!1}))}e.mousedown=!1}),e.$ubermenu.on("mousedown",function(){e.mousedown=!0,setTimeout(function(){e.mousedown=!1},100)})},initializeSubmenuPositioning:function(){var i=this;i.positionSubmenus(),t(e).ubersmartresize(function(){i.positionSubmenus()}),this.settings.reposition_on_load&&t(e).load(function(){i.positionSubmenus()})},initializeSubmenuToggleTouchEvents:function(){if(this.settings.touchEvents){var t=this;
this.$ubermenu.on(this.touchStart,".ubermenu-target",function(e){t.handleTouchInteraction(e,this,t)}),this.$ubermenu.on("click",".ubermenu-has-submenu-drop > .ubermenu-target, .ubermenu-tab.ubermenu-item-has-children > .ubermenu-target",function(e){t.handleClicks(e,this,t)})}},initializeSubmenuToggleMouseEvents:function(e){if(e=e||this,e.settings.mouseEvents&&!e.settings.clicktest&&!e.settings.windowstest){e.log("initializeSubmenuToggleMouseEvents");var i="",n="hover";e.$ubermenu.hasClass("ubermenu-trigger-click")?n="click":e.$ubermenu.hasClass("ubermenu-trigger-hover_intent")&&(n="hover_intent"),"click"==n?this.suppress_clicks||(i="click.ubermenu-submenu-toggle",this.$ubermenu.on(i,".ubermenu-item.ubermenu-has-submenu-drop:not([data-ubermenu-trigger]) > .ubermenu-target",function(t){e.handleMouseClick(t,this,e)}),this.$ubermenu.on("click.ubermenu-click-target",".ubermenu-item:not(.ubermenu-has-submenu-drop):not([data-ubermenu-trigger]) > .ubermenu-target",function(t){e.handleLink(t,this,e)})):"hover_intent"==n?(i="mouseenter.mouse_intent",this.$ubermenu.on(i,".ubermenu-item.ubermenu-has-submenu-drop:not([data-ubermenu-trigger])",function(t){e.handleMouseIntent(t,this,e)}),this.$ubermenu.on("click.ubermenu-click-target",".ubermenu-item:not([data-ubermenu-trigger]) > .ubermenu-target",function(t){e.handleLink(t,this,e)})):(i="mouseenter.ubermenu-submenu-toggle",this.$ubermenu.on(i,".ubermenu-item.ubermenu-has-submenu-drop:not([data-ubermenu-trigger]) > .ubermenu-target",function(t){e.handleMouseover(t,this,e)}),this.$ubermenu.on("click.ubermenu-click-target",".ubermenu-item:not([data-ubermenu-trigger]) > .ubermenu-target",function(t){e.handleLink(t,this,e)})),this.allow_trigger_overrides?e.$ubermenu.find(".ubermenu-item[data-ubermenu-trigger]").each(function(){var i=t(this);n=i.data("ubermenu-trigger"),"click"==n?this.suppress_clicks||i.on("click.ubermenu-submenu-toggle",".ubermenu-target",function(t){e.handleMouseClick(t,this,e)}):"hover_intent"==n?i.on("mouseenter.mouse_intent",function(t){e.handleMouseIntent(t,this,e)}):i.on("mouseenter.ubermenu-submenu-toggle",".ubermenu-target",function(t){e.handleMouseover(t,this,e)})}):e.$ubermenu.find(".ubermenu-tab").on("click.ubermenu-submenu-toggle",".ubermenu-target",function(t){e.handleMouseClick(t,this,e)})}},disableSubmenuToggleMouseEvents:function(){this.log("disableSubmenuToggleMouseEvents"),this.events_disabled=!0},reenableSubmenuToggleMouseEvents:function(t){t=t||this,t.log("reenableSubmenuToggleMouseEvents"),t.events_disabled=!1},initializeRetractors:function(){if(this.settings.retractors){var t=this;this.$ubermenu.on("click",".ubermenu-retractor",function(e){t.handleSubmenuRetractorEnd(e,this,t)}),this.settings.touchEvents&&this.$ubermenu.on(this.touchStart,".ubermenu-retractor",function(e){t.handleSubmenuRetractorStart(e,this,t)}),this.touchenabled||"touch"!=t.settings.retractor_display_strategy||(this.$ubermenu.find(".ubermenu-retractor-mobile").remove(),this.$ubermenu.find(".ubermenu-submenu-retractor-top").removeClass("ubermenu-submenu-retractor-top").removeClass("ubermenu-submenu-retractor-top-2"))}},initializeResponsiveToggle:function(){var e=this,n=".ubermenu-responsive-toggle[data-ubermenu-target="+e.$ubermenu.attr("id")+"], .ubermenu-responsive-toggle[data-ubermenu-target=_any_]";e.log("initializeResponsiveToggle "+this.toggleevent),t(i).on(this.toggleevent,n,function(t){e.handleResponsiveToggle(t,this,e)})},initializeTouchoffClose:function(){if(this.settings.touchOffClose){var e=this;t(i).on(this.touchEnd+".ubermenu_touchoff",function(t){e.handleTouchoffClose(t,this,e)}),this.suppress_clicks||t(i).on("mouseup.ubermenu_clickoff",function(t){e.handleTouchoffClose(t,this,e)})}},initializeTabs:function(){var i=this;i.$tab_blocks=i.$ubermenu.find(".ubermenu-tabs"),i.$tab_blocks=t(i.$tab_blocks.get().reverse()),t(e).load(function(){i.sizeTabs()}),t(e).ubersmartresize(function(){i.$ubermenu.find(".ubermenu-tabs , .ubermenu-tab-content-panel , .ubermenu-tabs-group").css("min-height",""),i.sizeTabs()}),i.$ubermenu.find(".ubermenu-item-level-0.ubermenu-has-submenu-drop").on("ubermenuopen.sizetabs",function(){t(this).off("ubermenuopen.sizetabs"),i.sizeTabs()}),i.$ubermenu.find(".ubermenu-tabs-show-default > .ubermenu-tabs-group").each(function(){i.openSubmenu(t(this).find("> .ubermenu-tab").first(),"tab default",i)})},sizeTabs:function(){var i=this,n=t(e).width()<i.settings.breakpoint?!0:!1;i.$tab_blocks.each(function(){var e=!1;!t(this).hasClass("ubermenu-tab-layout-top")&&!t(this).hasClass("ubermenu-tab-layout-bottom")||n||(e=!0);var i,s=0;i=n?t(this).parentsUntil(".ubermenu").add(t(this).parents(".ubermenu")):t(this).parentsUntil(".ubermenu-item-level-0"),i.addClass("ubermenu-test-dimensions");var r=t(this).find(" > .ubermenu-tabs-group > .ubermenu-tab > .ubermenu-tab-content-panel");r.each(function(){t(this).addClass("ubermenu-test-dimensions"),t(this).outerHeight()>s&&(s=t(this).outerHeight()),t(this).removeClass("ubermenu-test-dimensions")});var o=t(this).find("> .ubermenu-tabs-group");if(e?t(this).css("min-height",s+o.outerHeight()):(o.outerHeight()>s&&(s=t(this).outerHeight()),o.css("min-height",s)),n)t(this).closest(".ubermenu-submenu-drop").css("min-height",s),r.css("min-height",!1);else{var a=t(this).closest(".ubermenu-submenu-drop");a.css("min-height",!1),r.css("min-height",s)}i.removeClass("ubermenu-test-dimensions")})},initializeSegmentCurrentStates:function(){this.$ubermenu.find(".ubermenu-current-menu-item").first().parents(".ubermenu-item").addClass("ubermenu-current-menu-ancestor")},disableTransitions:function(){this.transitions=!1,this.$ubermenu.removeClass("ubermenu-transition-slide").removeClass("ubermenu-transition-fade").removeClass("ubermenu-transition-shift").addClass("ubermenu-no-transitions").addClass("ubermenu-transition-none")},handleClicks:function(e,i,n){var s=t(i);s.data("ubermenu-killClick")&&(e.preventDefault(),n.log("killed click after touchend ",e))},handleTouchInteraction:function(e,i,n){e.stopPropagation(),e.type.indexOf("pointer")>=0&&n.disableTransitions();var s=t(i);if(s.parent().off("mouseleave.mouse_intent_none"),n.log("touchstart "+e.type+" "+s.text(),e),s.on(n.touchEnd,function(t){n.handleTap(t,this,n)}),s.on(n.touchMove,function(t){n.preventInteractionOnScroll(t,this,n)}),e.originalEvent.touches)s.data("ubermenu-startX",e.originalEvent.touches[0].clientX),s.data("ubermenu-startY",e.originalEvent.touches[0].clientY);else if(e.originalEvent.clientY){{s.offset()}s.data("ubermenu-startX",e.originalEvent.clientX),s.data("ubermenu-startY",e.originalEvent.clientY)}},preventInteractionOnScroll:function(e,i,n){n.log("touchmove interaction "+e.type,e);var s=t(i);if(e.originalEvent.touches)Math.abs(e.originalEvent.touches[0].clientX-s.data("ubermenu-startX"))>n.settings.moveThreshold||Math.abs(e.originalEvent.touches[0].clientY-s.data("ubermenu-startY"))>n.settings.moveThreshold?(n.log("Preventing interaction on scroll, reset handlers (standard)"),n.resetHandlers(s,"preventScroll touches",n)):n.log("diff = "+Math.abs(e.originalEvent.touches[0].clientY-s.data("ubermenu-startY")));else if(e.originalEvent.clientY){var r=s.data(r);Math.abs(e.originalEvent.clientX-s.data("ubermenu-startX"))>n.settings.moveThreshold||Math.abs(e.originalEvent.clientY-s.data("ubermenu-startY"))>n.settings.moveThreshold?(n.log("Preventing interaction on scroll, reset handlers (standard)"),n.resetHandlers(s,"preventScroll client",n)):n.log("diff = "+e.originalEvent.clientY+" - "+s.data("ubermenu-startY")+" = "+Math.abs(e.originalEvent.clientY-s.data("ubermenu-startY")))}else n.log("no touch points found!")},handleTap:function(e,i,n){e.preventDefault(),e.stopPropagation();var s=t(i);if(s.data("ubermenu-killTouch"))n.log("kill tap"),e.preventDefault(),e.stopPropagation();else{var r=s.parent();n.log("handleTap ["+s.text()+"]",e.type),s.data("ubermenu-killClick",!0),s.data("ubermenu-killHover",!0),setTimeout(function(){s.data("ubermenu-killClick",!1).data("ubermenu-killHover",!1)},1e3),n.closeSubmenuInstantly(r.siblings(".ubermenu-active")),r.hasClass("ubermenu-has-submenu-drop")?r.hasClass("ubermenu-active")?(r.hasClass("ubermenu-tab")||n.closeSubmenu(r,"toggleUberMenuActive",n),n.handleLink(e,i,n,!0)):n.openSubmenu(r,"toggle",n):n.handleLink(e,i,n,!0)}s.data("ubermenu-killTouch",!1),n.resetHandlers(s,"handleTap",n)},handleLink:function(i,n,s,r){r=r||!1,s.log("handleLink");var o=t(n);if(o.is("a")){var a=o.attr("href"),l=o.data("ubermenu-scrolltarget");if(l){var u=t(l).first();if(u.size()>0)return i.preventDefault(),t("html,body").animate({scrollTop:u.offset().top-s.settings.scrollto_offset},1e3,"swing",function(){s.closeSubmenu(o.parent(".menu-item"),"handeLink")}),!1;a&&-1==a.indexOf("#")&&(-1==l.indexOf("#")&&(l="#"+l),e.location=a+l,i.preventDefault())}a?r&&i.isDefaultPrevented()&&(s.log("default prevented, follow link"),"_blank"==o.attr("target")?e.open(a,"_blank"):e.location=a):i.preventDefault()}},handleMouseClick:function(e,i,n){n.log("handleMouseClick",e);var s=t(i);if(s.data("ubermenu-killClick"))return void n.log("handleMouseClick: killClick");var r=s.parent(".ubermenu-item");r.size()&&(r.hasClass("ubermenu-active")?(s.is("a")&&n.handleLink(e,i,n),r.hasClass("ubermenu-tab")||n.closeSubmenu(r,"retract")):r.hasClass("ubermenu-has-submenu-drop")&&(e.preventDefault(),n.closeSubmenuInstantly(r.siblings(".ubermenu-active")),n.openSubmenu(r,"click",n)))},handleMouseIntent:function(e,i,n){n.log("handleMouseIntent");var s=t(i);s.data("mouse_intent_timer")&&s.data("mouse_intent_timer",clearTimeout(s.data("mouse_intent_timer")));var r=s.find(".ubermenu-target");return r.data("ubermenu-killHover")?(n.log("killHover MouseIntent"),e.preventDefault(),void e.stopPropagation()):(a=e.pageX,l=e.pageY,s.on("mousemove.mouse_intent",n.trackMouse),s.data("mouse_intent_timer",setTimeout(function(){n.compare(e,s,n.handleMouseIntentSuccess,n)},n.settings.intent_interval)),void s.on("mouseleave.mouse_intent_none",function(){return t(this).data("mouse_intent_timer",clearTimeout(t(this).data("mouse_intent_timer"))),s.data("mouse_intent_state",0),s.off("mouseleave.mouse_intent_none"),r.data("ubermenu-killHover")?(n.log("killHover MouseIntent_Cancel"),e.preventDefault(),void e.stopPropagation()):void n.closeSubmenu(s,"mouse_intent_cancel",n)}))},handleMouseIntentSuccess:function(t,e,i){i.log("handleMouseIntentSuccess"),e.off("mouseleave.mouse_intent_none");var n=e.find(".ubermenu-target");return n.data("ubermenu-killHover")?(i.log("Kill hover on IntentSuccess"),t.preventDefault(),void t.stopPropagation()):(n.data("ubermenu-killHover",!1),i.triggerSubmenu(t,e,i),void(e.hasClass("ubermenu-tab")||e.on("mouseleave.mouse_intent",function(t){i.handleMouseIntentLeave(t,this,i)})))},handleMouseIntentLeave:function(e,i,n){var s=t(i);s.data("mouse_intent_timer")&&s.data("mouse_intent_timer",clearTimeout(s.data("mouse_intent_timer"))),s.off("mousemove.mouse_intent",n.trackMouse),1==s.data("mouse_intent_state")&&s.data("mouse_intent_timer",setTimeout(function(){n.delayMouseLeave(e,s,n.handleMouseIntentLeaveSuccess,n)},n.settings.intent_delay))},handleMouseIntentLeaveSuccess:function(t,e,i){e.off("mouseleave.mouse_intent"),e.find("> .ubermenu-target").data("ubermenu-killHover")||i.closeSubmenu(e,"mouse_intent_leave",i)},delayMouseLeave:function(t,e,i,n){return e.data("mouse_intent_timer",clearTimeout(e.data("mouse_intent_timer"))),e.data("mouse_intent_state",0),i.apply(e,[t,e,n])},trackMouse:function(t){r=t.pageX,o=t.pageY},compare:function(t,e,i,n){return e.data("mouse_intent_timer",clearTimeout(e.data("mouse_intent_timer"))),Math.abs(a-r)+Math.abs(l-o)<n.settings.intent_threshold?(e.off("mousemove.mouse_intent",n.track),e.data("mouse_intent_state",1),i.apply(e,[t,e,n])):(a=r,l=o,e.data("mouse_intent_timer",setTimeout(function(){n.compare(t,e,i,n)},n.settings.intent_interval)),void 0)},triggerSubmenu:function(t,e,i){i.closeSubmenuInstantly(e.siblings(".ubermenu-active, .ubermenu-in-transition")),i.openSubmenu(e,"mouseenter",i)},handleMouseover:function(e,i,n){if(!n.events_disabled){var s=t(i);s.data("ubermenu-killTouch",!0),setTimeout(function(){s.data("ubermenu-killTouch",!1)},1e3),n.log("handleMouseenter, add mouseleave",e);var r=s.parent(".ubermenu-item");r.size()&&(r.hasClass("ubermenu-active")||(n.triggerSubmenu(e,r,n),r.hasClass("ubermenu-tab")||r.on("mouseleave.ubermenu-submenu-toggle",function(t){n.handleMouseout(t,this,n)})))}},handleMouseout:function(e,i,n){n.log("handleMouseout, remove mouseout",e),t(i).off("mouseleave.ubermenu-submenu-toggle"),n.closeSubmenu(t(i),"mouseout")},handleSubmenuRetractorStart:function(e,i,n){e.preventDefault(),e.stopPropagation(),t(i).on(n.touchEnd,function(t){n.handleSubmenuRetractorEnd(t,this,n)}),n.log("handleSubmenuRetractorStart "+t(i).text())},handleSubmenuRetractorEnd:function(e,i,n){e.preventDefault(),e.stopPropagation();var s=t(i).closest(".ubermenu-item");return n.closeSubmenu(s,"handleSubmenuRetractor"),t(i).off(n.touchEnd),n.log("handleSubmenuRetractorEnd "+s.find("> .ubermenu-target").text()),!1},handleResponsiveToggle:function(e,i,n){if(n.log("handleResponsiveToggle "+e.type,e),e.preventDefault(),e.stopPropagation(),"touchend"==e.type)n.$ubermenu.data("ubermenu-prevent-click",!0),setTimeout(function(){n.$ubermenu.data("ubermenu-prevent-click",!1)},500);else if("click"==e.type&&n.$ubermenu.data("ubermenu-prevent-click"))return void n.$ubermenu.data("ubermenu-prevent-click",!1);t(i);n.$ubermenu.toggleClass("ubermenu-responsive-collapse"),n.transitions&&(n.$ubermenu.addClass("ubermenu-in-transition"),n.$ubermenu.on(n.transitionend+"_toggleubermenu",function(){n.$ubermenu.removeClass("ubermenu-in-transition"),n.$ubermenu.off(n.transitionend+"_toggleubermenu")}))},handleTouchoffClose:function(i,n,s){t(i.target).closest(".ubermenu").length||(s.log("touchoff close ",i),s.closeAllSubmenus()&&(s.disableSubmenuToggleMouseEvents(),e.setTimeout(function(){s.reenableSubmenuToggleMouseEvents(s)},s.settings.submenuAnimationDuration)))},positionSubmenus:function(){var e=this;"h"==e.orientation&&e.$ubermenu.find(".ubermenu-submenu-drop.ubermenu-submenu-align-center").each(function(){var i,n=t(this).parent(".ubermenu-item"),s=t(this);if(e.$ubermenu.hasClass("ubermenu-bound"))i=n.closest(".ubermenu , .ubermenu-submenu");else if(e.$ubermenu.hasClass("ubermenu-bound-inner"))i=n.closest(".ubermenu-nav , .ubermenu-submenu");else{var r=n.closest(".ubermenu-submenu");0===r.size()&&(i=e.$ubermenu.offsetParent())}var o=s.outerWidth(),a=n.outerWidth(),l=n.offset().left,u=i.width(),h=i.offset().left,c=l+a/2-(h+o/2),d=c>0?c:0;o>u?d=(o-u)/-2:d+o>u&&(s.css({right:0,left:"auto"}),d=!1),d!==!1&&s.css("left",d)})},openSubmenu:function(e,i,n){n=n||this,n.log("Open Submenu "+i),e.hasClass("ubermenu-active")||(e.addClass("ubermenu-active"),n.transitions&&(e.addClass("ubermenu-in-transition"),e.find("> .ubermenu-submenu").on(n.transitionend+"_opensubmenu",function(){n.log("finished submenu open transition"),e.removeClass("ubermenu-in-transition"),t(this).off(n.transitionend+"_opensubmenu")})),e.trigger("ubermenuopen"))},closeSubmenu:function(e,i,n){n=n||this,n.log("closeSubmenu "+e.find(">a").text()+" ["+i+"]"),e.hasClass("ubermenu-item-has-children")&&e.hasClass("ubermenu-active")&&(n.transitions&&e.addClass("ubermenu-in-transition"),e.each(function(){var e=t(this),i=e.find("> ul");n.transitions&&i.on(n.transitionend+"_closesubmenu",function(){n.log("finished submenu close transition"),e.removeClass("ubermenu-in-transition"),i.off(n.transitionend+"_closesubmenu")})})),e.removeClass("ubermenu-active"),e.trigger("ubermenuclose")},closeSubmenuInstantly:function(t){if(0!==t.size()){t.addClass("ubermenu-notransition"),t.removeClass("ubermenu-active").removeClass("ubermenu-in-transition"),t[0].offsetHeight,t.removeClass("ubermenu-notransition"),t.trigger("ubermenuclose")}},closeAllSubmenus:function(){var t=this.$ubermenu.find(".ubermenu-item-level-0.ubermenu-active");return t.length&&this.closeSubmenuInstantly(t),t.length},resetHandlers:function(t,e,i){i.log("ResetHandlers: "+e),t.off(this.touchEnd),t.off(this.touchMove);var n=t.parent();n.off("mousemove.mouse_intent"),n.off("mouseleave.mouse_intent_none"),n.data("mouse_intent_timer",clearTimeout(n.data("mouse_intent_timer"))),n.data("mouse_intent_state",0)},log:function(t,e,i){i=i||this,i.settings.debug&&(i.settings.debug_onscreen?this.debug_target.prepend('<div class="um-debug-content">'+t+"</div>"):console.log(t,e))}},t.fn[u]=function(e){var i=arguments;if(e===n||"object"==typeof e)return this.each(function(){t.data(this,"plugin_"+u)||t.data(this,"plugin_"+u,new s(this,e))});if("string"==typeof e&&"_"!==e[0]&&"init"!==e){var r;return this.each(function(){var n=t.data(this,"plugin_"+u);n instanceof s&&"function"==typeof n[e]&&(r=n[e].apply(n,Array.prototype.slice.call(i,1))),"destroy"===e&&t.data(this,"plugin_"+u,null)}),r!==n?r:this}}}(jQuery,window,document),jQuery(document).ready(function(t){if("."==window.location.hash.substring(1,2)){var e=t(window.location.hash.substring(1));e.size()&&window.scrollTo(0,e.offset().top)}t("#wp-admin-bar-ubermenu_loading").remove(),t(".ubermenu").ubermenu({}),"undefined"!=typeof google&&"undefined"!=typeof google.maps&&"undefined"!=typeof google.maps.LatLng&&t(".ubermenu-map-canvas").each(function(){var e=t(this),i=e.attr("data-zoom")?parseInt(e.attr("data-zoom")):8,n=e.attr("data-lat")?new google.maps.LatLng(e.attr("data-lat"),e.attr("data-lng")):new google.maps.LatLng(40.7143528,-74.0059731),s={zoom:i,mapTypeId:google.maps.MapTypeId.ROADMAP,center:n},r=new google.maps.Map(this,s);if(e.attr("data-address")){var o=new google.maps.Geocoder;o.geocode({address:e.attr("data-address")},function(t,i){if(i==google.maps.GeocoderStatus.OK){r.setCenter(t[0].geometry.location),n=t[0].geometry.location;{new google.maps.Marker({map:r,position:t[0].geometry.location,title:e.attr("data-mapTitle")})}}})}else{new google.maps.Marker({map:r,position:n,title:e.attr("data-mapTitle")})}var a=t(this).closest(".ubermenu-has-submenu-drop"),l=function(){google.maps.event.trigger(r,"resize"),r.setCenter(n),a.off("ubermenuopen",l)};a.on("ubermenuopen",l)})}),function(t,e){var i=function(t,e,i){var n;return function(){function s(){i||t.apply(r,o),n=null}var r=this,o=arguments;n?clearTimeout(n):i&&t.apply(r,o),n=setTimeout(s,e||100)}};jQuery.fn[e]=function(t){return t?this.bind("resize",i(t)):this.trigger(e)}}(jQuery,"ubersmartresize");var uber_supports=function(){var t=document.createElement("div"),e="Khtml Ms O Moz Webkit".split(" ");return function(i){var n=e.length;if(i in t.style)return!0;for(i=i.replace(/^[a-z]/,function(t){return t.toUpperCase()});n--;)if(e[n]+i in t.style)return!0;return!1}}();(function(){var t,e,i,n,s,r,o,a,l,u,h,c,d,p,g,f,m,v,b,y,w,x,_,C,k,$={}.hasOwnProperty,T=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1},S=function(t,e){return function(){return t.apply(e,arguments)}},D=[].slice;C=Array.prototype.slice,t=function(t,e){return null==e&&(e=document),"object"==typeof t||"undefined"!=typeof exports&&null!==exports?t:e.querySelector(t)},x=function(){function t(){}return t.uniqid=function(){var t;return t=0,{get:function(){return t++}}}(),t.extend=function(t){var e,i,n,s,r,o;for(i=t,s=C.call(arguments,1),r=0,o=s.length;o>r;r++){e=s[r];for(n in e)$.call(e,n)&&(i[n]=e[n])}return i},t.clampRGB=function(t){return 0>t?0:t>255?255:t},t.copyAttributes=function(t,e,i){var n,s,r,o,a,l;for(null==i&&(i={}),o=t.attributes,l=[],s=0,r=o.length;r>s;s++)n=o[s],null!=i.except&&(a=n.nodeName,T.call(i.except,a)>=0)||l.push(e.setAttribute(n.nodeName,n.nodeValue));return l},t}(),"undefined"!=typeof exports&&null!==exports?(y=exports,o=require("canvas"),d=o.Image,u=require("fibers"),_=require("fs")):y=window,y.Caman=s=function(){function i(){var t,n,s,r=this;if(0===arguments.length)throw"Invalid arguments";return this instanceof i?(this.finishInit=this.finishInit.bind(this),this.imageLoaded=this.imageLoaded.bind(this),t=arguments[0],i.NodeJS||(s=parseInt(i.getAttrId(t[0]),10),n="function"==typeof t[1]?t[1]:"function"==typeof t[2]?t[2]:function(){},isNaN(s)||!w.has(s))?(this.id=x.uniqid.get(),this.originalPixelData=[],this.pixelStack=[],this.layerStack=[],this.canvasQueue=[],this.currentLayer=null,this.scaled=!1,this.analyze=new e(this),this.renderer=new b(this),this.domIsLoaded(function(){return r.parseArguments(t),r.setup()}),this):w.execute(s,n)):new i(arguments)}return i.version={release:"4.0.0",date:"1/6/13"},i.DEBUG=!1,i.NodeJS="undefined"!=typeof exports&&null!==exports,i.autoload=!i.NodeJS,i.crossOrigin="anonymous",i.toString=function(){return"Version "+i.version.release+", Released "+i.version.date},i.remoteProxy="",i.proxyParam="camanProxyUrl",i.getAttrId=function(e){return"string"==typeof e&&(e=t(e)),null==e||null==e.getAttribute?null:e.getAttribute("data-caman-id")},i.prototype.domIsLoaded=function(t){var e,n=this;return i.NodeJS?setTimeout(function(){return t.call(n)},0):"complete"===document.readyState?(g.debug("DOM initialized"),setTimeout(function(){return t.call(n)},0)):(e=function(){return"complete"===document.readyState?(g.debug("DOM initialized"),t.call(n)):void 0},document.addEventListener("readystatechange",e,!1))},i.prototype.parseArguments=function(t){if(0===t.length)throw"Invalid arguments given";if(this.initObj=null,this.initType=null,this.imageUrl=null,this.callback=function(){},this.setInitObject(t[0]),1!==t.length){switch(typeof t[1]){case"string":this.imageUrl=t[1];break;case"function":this.callback=t[1]}if(2!==t.length)return this.callback=t[2]}},i.prototype.setInitObject=function(e){return i.NodeJS?(this.initObj=e,void(this.initType="node")):(this.initObj="object"==typeof e?e:t(e),this.initType=this.initObj.nodeName.toLowerCase())},i.prototype.setup=function(){switch(this.initType){case"node":return this.initNode();case"img":return this.initImage();case"canvas":return this.initCanvas()}},i.prototype.initNode=function(){var t=this;return g.debug("Initializing for NodeJS"),this.image=new d,this.image.onload=function(){return g.debug("Image loaded. Width = "+t.image.width+", Height = "+t.image.height),t.canvas=new o(t.image.width,t.image.height),t.finishInit()},this.image.onerror=function(t){throw t},this.image.src=this.initObj},i.prototype.initImage=function(){return this.image=this.initObj,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),x.copyAttributes(this.image,this.canvas,{except:["src"]}),this.image.parentNode.replaceChild(this.canvas,this.image),this.imageAdjustments(),this.waitForImageLoaded()},i.prototype.initCanvas=function(){return this.canvas=this.initObj,this.context=this.canvas.getContext("2d"),null!=this.imageUrl?(this.image=document.createElement("img"),this.image.src=this.imageUrl,this.imageAdjustments(),this.waitForImageLoaded()):this.finishInit()},i.prototype.imageAdjustments=function(){return this.needsHiDPISwap()&&(g.debug(this.image.src,"->",this.hiDPIReplacement()),this.swapped=!0,this.image.src=this.hiDPIReplacement()),c.isRemote(this.image)?(this.image.src=c.proxyUrl(this.image.src),g.debug("Remote image detected, using URL = "+this.image.src)):void 0},i.prototype.waitForImageLoaded=function(){return this.image.complete?this.imageLoaded():this.image.onload=this.imageLoaded},i.prototype.imageLoaded=function(){return g.debug("Image loaded. Width = "+this.image.width+", Height = "+this.image.height),this.swapped?(this.canvas.width=this.image.width/this.hiDPIRatio(),this.canvas.height=this.image.height/this.hiDPIRatio()):(this.canvas.width=this.image.width,this.canvas.height=this.image.height),this.finishInit()},i.prototype.finishInit=function(){var t,e,i,n;for(null==this.context&&(this.context=this.canvas.getContext("2d")),this.originalWidth=this.width=this.canvas.width,this.originalHeight=this.height=this.canvas.height,this.hiDPIAdjustments(),this.assignId(),null!=this.image&&this.context.drawImage(this.image,0,0,this.image.width,this.image.height,0,0,this.originalWidth,this.originalHeight),this.imageData=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),this.pixelData=this.imageData.data,n=this.pixelData,e=0,i=n.length;i>e;e++)t=n[e],this.originalPixelData.push(t);return this.dimensions={width:this.canvas.width,height:this.canvas.height},w.put(this.id,this),this.callback.call(this,this)},i.prototype.assignId=function(){return i.NodeJS||this.canvas.getAttribute("data-caman-id")?void 0:this.canvas.setAttribute("data-caman-id",this.id)},i.prototype.hiDPIDisabled=function(){return null!==this.canvas.getAttribute("data-caman-hidpi-disabled")},i.prototype.hiDPIAdjustments=function(){var t;if(!i.NodeJS&&!this.hiDPIDisabled())return t=this.hiDPIRatio(),1!==t?(g.debug("HiDPI ratio = "+t),this.scaled=!0,this.originalWidth=this.canvas.width,this.originalHeight=this.canvas.height,this.canvas.width=this.originalWidth*t,this.canvas.height=this.originalHeight*t,this.canvas.style.width=""+this.originalWidth+"px",this.canvas.style.height=""+this.originalHeight+"px",this.context.scale(t,t),this.width=this.canvas.width,this.height=this.canvas.height):void 0},i.prototype.hiDPIRatio=function(){var t,e;return e=window.devicePixelRatio||1,t=this.context.webkitBackingStorePixelRatio||this.context.mozBackingStorePixelRatio||this.context.msBackingStorePixelRatio||this.context.oBackingStorePixelRatio||this.context.backingStorePixelRatio||1,e/t},i.prototype.hiDPICapable=function(){return 1!==window.devicePixelRatio},i.prototype.needsHiDPISwap=function(){return this.hiDPIDisabled()||!this.hiDPICapable()?!1:null!==this.hiDPIReplacement()},i.prototype.hiDPIReplacement=function(){return null==this.image?null:this.image.getAttribute("data-caman-hidpi")},i.prototype.replaceCanvas=function(t){var e;return e=this.canvas,this.canvas=t,e.parentNode.replaceChild(this.canvas,e),this.finishInit()},i.prototype.render=function(t){var e=this;return null==t&&(t=function(){}),l.trigger(this,"renderStart"),this.renderer.execute(function(){return e.context.putImageData(e.imageData,0,0),t.call(e)})},i.prototype.revert=function(t){var e,i,n,s,r;for(null==t&&(t=function(){}),r=this.originalPixelData,e=n=0,s=r.length;s>n;e=++n)i=r[e],this.pixelData[e]=i;return this.context.putImageData(this.imageData,0,0),t.call(this)},i.prototype.process=function(t,e){return this.renderer.add({type:h.Type.Single,name:t,processFn:e}),this},i.prototype.processKernel=function(t,e,i,n){var s,r,o;if(!i)for(i=0,s=r=0,o=e.length;o>=0?o>r:r>o;s=o>=0?++r:--r)i+=e[s];return this.renderer.add({type:h.Type.Kernel,name:t,adjust:e,divisor:i,bias:n||0}),this},i.prototype.processPlugin=function(t,e){return this.renderer.add({type:h.Type.Plugin,plugin:t,args:e}),this},i.prototype.newLayer=function(t){var e;return e=new p(this),this.canvasQueue.push(e),this.renderer.add({type:h.Type.LayerDequeue}),t.call(e),this.renderer.add({type:h.Type.LayerFinished}),this},i.prototype.executeLayer=function(t){return this.pushContext(t)},i.prototype.pushContext=function(t){return this.layerStack.push(this.currentLayer),this.pixelStack.push(this.pixelData),this.currentLayer=t,this.pixelData=t.pixelData},i.prototype.popContext=function(){return this.pixelData=this.pixelStack.pop(),this.currentLayer=this.layerStack.pop()},i.prototype.applyCurrentLayer=function(){return this.currentLayer.applyToParent()},i}(),e=function(){function t(t){this.c=t}return t.prototype.calculateLevels=function(){var t,e,i,n,s,r,o;for(e={r:{},g:{},b:{}},t=n=0;255>=n;t=++n)e.r[t]=0,e.g[t]=0,e.b[t]=0;for(t=s=0,o=this.c.pixelData.length;o>s;t=s+=4)e.r[this.c.pixelData[t]]++,e.g[this.c.pixelData[t+1]]++,e.b[this.c.pixelData[t+2]]++;for(i=this.c.pixelData.length/4,t=r=0;255>=r;t=++r)e.r[t]/=i,e.g[t]/=i,e.b[t]/=i;return e},t}(),s.DOMUpdated=function(){var t,e,i,n,s,o;if(e=document.querySelectorAll("img[data-caman]"),e.length>0){for(o=[],n=0,s=e.length;s>n;n++)t=e[n],o.push(i=new r(t,function(){return this.parse(),this.execute()}));return o}},s.autoload&&!function(){return"complete"===document.readyState?s.DOMUpdated():document.addEventListener("DOMContentLoaded",s.DOMUpdated,!1)}(),r=function(){function t(t,e){this.dataStr=t.getAttribute("data-caman"),this.caman=s(t,e.bind(this))}var e;return e="(\\w+)\\((.*?)\\)",t.prototype.parse=function(){var t,i,n,s,r,o,a,l,u,h,c,d;if(this.ele=this.caman.canvas,a=new RegExp(e,"g"),l=this.dataStr.match(a),l.length>0){for(a=new RegExp(e),d=[],u=0,h=l.length;h>u;u++){s=l[u],c=s.match(a),o=c[0],i=c[1],t=c[2],r=new Function("return function() {        this."+i+"("+t+");      };");try{n=r(),d.push(n.call(this.caman))}catch(p){d.push(g.debug(p))}}return d}},t.prototype.execute=function(){var t;return t=this.ele,this.caman.render(function(){return t.parentNode.replaceChild(this.toImage(),t)})},t}(),s.Blender=i=function(){function t(){}return t.blenders={},t.register=function(t,e){return this.blenders[t]=e},t.execute=function(t,e,i){return this.blenders[t](e,i)},t}(),s.Calculate=n=function(){function t(){}return t.distance=function(t,e,i,n){return Math.sqrt(Math.pow(i-t,2)+Math.pow(n-e,2))},t.randomRange=function(t,e,i){var n;return null==i&&(i=!1),n=t+Math.random()*(e-t),i?n.toFixed(i):Math.round(n)},t.luminance=function(t){return.299*t.r+.587*t.g+.114*t.b},t.bezier=function(t,e,i,n,s,r){var o,a,l,u,h,c,d,p,g,f,m,v,b,y,w,x,_,C,k,$,T,S,D,M,E,P,I;for(w=t[0],k=t[1],x=e[0],$=e[1],_=i[0],T=i[1],C=n[0],S=n[1],d={},h=parseInt(3*(x-w),10),l=3*(_-x)-h,o=C-w-h-l,c=3*($-k),u=3*(T-$)-c,a=S-k-c-u,f=D=0;1e3>D;f=++D)y=f/1e3,p=Math.round(o*Math.pow(y,3)+l*Math.pow(y,2)+h*y+w),g=Math.round(a*Math.pow(y,3)+u*Math.pow(y,2)+c*y+k),s&&s>g?g=s:r&&g>r&&(g=r),d[p]=g;if(d.length<n[0]+1)for(f=M=0,P=n[0];P>=0?P>=M:M>=P;f=P>=0?++M:--M)if(null==d[f]){for(v=[f-1,d[f-1]],m=E=f,I=n[0];I>=f?I>=E:E>=I;m=I>=f?++E:--E)if(null!=d[m]){b=[m,d[m]];break}d[f]=v[1]+(b[1]-v[1])/(b[0]-v[0])*(f-v[0])}return null==d[n[0]]&&(d[n[0]]=d[n[0]-1]),d},t}(),a=function(){function t(){}return t.hexToRGB=function(t){var e,i,n;return"#"===t.charAt(0)&&(t=t.substr(1)),n=parseInt(t.substr(0,2),16),i=parseInt(t.substr(2,2),16),e=parseInt(t.substr(4,2),16),{r:n,g:i,b:e}},t.rgbToHSL=function(t,e,i){var n,s,r,o,a,l;return"object"==typeof t&&(e=t.g,i=t.b,t=t.r),t/=255,e/=255,i/=255,o=Math.max(t,e,i),a=Math.min(t,e,i),r=(o+a)/2,o===a?s=l=0:(n=o-a,l=r>.5?n/(2-o-a):n/(o+a),s=function(){switch(o){case t:return(e-i)/n+(i>e?6:0);case e:return(i-t)/n+2;case i:return(t-e)/n+4}}(),s/=6),{h:s,s:l,l:r}},t.hslToRGB=function(t,e,i){var n,s,r,o,a;return"object"==typeof t&&(e=t.s,i=t.l,t=t.h),0===e?a=s=n=i:(o=.5>i?i*(1+e):i+e-i*e,r=2*i-o,a=this.hueToRGB(r,o,t+1/3),s=this.hueToRGB(r,o,t),n=this.hueToRGB(r,o,t-1/3)),{r:255*a,g:255*s,b:255*n}},t.hueToRGB=function(t,e,i){return 0>i&&(i+=1),i>1&&(i-=1),1/6>i?t+6*(e-t)*i:.5>i?e:2/3>i?t+(e-t)*(2/3-i)*6:t},t.rgbToHSV=function(t,e,i){var n,s,r,o,a,l;return t/=255,e/=255,i/=255,r=Math.max(t,e,i),o=Math.min(t,e,i),l=r,n=r-o,a=0===r?0:n/r,r===o?s=0:(s=function(){switch(r){case t:return(e-i)/n+(i>e?6:0);case e:return(i-t)/n+2;case i:return(t-e)/n+4}}(),s/=6),{h:s,s:a,v:l}},t.hsvToRGB=function(t,e,i){var n,s,r,o,a,l,u,h;switch(o=Math.floor(6*t),s=6*t-o,a=i*(1-e),l=i*(1-s*e),h=i*(1-(1-s)*e),o%6){case 0:u=i,r=h,n=a;break;case 1:u=l,r=i,n=a;break;case 2:u=a,r=i,n=h;break;case 3:u=a,r=l,n=i;break;case 4:u=h,r=a,n=i;break;case 5:u=i,r=a,n=l}return{r:255*u,g:255*r,b:255*n}},t.rgbToXYZ=function(t,e,i){var n,s,r;return t/=255,e/=255,i/=255,t>.04045?t=Math.pow((t+.055)/1.055,2.4):t/=12.92,e>.04045?e=Math.pow((e+.055)/1.055,2.4):e/=12.92,i>.04045?i=Math.pow((i+.055)/1.055,2.4):i/=12.92,n=.4124*t+.3576*e+.1805*i,s=.2126*t+.7152*e+.0722*i,r=.0193*t+.1192*e+.9505*i,{x:100*n,y:100*s,z:100*r}},t.xyzToRGB=function(t,e,i){var n,s,r;return t/=100,e/=100,i/=100,r=3.2406*t+-1.5372*e+-.4986*i,s=-.9689*t+1.8758*e+.0415*i,n=.0557*t+-.204*e+1.057*i,r>.0031308?r=1.055*Math.pow(r,.4166666667)-.055:r*=12.92,s>.0031308?s=1.055*Math.pow(s,.4166666667)-.055:s*=12.92,n>.0031308?n=1.055*Math.pow(n,.4166666667)-.055:n*=12.92,{r:255*r,g:255*s,b:255*n}},t.xyzToLab=function(t,e,i){var n,s,r,o,a,l;return"object"==typeof t&&(e=t.y,i=t.z,t=t.x),o=95.047,a=100,l=108.883,t/=o,e/=a,i/=l,t=t>.008856451679?Math.pow(t,.3333333333):7.787037037*t+.1379310345,e=e>.008856451679?Math.pow(e,.3333333333):7.787037037*e+.1379310345,i=i>.008856451679?Math.pow(i,.3333333333):7.787037037*i+.1379310345,r=116*e-16,n=500*(t-e),s=200*(e-i),{l:r,a:n,b:s}
},t.labToXYZ=function(t,e,i){var n,s,r;return"object"==typeof t&&(e=t.a,i=t.b,t=t.l),s=(t+16)/116,n=s+e/500,r=s-i/200,n=n>.2068965517?n*n*n:.1284185493*(n-.1379310345),s=s>.2068965517?s*s*s:.1284185493*(s-.1379310345),r=r>.2068965517?r*r*r:.1284185493*(r-.1379310345),{x:95.047*n,y:100*s,z:108.883*r}},t.rgbToLab=function(t,e,i){var n;return"object"==typeof t&&(e=t.g,i=t.b,t=t.r),n=this.rgbToXYZ(t,e,i),this.xyzToLab(n)},t.labToRGB=function(){},t}(),l=function(){function t(){}return t.events={},t.types=["processStart","processComplete","renderStart","renderFinished","blockStarted","blockFinished"],t.trigger=function(t,e,i){var n,s,r,o,a;if(this.events[e]&&this.events[e].length){for(o=this.events[e],a=[],s=0,r=o.length;r>s;s++)n=o[s],a.push(null===n.target||t.id===n.target.id?n.fn.call(t,i):void 0);return a}},t.listen=function(t,e,i){var n,s;return"string"==typeof t&&(s=t,n=e,t=null,e=s,i=n),T.call(this.types,e)<0?!1:(this.events[e]||(this.events[e]=[]),this.events[e].push({target:t,fn:i}),!0)},t}(),s.Event=l,s.Filter=h=function(){function t(){}return t.Type={Single:1,Kernel:2,LayerDequeue:3,LayerFinished:4,LoadOverlay:5,Plugin:6},t.register=function(t,e){return s.prototype[t]=e},t}(),s.IO=c=function(){function t(){}return t.domainRegex=/(?:(?:http|https):\/\/)((?:\w+)\.(?:(?:\w|\.)+))/,t.isRemote=function(t){var e;return null==t?!1:this.corsEnabled(t)?!1:(e=t.src.match(this.domainRegex),e?e[1]!==document.domain:!1)},t.corsEnabled=function(t){var e;return null!=t.crossOrigin&&("anonymous"===(e=t.crossOrigin.toLowerCase())||"use-credentials"===e)},t.proxyUrl=function(t){return""+s.remoteProxy+"?"+s.proxyParam+"="+encodeURIComponent(t)},t.useProxy=function(t){var e;return e={ruby:"rb",python:"py",perl:"pl",javascript:"js"},t=t.toLowerCase(),null!=e[t]&&(t=e[t]),"proxies/caman_proxy."+t},t}(),s.prototype.save=function(){return"undefined"!=typeof exports&&null!==exports?this.nodeSave.apply(this,arguments):this.browserSave.apply(this,arguments)},s.prototype.browserSave=function(t){var e;return null==t&&(t="png"),t=t.toLowerCase(),e=this.toBase64(t).replace("image/"+t,"image/octet-stream"),document.location.href=e},s.prototype.nodeSave=function(t,e){var i;null==e&&(e=!0);try{if(i=_.statSync(t),i.isFile()&&!e)return!1}catch(n){g.debug("Creating output file "+t)}return _.writeFile(t,this.canvas.toBuffer(),function(){return g.debug("Finished writing to "+t)})},s.prototype.toImage=function(t){var e;return e=document.createElement("img"),e.src=this.toBase64(t),e.width=this.dimensions.width,e.height=this.dimensions.height,window.devicePixelRatio&&(e.width/=window.devicePixelRatio,e.height/=window.devicePixelRatio),e},s.prototype.toBase64=function(t){return null==t&&(t="png"),t=t.toLowerCase(),this.canvas.toDataURL("image/"+t)},p=function(){function e(t){this.c=t,this.filter=this.c,this.options={blendingMode:"normal",opacity:1},this.layerID=x.uniqid.get(),this.canvas="undefined"!=typeof exports&&null!==exports?new o:document.createElement("canvas"),this.canvas.width=this.c.dimensions.width,this.canvas.height=this.c.dimensions.height,this.context=this.canvas.getContext("2d"),this.context.createImageData(this.canvas.width,this.canvas.height),this.imageData=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),this.pixelData=this.imageData.data}return e.prototype.newLayer=function(t){return this.c.newLayer.call(this.c,t)},e.prototype.setBlendingMode=function(t){return this.options.blendingMode=t,this},e.prototype.opacity=function(t){return this.options.opacity=t/100,this},e.prototype.copyParent=function(){var t,e,i,n;for(e=this.c.pixelData,t=i=0,n=this.c.pixelData.length;n>i;t=i+=4)this.pixelData[t]=e[t],this.pixelData[t+1]=e[t+1],this.pixelData[t+2]=e[t+2],this.pixelData[t+3]=e[t+3];return this},e.prototype.fillColor=function(){return this.c.fillColor.apply(this.c,arguments)},e.prototype.overlayImage=function(e){return"object"==typeof e?e=e.src:"string"==typeof e&&"#"===e[0]&&(e=t(e).src),e?(this.c.renderQueue.push({type:h.Type.LoadOverlay,src:e,layer:this}),this):this},e.prototype.applyToParent=function(){var t,e,n,s,r,o,a,l,u;for(n=this.c.pixelStack[this.c.pixelStack.length-1],e=this.c.pixelData,u=[],t=a=0,l=e.length;l>a;t=a+=4)o={r:n[t],g:n[t+1],b:n[t+2],a:n[t+3]},r={r:e[t],g:e[t+1],b:e[t+2],a:e[t+3]},s=i.execute(this.options.blendingMode,r,o),s.r=x.clampRGB(s.r),s.g=x.clampRGB(s.g),s.b=x.clampRGB(s.b),null==s.a&&(s.a=r.a),n[t]=o.r-(o.r-s.r)*this.options.opacity*(s.a/255),n[t+1]=o.g-(o.g-s.g)*this.options.opacity*(s.a/255),u.push(n[t+2]=o.b-(o.b-s.b)*this.options.opacity*(s.a/255));return u},e}(),f=function(){function t(){var t,e,i,n;for(n=["log","info","warn","error"],e=0,i=n.length;i>e;e++)t=n[e],this[t]=function(t){return function(){return s.DEBUG?console[t].apply(console,arguments):void 0}}(t);this.debug=this.log}return t}(),g=new f,m=function(){function t(t){this.c=t,this.loc=0}return t.prototype.locationXY=function(){var t,e;return e=this.c.dimensions.height-Math.floor(this.loc/(4*this.c.dimensions.width)),t=this.loc%(4*this.c.dimensions.width)/4,{x:t,y:e}},t.prototype.getPixelRelative=function(t,e){var i;return i=this.loc+4*this.c.dimensions.width*-1*e+4*t,i>this.c.pixelData.length||0>i?{r:0,g:0,b:0,a:0}:{r:this.c.pixelData[i],g:this.c.pixelData[i+1],b:this.c.pixelData[i+2],a:this.c.pixelData[i+3]}},t.prototype.putPixelRelative=function(t,e,i){var n;return n=this.loc+4*this.c.dimensions.width*-1*e+4*t,newLoc>this.c.pixelData.length||0>newLoc?void 0:(this.c.pixelData[newLoc]=i.r,this.c.pixelData[newLoc+1]=i.g,this.c.pixelData[newLoc+2]=i.b,this.c.pixelData[newLoc+3]=i.a,!0)},t.prototype.getPixel=function(t,e){var i;return i=4*(e*this.c.dimensions.width+t),{r:this.c.pixelData[i],g:this.c.pixelData[i+1],b:this.c.pixelData[i+2],a:this.c.pixelData[i+3]}},t.prototype.putPixel=function(t,e,i){var n;return n=4*(e*this.c.dimensions.width+t),this.c.pixelData[n]=i.r,this.c.pixelData[n+1]=i.g,this.c.pixelData[n+2]=i.b,this.c.pixelData[n+3]=i.a},t}(),v=function(){function t(){}return t.plugins={},t.register=function(t,e){return this.plugins[t]=e},t.execute=function(t,e,i){return this.plugins[e].apply(t,i)},t}(),s.Plugin=v,s.Renderer=b=function(){function t(t){this.c=t,this.processNext=S(this.processNext,this),this.renderQueue=[],this.modPixelData=null}return t.Blocks=s.NodeJS?require("os").cpus().length:4,t.prototype.add=function(t){return null!=t?this.renderQueue.push(t):void 0},t.prototype.processNext=function(){var t;if(0===this.renderQueue.length)return l.trigger(this,"renderFinished"),null!=this.finishedFn&&this.finishedFn.call(this.c),this;switch(this.currentJob=this.renderQueue.shift(),this.currentJob.type){case h.Type.LayerDequeue:return t=this.c.canvasQueue.shift(),this.c.executeLayer(t),this.processNext();case h.Type.LayerFinished:return this.c.applyCurrentLayer(),this.c.popContext(),this.processNext();case h.Type.LoadOverlay:return this.loadOverlay(this.currentJob.layer,this.currentJob.src);case h.Type.Plugin:return this.executePlugin();default:return this.executeFilter()}},t.prototype.execute=function(t){return this.finishedFn=t,this.modPixelData=new Uint8Array(this.c.pixelData.length),this.processNext()},t.prototype.eachBlock=function(e){var i,n,r,o,a,l,h,c,d,p,g,f=this;for(this.blocksDone=0,h=this.c.pixelData.length,n=Math.floor(h/4/t.Blocks),i=4*n,l=i+h/4%t.Blocks*4,g=[],a=d=0,p=t.Blocks;p>=0?p>d:d>p;a=p>=0?++d:--d)c=a*i,r=c+(a===t.Blocks-1?l:i),s.NodeJS?(o=u(function(){return e.call(f,a,c,r)}),g.push(o.run())):g.push(setTimeout(function(t,i,n){return function(){return e.call(f,t,i,n)}}(a,c,r),0));return g},t.prototype.executeFilter=function(){return l.trigger(this.c,"processStart",this.currentJob),this.eachBlock(this.currentJob.type===h.Type.Single?this.renderBlock:this.renderKernel)},t.prototype.executePlugin=function(){return g.debug("Executing plugin "+this.currentJob.plugin),v.execute(this.c,this.currentJob.plugin,this.currentJob.args),g.debug("Plugin "+this.currentJob.plugin+" finished!"),this.processNext()},t.prototype.renderBlock=function(e,i,n){var r,o,a,h,c;for(g.debug("Block #"+e+" - Filter: "+this.currentJob.name+", Start: "+i+", End: "+n),l.trigger(this.c,"blockStarted",{blockNum:e,totalBlocks:t.Blocks,startPixel:i,endPixel:n}),r={r:0,g:0,b:0,a:0},a=new m(this.c),o=c=i;n>c;o=c+=4)a.loc=o,r.r=this.c.pixelData[o],r.g=this.c.pixelData[o+1],r.b=this.c.pixelData[o+2],r.a=this.c.pixelData[o+3],h=this.currentJob.processFn.call(a,r),null==h.a&&(h.a=r.a),this.c.pixelData[o]=x.clampRGB(h.r),this.c.pixelData[o+1]=x.clampRGB(h.g),this.c.pixelData[o+2]=x.clampRGB(h.b),this.c.pixelData[o+3]=x.clampRGB(h.a);return this.blockFinished(e),s.NodeJS?u["yield"]():void 0},t.prototype.renderKernel=function(t,e,i){var n,r,o,a,l,h,c,d,p,f,v,b,y,w,_,C,k,$;for(b=this.currentJob.name,o=this.currentJob.bias,h=this.currentJob.divisor,v=this.c.pixelData.length,n=this.currentJob.adjust,r=Math.sqrt(n.length),f=[],g.debug("Rendering kernel - Filter: "+this.currentJob.name),e=Math.max(e,4*this.c.dimensions.width*((r-1)/2)),i=Math.min(i,v-4*this.c.dimensions.width*((r-1)/2)),a=(r-1)/2,w=new m(this.c),c=C=e;i>C;c=C+=4){for(w.loc=c,l=0,d=k=-a;a>=-a?a>=k:k>=a;d=a>=-a?++k:--k)for(p=$=a;-a>=a?-a>=$:$>=-a;p=-a>=a?++$:--$)y=w.getPixelRelative(d,p),f[3*l]=y.r,f[3*l+1]=y.g,f[3*l+2]=y.b,l++;_=this.processKernel(n,f,h,o),this.modPixelData[c]=x.clampRGB(_.r),this.modPixelData[c+1]=x.clampRGB(_.g),this.modPixelData[c+2]=x.clampRGB(_.b),this.modPixelData[c+3]=this.c.pixelData[c+3]}return this.blockFinished(t),s.NodeJS?u["yield"]():void 0},t.prototype.blockFinished=function(e){var i,n,s;if(e>=0&&g.debug("Block #"+e+" finished! Filter: "+this.currentJob.name),this.blocksDone++,l.trigger(this.c,"blockFinished",{blockNum:e,blocksFinished:this.blocksDone,totalBlocks:t.Blocks}),this.blocksDone===t.Blocks){if(this.currentJob.type===h.Type.Kernel)for(i=n=0,s=this.c.pixelData.length;s>=0?s>n:n>s;i=s>=0?++n:--n)this.c.pixelData[i]=this.modPixelData[i];return e>=0&&g.debug("Filter "+this.currentJob.name+" finished!"),l.trigger(this.c,"processComplete",this.currentJob),this.processNext()}},t.prototype.processKernel=function(t,e,i,n){var s,r,o,a;for(r={r:0,g:0,b:0},s=o=0,a=t.length;a>=0?a>o:o>a;s=a>=0?++o:--o)r.r+=t[s]*e[3*s],r.g+=t[s]*e[3*s+1],r.b+=t[s]*e[3*s+2];return r.r=r.r/i+n,r.g=r.g/i+n,r.b=r.b/i+n,r},t.prototype.loadOverlay=function(t,e){var i,n,s=this;return i=document.createElement("img"),i.onload=function(){return t.context.drawImage(i,0,0,s.c.dimensions.width,s.c.dimensions.height),t.imageData=t.context.getImageData(0,0,s.c.dimensions.width,s.c.dimensions.height),t.pixelData=t.imageData.data,s.c.pixelData=t.pixelData,s.processNext()},n=c.remoteCheck(e),i.src=null!=n?n:e},t}(),s.Store=w=function(){function t(){}return t.items={},t.has=function(t){return null!=this.items[t]},t.get=function(t){return this.items[t]},t.put=function(t,e){return this.items[t]=e},t.execute=function(t,e){var i=this;return setTimeout(function(){return e.call(i.get(t),i.get(t))},0),this.get(t)},t.flush=function(t){return null==t&&(t=!1),t?delete this.items[t]:this.items={}},t}(),i.register("normal",function(t){return{r:t.r,g:t.g,b:t.b}}),i.register("multiply",function(t,e){return{r:t.r*e.r/255,g:t.g*e.g/255,b:t.b*e.b/255}}),i.register("screen",function(t,e){return{r:255-(255-t.r)*(255-e.r)/255,g:255-(255-t.g)*(255-e.g)/255,b:255-(255-t.b)*(255-e.b)/255}}),i.register("overlay",function(t,e){var i;return i={},i.r=e.r>128?255-2*(255-t.r)*(255-e.r)/255:e.r*t.r*2/255,i.g=e.g>128?255-2*(255-t.g)*(255-e.g)/255:e.g*t.g*2/255,i.b=e.b>128?255-2*(255-t.b)*(255-e.b)/255:e.b*t.b*2/255,i}),i.register("difference",function(t,e){return{r:t.r-e.r,g:t.g-e.g,b:t.b-e.b}}),i.register("addition",function(t,e){return{r:e.r+t.r,g:e.g+t.g,b:e.b+t.b}}),i.register("exclusion",function(t,e){return{r:128-2*(e.r-128)*(t.r-128)/255,g:128-2*(e.g-128)*(t.g-128)/255,b:128-2*(e.b-128)*(t.b-128)/255}}),i.register("softLight",function(t,e){var i;return i={},i.r=e.r>128?255-(255-e.r)*(255-(t.r-128))/255:e.r*(t.r+128)/255,i.g=e.g>128?255-(255-e.g)*(255-(t.g-128))/255:e.g*(t.g+128)/255,i.b=e.b>128?255-(255-e.b)*(255-(t.b-128))/255:e.b*(t.b+128)/255,i}),i.register("lighten",function(t,e){return{r:e.r>t.r?e.r:t.r,g:e.g>t.g?e.g:t.g,b:e.b>t.b?e.b:t.b}}),i.register("darken",function(t,e){return{r:e.r>t.r?t.r:e.r,g:e.g>t.g?t.g:e.g,b:e.b>t.b?t.b:e.b}}),h.register("fillColor",function(){var t;return t=1===arguments.length?a.hexToRGB(arguments[0]):{r:arguments[0],g:arguments[1],b:arguments[2]},this.process("fillColor",function(e){return e.r=t.r,e.g=t.g,e.b=t.b,e.a=255,e})}),h.register("brightness",function(t){return t=Math.floor(255*(t/100)),this.process("brightness",function(e){return e.r+=t,e.g+=t,e.b+=t,e})}),h.register("saturation",function(t){return t*=-.01,this.process("saturation",function(e){var i;return i=Math.max(e.r,e.g,e.b),e.r!==i&&(e.r+=(i-e.r)*t),e.g!==i&&(e.g+=(i-e.g)*t),e.b!==i&&(e.b+=(i-e.b)*t),e})}),h.register("vibrance",function(t){return t*=-1,this.process("vibrance",function(e){var i,n,s;return s=Math.max(e.r,e.g,e.b),n=(e.r+e.g+e.b)/3,i=2*Math.abs(s-n)/255*t/100,e.r!==s&&(e.r+=(s-e.r)*i),e.g!==s&&(e.g+=(s-e.g)*i),e.b!==s&&(e.b+=(s-e.b)*i),e})}),h.register("greyscale",function(){return this.process("greyscale",function(t){var e;return e=n.luminance(t),t.r=e,t.g=e,t.b=e,t})}),h.register("contrast",function(t){return t=Math.pow((t+100)/100,2),this.process("contrast",function(e){return e.r/=255,e.r-=.5,e.r*=t,e.r+=.5,e.r*=255,e.g/=255,e.g-=.5,e.g*=t,e.g+=.5,e.g*=255,e.b/=255,e.b-=.5,e.b*=t,e.b+=.5,e.b*=255,e})}),h.register("hue",function(t){return this.process("hue",function(e){var i,n,s;return n=a.rgbToHSV(e.r,e.g,e.b),i=100*n.h,i+=Math.abs(t),i%=100,i/=100,n.h=i,s=a.hsvToRGB(n.h,n.s,n.v),s.a=e.a,s})}),h.register("colorize",function(){var t,e;return 2===arguments.length?(e=a.hexToRGB(arguments[0]),t=arguments[1]):4===arguments.length&&(e={r:arguments[0],g:arguments[1],b:arguments[2]},t=arguments[3]),this.process("colorize",function(i){return i.r-=(i.r-e.r)*(t/100),i.g-=(i.g-e.g)*(t/100),i.b-=(i.b-e.b)*(t/100),i})}),h.register("invert",function(){return this.process("invert",function(t){return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,t})}),h.register("sepia",function(t){return null==t&&(t=100),t/=100,this.process("sepia",function(e){return e.r=Math.min(255,e.r*(1-.607*t)+.769*e.g*t+.189*e.b*t),e.g=Math.min(255,.349*e.r*t+e.g*(1-.314*t)+.168*e.b*t),e.b=Math.min(255,.272*e.r*t+.534*e.g*t+e.b*(1-.869*t)),e})}),h.register("gamma",function(t){return this.process("gamma",function(e){return e.r=255*Math.pow(e.r/255,t),e.g=255*Math.pow(e.g/255,t),e.b=255*Math.pow(e.b/255,t),e})}),h.register("noise",function(t){return t=2.55*Math.abs(t),this.process("noise",function(e){var i;return i=n.randomRange(-1*t,t),e.r+=i,e.g+=i,e.b+=i,e})}),h.register("clip",function(t){return t=2.55*Math.abs(t),this.process("clip",function(e){return e.r>255-t?e.r=255:e.r<t&&(e.r=0),e.g>255-t?e.g=255:e.g<t&&(e.g=0),e.b>255-t?e.b=255:e.b<t&&(e.b=0),e})}),h.register("channels",function(t){var e,i;if("object"!=typeof t)return this;for(e in t)$.call(t,e)&&(i=t[e],0!==i?t[e]/=100:delete t[e]);return 0===t.length?this:this.process("channels",function(e){return null!=t.red&&(t.red>0?e.r+=(255-e.r)*t.red:e.r-=e.r*Math.abs(t.red)),null!=t.green&&(t.green>0?e.g+=(255-e.g)*t.green:e.g-=e.g*Math.abs(t.green)),null!=t.blue&&(t.blue>0?e.b+=(255-e.b)*t.blue:e.b-=e.b*Math.abs(t.blue)),e})}),h.register("curves",function(){var t,e,i,s,r,o,a,l,u,h,c,d;if(e=arguments[0],i=2<=arguments.length?D.call(arguments,1):[],"string"==typeof e&&(e=e.split("")),"v"===e[0]&&(e=["r","g","b"]),i.length<3||i.length>4)throw"Invalid number of arguments to curves filter";if(l=i[0],s=i[1],r=4===i.length?i[2]:i[1],o=i[i.length-1],t=n.bezier(l,s,r,o,0,255),l[0]>0)for(a=u=0,c=l[0];c>=0?c>u:u>c;a=c>=0?++u:--u)t[a]=l[1];if(o[0]<255)for(a=h=d=o[0];255>=d?255>=h:h>=255;a=255>=d?++h:--h)t[a]=o[1];return this.process("curves",function(i){var n,s;for(a=n=0,s=e.length;s>=0?s>n:n>s;a=s>=0?++n:--n)i[e[a]]=t[i[e[a]]];return i})}),h.register("exposure",function(t){var e,i,n;return n=Math.abs(t)/100,e=[0,255*n],i=[255-255*n,255],0>t&&(e=e.reverse(),i=i.reverse()),this.curves("rgb",[0,0],e,i,[255,255])}),s.Filter.register("boxBlur",function(){return this.processKernel("Box Blur",[1,1,1,1,1,1,1,1,1])}),s.Filter.register("heavyRadialBlur",function(){return this.processKernel("Heavy Radial Blur",[0,0,1,0,0,0,1,1,1,0,1,1,1,1,1,0,1,1,1,0,0,0,1,0,0])}),s.Filter.register("gaussianBlur",function(){return this.processKernel("Gaussian Blur",[1,4,6,4,1,4,16,24,16,4,6,24,36,24,6,4,16,24,16,4,1,4,6,4,1])}),s.Filter.register("motionBlur",function(t){var e;return e=0===t||180===t?[0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0]:t>0&&90>t||t>180&&270>t?[0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0]:90===t||270===t?[0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0]:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],this.processKernel("Motion Blur",e)}),s.Filter.register("sharpen",function(t){return null==t&&(t=100),t/=100,this.processKernel("Sharpen",[0,-t,0,-t,4*t+1,-t,0,-t,0])}),k={brightness:function(t,e,i){return t.r=t.r-t.r*e*i.strength,t.g=t.g-t.g*e*i.strength,t.b=t.b-t.b*e*i.strength,t},gamma:function(t,e,i){return t.r=255*Math.pow(t.r/255,Math.max(10*e*i.strength,1)),t.g=255*Math.pow(t.g/255,Math.max(10*e*i.strength,1)),t.b=255*Math.pow(t.b/255,Math.max(10*e*i.strength,1)),t},colorize:function(t,e,i){return t.r-=(t.r-i.color.r)*e,t.g-=(t.g-i.color.g)*e,t.b-=(t.b-i.color.b)*e,t}},h.register("vignette",function(t,e){var i,s,r,o;return null==e&&(e=60),"string"==typeof t&&"%"===t.substr(-1)&&(t=this.dimensions.height>this.dimensions.width?this.dimensions.width*(parseInt(t.substr(0,t.length-1),10)/100):this.dimensions.height*(parseInt(t.substr(0,t.length-1),10)/100)),e/=100,s=[this.dimensions.width/2,this.dimensions.height/2],o=Math.sqrt(Math.pow(s[0],2)+Math.pow(s[1],2)),r=o-t,i=n.bezier([0,1],[30,30],[70,60],[100,80]),this.process("vignette",function(o){var a,l,u;return u=this.locationXY(),a=n.distance(u.x,u.y,s[0],s[1]),a>r&&(l=Math.max(1,i[Math.round((a-r)/t*100)]/10*e),o.r=255*Math.pow(o.r/255,l),o.g=255*Math.pow(o.g/255,l),o.b=255*Math.pow(o.b/255,l)),o})}),h.register("rectangularVignette",function(t){var e,i,r,o,l,u,h;if(e={strength:50,cornerRadius:0,method:"brightness",color:{r:0,g:0,b:0}},t=x.extend(e,t),!t.size)return this;if("string"==typeof t.size)r=parseInt(t.size,10)/100,t.size={width:this.dimensions.width*r,height:this.dimensions.height*r};else if("object"==typeof t.size)for(h=["width","height"],l=0,u=h.length;u>l;l++)i=h[l],"string"==typeof t.size[i]&&(t.size[i]=this.dimensions[i]*(parseInt(t.size[i],10)/100));else"number"===t.size&&(o=t.size,t.size={width:o,height:o});return"string"==typeof t.cornerRadius&&(t.cornerRadius=t.size.width/2*(parseInt(t.cornerRadius,10)/100)),t.strength/=100,t.size.width=Math.floor(t.size.width),t.size.height=Math.floor(t.size.height),t.image={width:this.dimensions.width,height:this.dimensions.height},"colorize"===t.method&&"string"==typeof t.color&&(t.color=a.hexToRGB(t.color)),t.coords={left:(this.dimensions.width-t.size.width)/2,right:this.dimensions.width-t.coords.left,bottom:(this.dimensions.height-t.size.height)/2,top:this.dimensions.height-t.coords.bottom},t.corners=[{x:t.coords.left+t.cornerRadius,y:t.coords.top-t.cornerRadius},{x:t.coords.right-t.cornerRadius,y:t.coords.top-t.cornerRadius},{x:t.coords.right-t.cornerRadius,y:t.coords.bottom+t.cornerRadius},{x:t.coords.left+t.cornerRadius,y:t.coords.bottom+t.cornerRadius}],t.maxDist=n.distance(0,0,t.corners[3].x,t.corners[3].y)-t.cornerRadius,this.process("rectangularVignette",function(e){var i,n,r;return n=this.locationXY(),n.x>t.corners[0].x&&n.x<t.corners[1].x&&n.y>t.coords.bottom&&n.y<t.coords.top?e:n.x>t.coords.left&&n.x<t.coords.right&&n.y>t.corners[3].y&&n.y<t.corners[2].y?e:(n.x>t.corners[0].x&&n.x<t.corners[1].x&&n.y>t.coords.top?i=(n.y-t.coords.top)/t.maxDist:n.y>t.corners[2].y&&n.y<t.corners[1].y&&n.x>t.coords.right?i=(n.x-t.coords.right)/t.maxDist:n.x>t.corners[0].x&&n.x<t.corners[1].x&&n.y<t.coords.bottom?i=(t.coords.bottom-n.y)/t.maxDist:n.y>t.corners[2].y&&n.y<t.corners[1].y&&n.x<t.coords.left?i=(t.coords.left-n.x)/t.maxDist:n.x<=t.corners[0].x&&n.y>=t.corners[0].y?(r=s.distance(n.x,n.y,t.corners[0].x,t.corners[0].y),i=(r-t.cornerRadius)/t.maxDist):n.x>=t.corners[1].x&&n.y>=t.corners[1].y?(r=s.distance(n.x,n.y,t.corners[1].x,t.corners[1].y),i=(r-t.cornerRadius)/t.maxDist):n.x>=t.corners[2].x&&n.y<=t.corners[2].y?(r=s.distance(n.x,n.y,t.corners[2].x,t.corners[2].y),i=(r-t.cornerRadius)/t.maxDist):n.x<=t.corners[3].x&&n.y<=t.corners[3].y&&(r=s.distance(n.x,n.y,t.corners[3].x,t.corners[3].y),i=(r-t.cornerRadius)/t.maxDist),0>i?e:k[t.method](e,i,t))})}),function(){var t,e,i,n,r;return n=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],r=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],e=function(t,e,i,n,s,r,a){var l,u,h,c,d,p,g;return l="undefined"!=typeof exports&&null!==exports?new o:document.createElement("canvas"),l.width=t,l.height=e,c=i+Math.cos(s)*r*.5,p=n+Math.sin(s)*r*.5,d=i-Math.cos(s)*r*.5,g=n-Math.sin(s)*r*.5,u=l.getContext("2d"),h=u.createLinearGradient(c,p,d,g),a?(h.addColorStop(0,"white"),h.addColorStop(.5,"black"),h.addColorStop(1,"white")):(h.addColorStop(0,"white"),h.addColorStop(1,"black")),u.fillStyle=h,u.fillRect(0,0,t,e),u.getImageData(0,0,t,e)},i=function(t,e,i,n,s,r){var a,l,u;return a="undefined"!=typeof exports&&null!==exports?new o:document.createElement("canvas"),a.width=t,a.height=e,l=a.getContext("2d"),u=l.createRadialGradient(i,n,s,i,n,r),u.addColorStop(1,"white"),u.addColorStop(0,"black"),l.fillStyle=u,l.fillRect(0,0,t,e),l.getImageData(0,0,t,e)},t=function(){return this.r=0,this.g=0,this.b=0,this.a=0,this.next=null},s.Plugin.register("compoundBlur",function(e,i,s,o){var a,l,u,h,c,d,p,g,f,m,v,b,y,w,x,_,C,k,$,T,S,D,M,E,P,I,z,L,j,R,O,A,B,F,H,W,N,X,U,G,q,V,Y,Q,J,K,Z,te,ee,ie,ne,se,re,oe,ae,le,ue,he;for(V=this.dimensions.width,m=this.dimensions.height,x=this.pixelData,L=e.data,G=V*m,q=G<<2,M=[],b=ee=0;q>=0?q>ee:ee>q;b=q>=0?++ee:--ee)M[b]=x[b];for(c=0,N=o,o-=1;N-->=0;)if(C=i+.5|0,0!==C){for(C>256&&(C=256),d=C+C+1,U=V<<2,Y=V-1,v=m-1,j=C+1,X=j*(j+1)/2,W=new t,B=void 0,A=W,b=ie=1;d>=1?d>ie:ie>d;b=d>=1?++ie:--ie)A=A.next=new t,b===j&&(B=A);for(A.next=W,F=null,H=null,te=K=0,$=n[C],O=r[C],J=ne=0;m>=0?m>ne:ne>m;J=m>=0?++ne:--ne){for(P=p=a=z=f=u=0,I=j*(E=M[K]),g=j*(D=M[K+1]),l=j*(S=M[K+2]),z+=X*E,f+=X*D,u+=X*S,A=W,b=se=0;j>=0?j>se:se>j;b=j>=0?++se:--se)A.r=E,A.g=D,A.b=S,A=A.next;for(b=re=1;j>=1?j>re:re>j;b=j>=1?++re:--re)T=K+((b>Y?Y:b)<<2),z+=(A.r=E=M[T])*(R=j-b),f+=(A.g=D=M[T+1])*R,u+=(A.b=S=M[T+2])*R,P+=E,p+=D,a+=S,A=A.next;for(F=W,H=B,Q=oe=0;V>=0?V>oe:oe>V;Q=V>=0?++oe:--oe)M[K]=z*$>>O,M[K+1]=f*$>>O,M[K+2]=u*$>>O,z-=I,f-=g,u-=l,I-=F.r,g-=F.g,l-=F.b,T=te+((T=Q+j)<Y?T:Y)<<2,P+=F.r=M[T],p+=F.g=M[T+1],a+=F.b=M[T+2],z+=P,f+=p,u+=a,F=F.next,I+=E=H.r,g+=D=H.g,l+=S=H.b,P-=E,p-=D,a-=S,H=H.next,K+=4;te+=V}for(Q=ae=0;V>=0?V>ae:ae>V;Q=V>=0?++ae:--ae){for(p=a=P=f=u=z=0,K=Q<<2,I=j*(E=M[K]),g=j*(D=M[K+1]),l=j*(S=M[K+2]),z+=X*E,f+=X*D,u+=X*S,A=W,b=le=0;j>=0?j>le:le>j;b=j>=0?++le:--le)A.r=E,A.g=D,A.b=S,A=A.next;for(Z=V,b=ue=1;j>=1?j>ue:ue>j;b=j>=1?++ue:--ue)K=Z+Q<<2,z+=(A.r=E=M[K])*(R=j-b),f+=(A.g=D=M[K+1])*R,u+=(A.b=S=M[K+2])*R,P+=E,p+=D,a+=S,A=A.next,v>b&&(Z+=V);for(K=Q,F=W,H=B,J=he=0;m>=0?m>he:he>m;J=m>=0?++he:--he)T=K<<2,M[T]=z*$>>O,M[T+1]=f*$>>O,M[T+2]=u*$>>O,z-=I,f-=g,u-=l,I-=F.r,g-=F.g,l-=F.b,T=Q+((T=J+j)<v?T:v)*V<<2,z+=P+=F.r=M[T],f+=p+=F.g=M[T+1],u+=a+=F.b=M[T+2],F=F.next,I+=E=H.r,g+=D=H.g,l+=S=H.b,P-=E,p-=D,a-=S,H=H.next,K+=V}for(i*=s,b=G;--b>-1;)w=b<<2,k=(255&L[w+2])/255*o,_=0|k,_===c?(h=256*(k-(0|k)),y=256-h,x[w]=x[w]*y+M[w]*h>>8,x[w+1]=x[w+1]*y+M[w+1]*h>>8,x[w+2]=x[w+2]*y+M[w+2]*h>>8):_===c+1&&(x[w]=M[w],x[w+1]=M[w+1],x[w+2]=M[w+2]);c++}return this}),s.Filter.register("tiltShift",function(t){var i,n;return i={center:{x:this.dimensions.width/2,y:this.dimensions.height/2},angle:45,focusWidth:200,startRadius:3,radiusFactor:1.5,steps:3},t=x.extend(i,t),t.angle*=Math.PI/180,n=e(this.dimensions.width,this.dimensions.height,t.center.x,t.center.y,t.angle,t.focusWidth,!0),this.processPlugin("compoundBlur",[n,t.startRadius,t.radiusFactor,t.steps])}),s.Filter.register("radialBlur",function(t){var e,n,s,r;return e={size:50,center:{x:this.dimensions.width/2,y:this.dimensions.height/2},startRadius:3,radiusFactor:1.5,steps:3,radius:null},t=x.extend(e,t),t.radius||(t.radius=this.dimensions.width<this.dimensions.height?this.dimensions.height:this.dimensions.width),s=t.radius/2-t.size,r=t.radius/2,n=i(this.dimensions.width,this.dimensions.height,t.center.x,t.center.y,s,r),this.processPlugin("compoundBlur",[n,t.startRadius,t.radiusFactor,t.steps])})}(),s.Filter.register("edgeEnhance",function(){return this.processKernel("Edge Enhance",[0,0,0,-1,1,0,0,0,0])}),s.Filter.register("edgeDetect",function(){return this.processKernel("Edge Detect",[-1,-1,-1,-1,8,-1,-1,-1,-1])}),s.Filter.register("emboss",function(){return this.processKernel("Emboss",[-2,-1,0,-1,1,1,0,1,2])}),s.Filter.register("posterize",function(t){var e,i;return e=256/t,i=255/(t-1),this.process("posterize",function(t){return t.r=Math.floor(Math.floor(t.r/e)*i),t.g=Math.floor(Math.floor(t.g/e)*i),t.b=Math.floor(Math.floor(t.b/e)*i),t})}),s.Filter.register("vintage",function(t){return null==t&&(t=!0),this.greyscale(),this.contrast(5),this.noise(3),this.sepia(100),this.channels({red:8,blue:2,green:4}),this.gamma(.87),t?this.vignette("40%",30):void 0}),s.Filter.register("lomo",function(t){return null==t&&(t=!0),this.brightness(15),this.exposure(15),this.curves("rgb",[0,0],[200,0],[155,255],[255,255]),this.saturation(-20),this.gamma(1.8),t&&this.vignette("50%",60),this.brightness(5)}),s.Filter.register("clarity",function(t){return null==t&&(t=!1),this.vibrance(20),this.curves("rgb",[5,0],[130,150],[190,220],[250,255]),this.sharpen(15),this.vignette("45%",20),t&&(this.greyscale(),this.contrast(4)),this}),s.Filter.register("sinCity",function(){return this.contrast(100),this.brightness(15),this.exposure(10),this.posterize(80),this.clip(30),this.greyscale()}),s.Filter.register("sunrise",function(){return this.exposure(3.5),this.saturation(-5),this.vibrance(50),this.sepia(60),this.colorize("#e87b22",10),this.channels({red:8,blue:8}),this.contrast(5),this.gamma(1.2),this.vignette("55%",25)}),s.Filter.register("crossProcess",function(){return this.exposure(5),this.colorize("#e87b22",4),this.sepia(20),this.channels({blue:8,red:3}),this.curves("b",[0,0],[100,150],[180,180],[255,255]),this.contrast(15),this.vibrance(75),this.gamma(1.6)}),s.Filter.register("orangePeel",function(){return this.curves("rgb",[0,0],[100,50],[140,200],[255,255]),this.vibrance(-30),this.saturation(-30),this.colorize("#ff9000",30),this.contrast(-5),this.gamma(1.4)}),s.Filter.register("love",function(){return this.brightness(5),this.exposure(8),this.contrast(4),this.colorize("#c42007",30),this.vibrance(50),this.gamma(1.3)}),s.Filter.register("grungy",function(){return this.gamma(1.5),this.clip(25),this.saturation(-60),this.contrast(5),this.noise(5),this.vignette("50%",30)}),s.Filter.register("jarques",function(){return this.saturation(-35),this.curves("b",[20,0],[90,120],[186,144],[255,230]),this.curves("r",[0,0],[144,90],[138,120],[255,255]),this.curves("g",[10,0],[115,105],[148,100],[255,248]),this.curves("rgb",[0,0],[120,100],[128,140],[255,255]),this.sharpen(20)}),s.Filter.register("pinhole",function(){return this.greyscale(),this.sepia(10),this.exposure(10),this.contrast(15),this.vignette("60%",35)}),s.Filter.register("oldBoot",function(){return this.saturation(-20),this.vibrance(-50),this.gamma(1.1),this.sepia(30),this.channels({red:-10,blue:5}),this.curves("rgb",[0,0],[80,50],[128,230],[255,255]),this.vignette("60%",30)}),s.Filter.register("glowingSun",function(t){return null==t&&(t=!0),this.brightness(10),this.newLayer(function(){return this.setBlendingMode("multiply"),this.opacity(80),this.copyParent(),this.filter.gamma(.8),this.filter.contrast(50),this.filter.exposure(10)}),this.newLayer(function(){return this.setBlendingMode("softLight"),this.opacity(80),this.fillColor("#f49600")}),this.exposure(20),this.gamma(.8),t?this.vignette("45%",20):void 0}),s.Filter.register("hazyDays",function(){return this.gamma(1.2),this.newLayer(function(){return this.setBlendingMode("overlay"),this.opacity(60),this.copyParent(),this.filter.channels({red:5}),this.filter.stackBlur(15)}),this.newLayer(function(){return this.setBlendingMode("addition"),this.opacity(40),this.fillColor("#6899ba")}),this.newLayer(function(){return this.setBlendingMode("multiply"),this.opacity(35),this.copyParent(),this.filter.brightness(40),this.filter.vibrance(40),this.filter.exposure(30),this.filter.contrast(15),this.filter.curves("r",[0,40],[128,128],[128,128],[255,215]),this.filter.curves("g",[0,40],[128,128],[128,128],[255,215]),this.filter.curves("b",[0,40],[128,128],[128,128],[255,215]),this.filter.stackBlur(5)}),this.curves("r",[20,0],[128,158],[128,128],[235,255]),this.curves("g",[20,0],[128,128],[128,128],[235,255]),this.curves("b",[20,0],[128,108],[128,128],[235,255]),this.vignette("45%",20)}),s.Filter.register("herMajesty",function(){return this.brightness(40),this.colorize("#ea1c5d",10),this.curves("b",[0,10],[128,180],[190,190],[255,255]),this.newLayer(function(){return this.setBlendingMode("overlay"),this.opacity(50),this.copyParent(),this.filter.gamma(.7),this.newLayer(function(){return this.setBlendingMode("normal"),this.opacity(60),this.fillColor("#ea1c5d")})}),this.newLayer(function(){return this.setBlendingMode("multiply"),this.opacity(60),this.copyParent(),this.filter.saturation(50),this.filter.hue(90),this.filter.contrast(10)}),this.gamma(1.4),this.vibrance(-30),this.newLayer(function(){return this.opacity(10),this.fillColor("#e5f0ff")}),this}),s.Filter.register("nostalgia",function(){return this.saturation(20),this.gamma(1.4),this.greyscale(),this.contrast(5),this.sepia(100),this.channels({red:8,blue:2,green:4}),this.gamma(.8),this.contrast(5),this.exposure(10),this.newLayer(function(){return this.setBlendingMode("overlay"),this.copyParent(),this.opacity(55),this.filter.stackBlur(10)}),this.vignette("50%",30)}),s.Filter.register("hemingway",function(){return this.greyscale(),this.contrast(10),this.gamma(.9),this.newLayer(function(){return this.setBlendingMode("multiply"),this.opacity(40),this.copyParent(),this.filter.exposure(15),this.filter.contrast(15),this.filter.channels({green:10,red:5})
}),this.sepia(30),this.curves("rgb",[0,10],[120,90],[180,200],[235,255]),this.channels({red:5,green:-2}),this.exposure(15)}),s.Filter.register("concentrate",function(){return this.sharpen(40),this.saturation(-50),this.channels({red:3}),this.newLayer(function(){return this.setBlendingMode("multiply"),this.opacity(80),this.copyParent(),this.filter.sharpen(5),this.filter.contrast(50),this.filter.exposure(10),this.filter.channels({blue:5})}),this.brightness(10)}),s.Plugin.register("crop",function(t,e,i,n){var s,r;return null==i&&(i=0),null==n&&(n=0),"undefined"!=typeof exports&&null!==exports?s=new o(t,e):(s=document.createElement("canvas"),s.width=t,s.height=e),r=s.getContext("2d"),r.drawImage(this.canvas,i,n,t,e,0,0,t,e),this.replaceCanvas(s)}),s.Plugin.register("resize",function(t){var e,i;return null==t&&(t=null),null===t||null==t.width&&null==t.height?void g.error("Invalid or missing dimensions given for resize"):(null==t.width?t.width=this.canvas.width*t.height/this.canvas.height:null==t.height&&(t.height=this.canvas.height*t.width/this.canvas.width),"undefined"!=typeof exports&&null!==exports?e=new o(t.width,t.height):(e=document.createElement("canvas"),e.width=t.width,e.height=t.height),i=e.getContext("2d"),i.drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,t.width,t.height),this.replaceCanvas(e))}),s.Filter.register("crop",function(t,e,i,n){return null==i&&(i=0),null==n&&(n=0),this.processPlugin("crop",Array.prototype.slice.call(arguments,0))}),s.Filter.register("resize",function(){return this.processPlugin("resize",Array.prototype.slice.call(arguments,0))}),function(){var t,e,i;return e=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],i=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],t=function(){return this.r=0,this.g=0,this.b=0,this.a=0,this.next=null},s.Plugin.register("stackBlur",function(n){var s,r,o,a,l,u,h,c,d,p,g,f,m,v,b,y,w,x,_,C,k,$,T,S,D,M,E,P,I,z,L,j,R,O,A,B,F,H,W,N,X,U,G,q,V;if(!(isNaN(n)||1>n)){for(n|=0,b=this.pixelData,z=this.dimensions.width,c=this.dimensions.height,a=n+n+1,I=z<<2,L=z-1,d=c-1,C=n+1,P=C*(C+1)/2,E=new t,T=E,p=F=1;a>=1?a>F:F>a;p=a>=1?++F:--F)T=T.next=new t,p===C&&(S=T);for(T.next=E,D=null,M=null,B=O=0,g=e[n],$=i[n],R=H=0;c>=0?c>H:H>c;R=c>=0?++H:--H){for(w=l=s=_=h=o=0,x=C*(y=b[O]),u=C*(v=b[O+1]),r=C*(m=b[O+2]),_+=P*y,h+=P*v,o+=P*m,T=E,p=W=0;C>=0?C>W:W>C;p=C>=0?++W:--W)T.r=y,T.g=v,T.b=m,T=T.next;for(p=N=1;C>=1?C>N:N>C;p=C>=1?++N:--N)f=O+((p>L?L:p)<<2),_+=(T.r=y=b[f])*(k=C-p),h+=(T.g=v=b[f+1])*k,o+=(T.b=m=b[f+2])*k,w+=y,l+=v,s+=m,T=T.next;for(D=E,M=S,j=X=0;z>=0?z>X:X>z;j=z>=0?++X:--X)b[O]=_*g>>$,b[O+1]=h*g>>$,b[O+2]=o*g>>$,_-=x,h-=u,o-=r,x-=D.r,u-=D.g,r-=D.b,f=B+((f=j+n+1)<L?f:L)<<2,w+=D.r=b[f],l+=D.g=b[f+1],s+=D.b=b[f+2],_+=w,h+=l,o+=s,D=D.next,x+=y=M.r,u+=v=M.g,r+=m=M.b,w-=y,l-=v,s-=m,M=M.next,O+=4;B+=z}for(j=U=0;z>=0?z>U:U>z;j=z>=0?++U:--U){for(l=s=w=h=o=_=0,O=j<<2,x=C*(y=b[O]),u=C*(v=b[O+1]),r=C*(m=b[O+2]),_+=P*y,h+=P*v,o+=P*m,T=E,p=G=0;C>=0?C>G:G>C;p=C>=0?++G:--G)T.r=y,T.g=v,T.b=m,T=T.next;for(A=z,p=q=1;n>=1?n>=q:q>=n;p=n>=1?++q:--q)O=A+j<<2,_+=(T.r=y=b[O])*(k=C-p),h+=(T.g=v=b[O+1])*k,o+=(T.b=m=b[O+2])*k,w+=y,l+=v,s+=m,T=T.next,d>p&&(A+=z);for(O=j,D=E,M=S,R=V=0;c>=0?c>V:V>c;R=c>=0?++V:--V)f=O<<2,b[f]=_*g>>$,b[f+1]=h*g>>$,b[f+2]=o*g>>$,_-=x,h-=u,o-=r,x-=D.r,u-=D.g,r-=D.b,f=j+((f=R+C)<d?f:d)*z<<2,_+=w+=D.r=b[f],h+=l+=D.g=b[f+1],o+=s+=D.b=b[f+2],D=D.next,x+=y=M.r,u+=v=M.g,r+=m=M.b,w-=y,l-=v,s-=m,M=M.next,O+=z}return this}}),s.Filter.register("stackBlur",function(t){return this.processPlugin("stackBlur",[t])})}(),s.Filter.register("threshold",function(t){return this.process("threshold",function(e){var i;return i=.2126*e.r+.7152*e.g+.0722*e.b,t>i?(e.r=0,e.g=0,e.b=0):(e.r=255,e.g=255,e.b=255),e})})}).call(this),jQuery.trumbowyg={langs:{da:{viewHTML:"Vis HTML",formatting:"Formatter",p:"Afsnit",blockquote:"Citat",code:"Kode",header:"Overskrift",bold:"Fed",italic:"Kursiv",strikethrough:"Gennemstreg",underline:"Understreg",strong:"Vigtig",em:"Fremhæv",del:"Slettet",unorderedList:"Uordnet liste",orderedList:"Ordnet liste",insertImage:"Indsæt billede",insertVideo:"Indsæt video",link:"Link",createLink:"Indsæt link",unlink:"Fjern link",justifyLeft:"Venstrestil",justifyCenter:"Centrer",justifyRight:"Højrestil",justifyFull:"Lige margener",horizontalRule:"Horisontal linie",fullscreen:"Fuld skærm",close:"Luk",submit:"Bekræft",reset:"Annuller",invalidUrl:"Ugyldig URL",required:"Påkrævet",description:"Beskrivelse",title:"Titel",text:"Tekst"}},opts:{},btnsGrps:{design:["bold","italic","underline","strikethrough"],semantic:["strong","em","del"],justify:["justifyLeft","justifyCenter","justifyRight","justifyFull"],lists:["unorderedList","orderedList"]}},function(t,e,i,n){"use strict";i.fn.trumbowyg=function(t,e){if(t===Object(t)||!t)return this.each(function(){i(this).data("trumbowyg")||i(this).data("trumbowyg",new s(this,t))});if(1===this.length)try{var n=i(this).data("trumbowyg");switch(t){case"openModal":return n.openModal(e.title,e.content);case"closeModal":return n.closeModal();case"openModalInsert":return n.openModalInsert(e.title,e.fields,e.callback);case"saveSelection":return n.saveSelection();case"getSelection":return n.selection;case"getSelectedText":return n.selection+"";case"restoreSelection":return n.restoreSelection();case"destroy":return n.destroy();case"empty":return n.empty();case"lang":return n.lang;case"duration":return n.o.duration;case"html":return n.html(e)}}catch(r){}return!1};var s=function(t,n){var s=this;s.doc=t.ownerDocument||e,s.$e=i(t),s.$creator=i(t),n=i.extend(!0,{},n,i.trumbowyg.opts),s.lang="undefined"==typeof n.lang||"undefined"==typeof i.trumbowyg.langs[n.lang]?i.trumbowyg.langs.en:i.extend(!0,{},i.trumbowyg.langs.en,i.trumbowyg.langs[n.lang]),s.o=i.extend(!0,{},{lang:"en",dir:"ltr",duration:200,mobile:!1,tablet:!0,closable:!1,fullscreenable:!0,fixedBtnPane:!1,fixedFullWidth:!1,autogrow:!1,prefix:"trumbowyg-",convertLink:!0,semantic:!1,resetCss:!1,btns:["viewHTML","|","formatting","|",i.trumbowyg.btnsGrps.design,"|","link","|","insertImage","|",i.trumbowyg.btnsGrps.justify,"|",i.trumbowyg.btnsGrps.lists,"|","horizontalRule"],btnsAdd:[],btnsDef:{viewHTML:{func:"toggle"},p:{func:"formatBlock"},blockquote:{func:"formatBlock"},h1:{func:"formatBlock",title:s.lang.header+" 1"},h2:{func:"formatBlock",title:s.lang.header+" 2"},h3:{func:"formatBlock",title:s.lang.header+" 3"},h4:{func:"formatBlock",title:s.lang.header+" 4"},bold:{},italic:{},underline:{},strikethrough:{},strong:{func:"bold"},em:{func:"italic"},del:{func:"strikethrough"},createLink:{},unlink:{},insertImage:{},justifyLeft:{},justifyCenter:{},justifyRight:{},justifyFull:{},unorderedList:{func:"insertUnorderedList"},orderedList:{func:"insertOrderedList"},horizontalRule:{func:"insertHorizontalRule"},formatting:{dropdown:["p","blockquote","h1","h2","h3","h4"]},link:{dropdown:["createLink","unlink"]}}},n),s.o.semantic&&!n.btns?s.o.btns=["viewHTML","|","formatting","|",i.trumbowyg.btnsGrps.semantic,"|","link","|","insertImage","|",i.trumbowyg.btnsGrps.justify,"|",i.trumbowyg.btnsGrps.lists,"|","horizontalRule"]:n&&n.btns&&(s.o.btns=n.btns),s.init()};s.prototype={init:function(){var t=this;return t.height=t.$e.css("height"),t.isEnabled()?void t.buildEditor(!0):(t.buildEditor(),t.buildBtnPane(),t.fixedBtnPaneEvents(),void t.buildOverlay())},buildEditor:function(t){var e=this,n=e.o.prefix,s="";if(t!==!0)e.$box=i("<div/>",{"class":n+"box "+n+e.o.lang+" trumbowyg"}),e.isTextarea=!0,e.$e.is("textarea")?e.$editor=i("<div/>"):(e.$editor=e.$e,e.$e=e.buildTextarea().val(e.$e.val()),e.isTextarea=!1),e.$creator.is("[placeholder]")&&e.$editor.attr("placeholder",e.$creator.attr("placeholder")),e.$e.hide().addClass(n+"textarea"),e.isTextarea?(s=e.$e.val(),e.$box.insertAfter(e.$e).append(e.$editor).append(e.$e)):(s=e.$editor.html(),e.$box.insertAfter(e.$editor).append(e.$e).append(e.$editor),e.syncCode()),e.$editor.addClass(n+"editor").attr("contenteditable",!0).attr("dir",e.lang._dir||e.o.dir).html(s),e.o.resetCss&&e.$editor.addClass(n+"reset-css"),e.o.autogrow||i.each([e.$editor,e.$e],function(t,i){i.css({height:e.height,overflow:"auto"})}),e.o.semantic&&(e.$editor.html(e.$editor.html().replace("<br>","</p><p>").replace("&nbsp;","")),e.semanticCode()),e.$editor.on("dblclick","img",function(t){var n=i(this);e.openModalInsert(e.lang.insertImage,{url:{label:"URL",value:n.attr("src"),required:!0},alt:{label:"description",value:n.attr("alt")}},function(t){n.attr({src:t.url,alt:t.alt})}),t.stopPropagation()}).on("keyup",function(t){e.semanticCode(!1,13===t.which)}).on("focus",function(){e.$creator.trigger("tbwfocus")}).on("blur",function(){e.syncCode(),e.$creator.trigger("tbwblur")});else if(!e.$e.is("textarea")){var r=e.buildTextarea().val(e.$e.val());e.$e.hide().after(r)}},buildTextarea:function(){return i("<textarea/>",{name:this.$e.attr("id"),height:this.height})},buildBtnPane:function(){var e=this,s=e.o.prefix;if(e.o.btns!==!1){e.$btnPane=i("<ul/>",{"class":s+"button-pane"}),i.each(e.o.btns.concat(e.o.btnsAdd),function(t,r){try{var o=r.split("btnGrp-");o[1]!==n&&(r=i.trumbowyg.btnsGrps[o[1]])}catch(a){}i.isArray(r)||(r=[r]),i.each(r,function(t,n){try{var r=i("<li/>");"|"===n?r.addClass(s+"separator"):e.isSupportedBtn(n)&&r.append(e.buildBtn(n)),e.$btnPane.append(r)}catch(o){}})});var r=i("<li/>",{"class":s+"not-disable "+s+"buttons-right"});e.o.fullscreenable&&r.append(e.buildRightBtn("fullscreen").on("click",function(){var n=s+"fullscreen";e.$box.toggleClass(n),e.$box.hasClass(n)?(i("body").css("overflow","hidden"),i.each([e.$editor,e.$e],function(){i(this).css({height:"calc(100% - 35px)",overflow:"auto"})}),e.$btnPane.css("width","100%")):(i("body").css("overflow","auto"),e.$box.removeAttr("style"),e.o.autogrow||i.each([e.$editor,e.$e],function(){i(this).css("height",e.height)})),i(t).trigger("scroll")})),e.o.closable&&r.append(e.buildRightBtn("close").on("click",function(){e.$box.hasClass(s+"fullscreen")&&i("body").css("overflow","auto"),e.destroy()})),r.not(":empty")&&e.$btnPane.append(r),e.$box.prepend(e.$btnPane)}},buildBtn:function(t){var e=this,n=e.o.prefix,s=e.o.btnsDef[t],r=s.dropdown,o=e.lang[t]||t,a=i("<button/>",{type:"button","class":n+t+"-button"+(s.ico?" "+n+s.ico+"-button":""),text:s.text||s.title||o,title:s.title||s.text||o,mousedown:function(o){return(!r||e.$box.find("."+t+"-"+n+"dropdown").is(":hidden"))&&i("body",e.doc).trigger("mousedown"),!e.$btnPane.hasClass(n+"disable")||i(this).hasClass(n+"active")||i(this).parent().hasClass(n+"not-disable")?(e.execCmd((r?"dropdown":!1)||s.func||t,s.param||t),o.stopPropagation(),void o.preventDefault()):!1}});if(r){a.addClass(n+"open-dropdown");var l=n+"dropdown",u=i("<div/>",{"class":t+"-"+l+" "+l+" "+n+"fixed-top"});i.each(r,function(t,i){e.o.btnsDef[i]&&e.isSupportedBtn(i)&&u.append(e.buildSubBtn(i))}),e.$box.append(u.hide())}return a},buildSubBtn:function(t){var e=this,n=e.o.btnsDef[t];return i("<button/>",{type:"button",text:n.text||n.title||e.lang[t]||t,style:n.style||null,mousedown:function(s){i("body",e.doc).trigger("mousedown"),e.execCmd(n.func||t,n.param||t),s.stopPropagation()}})},buildRightBtn:function(t){return i("<button/>",{type:"button","class":this.o.prefix+t+"-button",title:this.lang[t],text:this.lang[t]})},isSupportedBtn:function(t){var e=this.o.btnsDef[t];return"function"!=typeof e.isSupported||e.isSupported()},buildOverlay:function(){var t=this;return t.$overlay=i("<div/>",{"class":t.o.prefix+"overlay"}).css({top:t.$btnPane.outerHeight(),height:parseInt(t.$editor.outerHeight())+1+"px"}).appendTo(t.$box),t.$overlay},showOverlay:function(){var e=this;i(t).trigger("scroll"),e.$overlay.fadeIn(e.o.duration),e.$box.addClass(e.o.prefix+"box-blur")},hideOverlay:function(){var t=this;t.$overlay.fadeOut(t.o.duration/4),t.$box.removeClass(t.o.prefix+"box-blur")},fixedBtnPaneEvents:function(){var e=this,n=e.o.fixedFullWidth;e.o.fixedBtnPane&&(e.isFixed=!1,i(t).on("scroll resize",function(){if(e.$box){e.syncCode();var s=i(t).scrollTop(),r=e.$box.offset().top+1,o=s-r>0&&s-r-parseInt(e.height)<0,a=e.$btnPane,l=a.css("height"),u=a.outerHeight();o?(e.isFixed||(e.isFixed=!0,a.css({position:"fixed",top:0,left:n?"0":"auto",zIndex:7}),i([e.$editor,e.$e]).css({marginTop:l})),a.css({width:n?"100%":parseInt(e.$box.css("width"))-1+"px"}),i("."+e.o.prefix+"fixed-top",e.$box).css({position:n?"fixed":"absolute",top:n?u:parseInt(u)+(s-r)+"px",zIndex:15})):e.isFixed&&(e.isFixed=!1,a.removeAttr("style"),i([e.$editor,e.$e]).css({marginTop:0}),i("."+e.o.prefix+"fixed-top",e.$box).css({position:"absolute",top:u}))}}))},destroy:function(){var t=this,e=t.o.prefix,i=t.height,n=t.html();t.$box.after(t.isTextarea?t.$e.css({height:i}).val(n).removeClass(e+"textarea").show():t.$editor.css({height:i}).removeClass(e+"editor").removeAttr("contenteditable").html(n).show()),t.$box.remove(),t.$creator.removeData("trumbowyg")},empty:function(){this.$e.val(""),this.syncCode(!0)},toggle:function(){var t=this,e=t.o.prefix;t.semanticCode(!1,!0),t.$editor.toggle(),t.$e.toggle(),t.$btnPane.toggleClass(e+"disable"),t.$btnPane.find("."+e+"viewHTML-button").toggleClass(e+"active")},dropdown:function(e){var n=this,s=n.doc,r=n.o.prefix,o=n.$box.find("."+e+"-"+r+"dropdown"),a=n.$btnPane.find("."+r+e+"-button");if(o.is(":hidden")){var l=a.offset().left;a.addClass(r+"active"),o.css({position:"absolute",top:n.$btnPane.outerHeight(),left:n.o.fixedFullWidth&&n.isFixed?l+"px":l-n.$btnPane.offset().left+"px"}).show(),i(t).trigger("scroll"),i("body",s).on("mousedown",function(){i("."+r+"dropdown",s).hide(),i("."+r+"active",s).removeClass(r+"active"),i("body",s).off("mousedown")})}else i("body",s).trigger("mousedown")},html:function(t){var e=this;return t?(e.$e.val(t),e.syncCode(!0),e):e.$e.val()},syncCode:function(t){var e=this;!t&&e.$editor.is(":visible")?e.$e.val(e.$editor.html()):e.$editor.html(e.$e.val()),e.o.autogrow&&(e.height=e.$editor.css("height"),e.$e.css({height:e.height}))},semanticCode:function(t,e){var n=this;n.syncCode(t),n.o.semantic&&(n.semanticTag("b","strong"),n.semanticTag("i","em"),n.semanticTag("strike","del"),e&&(n.$editor.contents().filter(function(){return 3===this.nodeType&&i.trim(this.nodeValue).length>0}).wrap("<p></p>").end().filter("br").remove(),n.saveSelection(),n.semanticTag("div","p"),n.restoreSelection()),n.$e.val(n.$editor.html()))},semanticTag:function(t,e){i(t,this.$editor).each(function(){i(this).replaceWith(function(){return"<"+e+">"+i(this).html()+"</"+e+">"})})},createLink:function(){var t=this;t.saveSelection(),t.openModalInsert(t.lang.createLink,{url:{label:"URL",value:"http://",required:!0},title:{label:t.lang.title,value:t.selection},text:{label:t.lang.text,value:t.selection}},function(e){t.execCmd("createLink",e.url);var n=i('a[href="'+e.url+'"]:not([title])',t.$box);return e.text.length>0&&n.text(e.text),e.title.length>0&&n.attr("title",e.title),!0})},insertImage:function(){var t=this;t.saveSelection(),t.openModalInsert(t.lang.insertImage,{url:{label:"URL",value:"http://",required:!0},alt:{label:t.lang.description,value:t.selection}},function(e){return t.execCmd("insertImage",e.url),i('img[src="'+e.url+'"]:not([alt])',t.$box).attr("alt",e.alt),!0})},execCmd:function(t,e){var i=this;"dropdown"!=t&&i.$editor.focus();try{i[t](e)}catch(n){try{t(e,i)}catch(s){"insertHorizontalRule"==t?e=null:"formatBlock"==t&&(-1!==navigator.userAgent.indexOf("MSIE")||navigator.appVersion.indexOf("Trident/")>0)&&(e="<"+e+">"),i.doc.execCommand(t,!1,e)}}i.syncCode()},openModal:function(e,n){var s=this,r=s.o.prefix;if(i("."+r+"modal-box",s.$box).size()>0)return!1;s.saveSelection(),s.showOverlay(),s.$btnPane.addClass(r+"disable");var o=i("<div/>",{"class":r+"modal "+r+"fixed-top"}).css({top:parseInt(s.$btnPane.css("height"))+1+"px"}).appendTo(s.$box);s.$overlay.one("click",function(t){t.preventDefault(),o.trigger(r+"cancel")});var a=i("<form/>",{action:"",html:n}).on("submit",function(t){t.preventDefault(),o.trigger(r+"confirm")}).on("reset",function(t){t.preventDefault(),o.trigger(r+"cancel")}),l=i("<div/>",{"class":r+"modal-box",html:a}).css({top:"-"+parseInt(s.$btnPane.outerHeight())+"px",opacity:0}).appendTo(o).animate({top:0,opacity:1},s.o.duration/2);return i("<span/>",{text:e,"class":r+"modal-title"}).prependTo(l),l.find("input:first").focus(),s.buildModalBtn("submit",l),s.buildModalBtn("reset",l),i(t).trigger("scroll"),o},buildModalBtn:function(t,e){var n=this,s=n.o.prefix;return i("<button/>",{"class":s+"modal-button "+s+"modal-"+t,type:t,text:n.lang[t]||t}).appendTo(e.find("form"))},closeModal:function(){var t=this,e=t.o.prefix;t.$btnPane.removeClass(e+"disable"),t.$overlay.off();var n=i("."+e+"modal-box",t.$box);n.animate({top:"-"+n.css("height")},t.o.duration/2,function(){i(this).parent().remove(),t.hideOverlay()})},openModalInsert:function(t,e,s){var r=this,o=r.o.prefix,a=r.lang,l="";for(var u in e){var h=e[u],c=h.label===n?a[u]?a[u]:u:a[h.label]?a[h.label]:h.label;h.name===n&&(h.name=u),h.pattern||"url"!==u||(h.pattern=/^(http|https):\/\/([\w~#!:.?+=&%@!\-\/]+)$/,h.patternError=a.invalidUrl),l+='<label><input type="'+(h.type||"text")+'" name="'+h.name+'" value="'+(h.value||"")+'"><span class="'+o+'input-infos"><span>'+c+"</span></span></label>"}return r.openModal(t,l).on(o+"confirm",function(){var t=i(this).find("form"),n=!0,a={};for(var l in e){var u=i('input[name="'+l+'"]',t);a[l]=i.trim(u.val()),e[l].required&&""===a[l]?(n=!1,r.addErrorOnModalField(u,r.lang.required)):e[l].pattern&&!e[l].pattern.test(a[l])&&(n=!1,r.addErrorOnModalField(u,e[l].patternError))}n&&(r.restoreSelection(),s(a,e)&&(r.syncCode(),r.closeModal(),i(this).off(o+"confirm")))}).one(o+"cancel",function(){i(this).off(o+"confirm"),r.closeModal(),r.restoreSelection()})},addErrorOnModalField:function(t,e){var n=this.o.prefix,s=t.parent();t.on("change keyup",function(){s.removeClass(n+"input-error")}),s.addClass(n+"input-error").find("input+span").append(i("<span/>",{"class":n+"msg-error",text:e}))},saveSelection:function(){var e=this,i=e.doc;if(e.selection=null,t.getSelection){var n=t.getSelection();n.getRangeAt&&n.rangeCount&&(e.selection=n.getRangeAt(0))}else i.selection&&i.selection.createRange&&(e.selection=i.selection.createRange())},restoreSelection:function(){var e=this,i=e.selection;if(i)if(t.getSelection){var n=t.getSelection();n.removeAllRanges(),n.addRange(i)}else e.doc.selection&&i.select&&i.select()},isEnabled:function(){var t=new RegExp("(iPad|webOS)"),e=new RegExp("(iPhone|iPod|Android|BlackBerry|Windows Phone|ZuneWP7)"),i=navigator.userAgent;return this.o.tablet===!0&&t.test(i)||this.o.mobile===!0&&e.test(i)}}}(window,document,jQuery),$(function(){window.onpopstate=function(t){t.state&&("nyt"===t.state.type||"medarbejder"===t.state.type)&&(document.title=t.state.name+" · Faaborg Gymnasium",resetOldPush(),setPopstateReading($("#post_"+t.state.ID)))},$(".archive-entry.reading").length&&($(".archive-entry.reading"),$(".archive-entry.reading"),($("body").hasClass("single-nyt")||$("body").hasClass("archive-nyt"))&&($(".archive-entry.reading").next("hr").prependTo(".post-list"),$(".archive-entry.reading").prependTo(".post-list")),$("html, body").delay(200).animate({scrollTop:$(".archive-entry.reading").offset().top-20},200)),$(".archive-entry").click(function(){$("body").hasClass("post-type-archive-tema")||"content-add-btn"===$(this).attr("id")||"add-edit-content"===$(this).attr("id")||$("body").hasClass("page")||$(this).hasClass("reading")||(resetOldPush(),addPush($(this),"nyt"),setPopstateReading($(this)))}),$(".mb-entry.reading").length&&($(".mb-entry.reading").next("hr").prependTo(".post-list"),$(".mb-entry.reading").prependTo(".post-list")),$(".mb-entry").click(function(){$(this).hasClass("reading")||(resetOldPush(),addPush($(this),"medarbejder"),setPopstateReading($(this)))}),$(".page .archive-entry").bind("click",function(){var t=$(this).attr("data-href");console.log(t),window.location=t})}),$(function(){$("#slides .slide").length>1&&($("#slides").owlCarousel({items:1,autoplay:!0,autoplayTimeout:$("#slideshow").attr("data-duration"),smartSpeed:$("#slideshow").attr("data-transition"),autoplayHoverPause:!1,dots:!0,animateOut:"fadeOut",animateIn:"fadeIn",baseClass:"slide",theme:"owl-theme",lazyLoad:!0,lazyFollow:!0,lazyEffect:"fade",autoHeight:!1,loop:!0}),$("#slides a.slide").click(function(t){t.preventDefault();var e=$(this).attr("href"),i=$(this).attr("target");return""==e?!1:void("_blank"===i?window.open(e,"_blank"):window.location=e)}))});var smamoStatus={getUser:function(){$.ajax({url:$("form").attr("action"),type:"POST",data:"action=get-user",dataType:"json",success:function(t){smamoStatus.adjustGUI(t)}})},adjustGUI:function(t){t.login?($(".status-comment a.login, .status-comment a.register").hide(),$(".user-info span").html(t.login.name)):($(".status-comment textarea").attr("disabled","disabled"),$(".user-info").hide(),$('.status-comment input[type="submit"]').hide())},sendStatus:function(t){var e=t.parents("form"),i=e.attr("action");data=e.serialize(),e.hasClass("loading")||(e.addClass("loading"),$.ajax({url:i,type:"POST",data:data,dataType:"json",success:function(t){smamoStatus.sendResponse(t,e)}}))},sendResponse:function(t,e){e.removeClass("loading").find("textarea").val("");var i=(e.find("textarea"),$('<div class="status-post" style="display:block;"></div>')),n=$('<span class="status-post-content"></span>'),s=$('<span class="status-post-author"></span>');n.html(t.msg),s.html(t.user.name),i.append(n,s),e.prev(".status-posts").append(i).append('<hr class="red" style="display:block;">')},register:function(t){window.location.href=t.attr("href")},login:function(t){window.location.href=t.attr("href")}};jQuery(function(t){smamoStatus.getUser(),autosize(t(".status-comment textarea")),t(".status-comment").on({click:function(e){var i=t(e.target);i.is('input[type="submit"]')?(e.preventDefault(),smamoStatus.sendStatus(i)):i.is("a.login")?(e.preventDefault(),smamoStatus.login(i)):i.is("a.register")&&(e.preventDefault(),smamoStatus.register(i))}}),t(".status-post-count").on({click:function(e){e.preventDefault();var i=t(this).parents(".status-posts");i.find(".status-post").show(),i.find("hr").show(),t(this).hide()}})}),$(function(){$("#projekt-tema-preview").length&&$.ajax({type:"POST",url:wpURL+"/async/projekt-tema-preview.php",dataType:"json",data:"",success:function(t){t.error?console.log(t.error):PTmakePreviews(t)}})});var setID=function(t){wp.media.view.settings.post.id=t},setThumbID=function(t){wp.media.view.settings.post.featuredImageId=t},getID=function(){return wp.media.view.settings.post.id},getThumbID=function(){return wp.media.view.settings.post.featuredImageId};jQuery(function(t){t("#page-center").on("click",function(e){var i=t(e.target);if(i.is(".single-tema-post .toggle-new")||i.is(".single-tema .toggle-new"))e.preventDefault(),i.toggleClass("editor-active"),t(".fg-editor").removeClass("inactive").children(".submit").html("Opret nyt indlæg"),t("html,body").animate({scrollTop:t(".fg-editor").offset().top-20}),setID(-1),setThumbID(-1),t('.fg-editor form input[name="title"]').val(""),t('.fg-editor form input[name="subheading"]').val("");else if(i.is(".single-tema-post .fg-editor .submit")||i.is(".single-tema .fg-editor .submit"))e.preventDefault(),i.hasClass("loading")||(i.toggleClass("loading"),sendData());else if(i.is("#page-center .dashicons-trash"))e.preventDefault(),setID(i.closest(".edit-delete").attr("id").replace("edit-","")),confirm("Er du sikker på du vil flytte indlægget til papirkurven?")&&deletePost(getID());else if(i.is("#page-center .dashicons-edit")){e.preventDefault(),setID(i.closest(".edit-delete").attr("id").replace("edit-","")),setThumbID(-1);{var n=t("#post_"+getID()),s=n.find(".preread-inner h4").html(),r=n.find(".preread-inner h6").html(),o=n.find(".archive-content").html();n.find(".archive-img").attr("data-attachment")}tinyMCE.activeEditor?tinyMCE.activeEditor.setContent(o):t("#smamo_front_editor").val(o),n.hide().nextAll(".archive-entry, .red").insertAfter(".fg-editor").animate({opacity:.4},300).addClass("disabled"),n.prevAll(".archive-entry, .red").animate({opacity:.4},300).addClass("disabled"),t(".archive-entry").unbind("click"),t(".toggle-new").toggleClass("editor-active"),t(".fg-editor").removeClass("inactive").children(".submit").html("Opdater indlæg"),t('.fg-editor input[name="title"]').val(s),t('.fg-editor input[name="subheading"]').val(r),t("html,body").animate({scrollTop:t(".fg-editor").offset().top-40},100)}else i.is("#page-center .cancel")&&(e.preventDefault(),location.reload())})}),$(".load img").css("opacity",.2),$(window).load(function(){$(".filter img").each(function(){var t=$(this),e=t.attr("src");$.ajax({type:"POST",url:wpURL+"/async/image-filter.php",dataType:"json",data:{img:e},success:function(e){var i=$('<img src="'+e.img+'"/>');i.load(function(){t.attr("src",e.img).animate({opacity:1},100)})}})}),$("#page-center img").each(function(){var t=$(this),e=t.attr("src");$.ajax({type:"POST",url:wpURL+"/async/image-filter.php",dataType:"json",data:{img:e},success:function(e){var i=$('<img src="'+e.img+'"/>');i.load(function(){t.attr("src",e.img).animate({opacity:1},100)})}})}),$(".ubermenu-image").each(function(){var t=$(this),e=t.attr("src");$.ajax({type:"POST",url:wpURL+"/async/image-filter.php",dataType:"json",data:{img:e},success:function(e){var i=$('<img src="'+e.img+'"/>');i.load(function(){t.attr("src",e.img).animate({opacity:1},100)})}})}),$(".smamo_img_widget img").each(function(){var t=$(this),e=t.attr("src");$.ajax({type:"POST",url:wpURL+"/async/image-filter.php",dataType:"json",data:{img:e},success:function(e){var i=$('<img src="'+e.img+'"/>');i.load(function(){t.attr("src",e.img).animate({opacity:1},100)})}})})}),$(function(){var t,e=Math.floor(10*Math.random()+1);$("#page-center li").each(function(){$(this).attr("data-list-style",e),t=Math.floor(10*Math.random()+1),t===e&&t++,e=t}),console.log("Chromecast available")}),jQuery(function(){var t=smamoGetCookie("cookieOK");""!=t||makeCookieNotificationElement()}),$(function(){$(".mb-entry .dropdown").on("click",function(t){t.preventDefault();var e=$(this),i=$(t.target);(i.is("h6 strong")||i.is("h6"))&&(e.hasClass("active")?(e.children("p").slideUp(100),e.removeClass("active")):(e.children("p").slideDown(100),e.addClass("active")))})}),$(function(){$(".gallery").length&&($(".gallery a").addClass("fancybox"),$(".fancybox").fancybox({closeClick:!0,helpers:{overlay:{css:{background:"rgba(33, 33, 33, 0.65)"}},loading:{css:{}}}}))});