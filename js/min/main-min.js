function UrlExists(t){var e=new XMLHttpRequest;return e.open("HEAD",t,!1),e.send(),200==e.status}function uber_op(t,e,i){if(!ubermenu_data.hasOwnProperty(t))return i;var n=ubermenu_data[t];if(e.hasOwnProperty("datatype"))switch(e.datatype){case"numeric":n=parseInt(n);break;case"boolean":n="on"==n||1==n||"1"==n}return n}function uberMenu_openMega(t){jQuery(".ubermenu").ubermenu("openSubmenu",jQuery(t))}function uberMenu_openFlyout(t){jQuery(".ubermenu").ubermenu("openSubmenu",jQuery(t))}function uberMenu_close(t){jQuery(".ubermenu").ubermenu("closeSubmenu",jQuery(t))}function uberMenu_redrawSubmenus(){jQuery(".ubermenu").ubermenu("positionSubmenus")}function addPush(t,e){var i=t.attr("data-href"),n=t.attr("title"),s=t.attr("id").replace("post_","");i||(i=t.attr("href")),history.pushState({url:i,name:n,ID:s,type:e},s,i),document.title=n+" · Faaborg Gymnasium"}function resetOldPush(){var t=$(".reading");t.length&&t.removeClass("reading")}function setPopstateReading(t){t.addClass("reading"),(t.hasClass("mb-entry")||$("body").hasClass("single-nyt")||$("body").hasClass("archive-nyt"))&&(t.next("hr").prependTo(".post-list"),t.prependTo(".post-list")),$("html, body").delay(200).animate({scrollTop:t.offset().top-20},200)}function owlslidePTPreviews(){var t=$("#projekt-tema-preview");t.owlCarousel({responsive:{0:{items:2},480:{items:3},768:{items:4},960:{items:6},1280:{items:8}},pagination:!1,dots:!1,nav:!1})}function PTmakePreviews(t){var e=$("#projekt-tema-preview");for(key in t){var i=$("<a></a>"),n=$("<div></div>");i.addClass("pt-preview-box"),i.addClass("pt-preview-theme-"+t[key].theme),i.attr("data-post-id",t[key].id),i.attr("href",t[key].url),i.append(n);var s=t[key].img;1==t[key].img_should_filter&&i.addClass("image-filter"),null!==s&&i.css("background-image","url("+s+")");var r=$('<div class="title"></div>'),o=$("<span></span>");o.html(t[key].title),r.append(o),n.append(r),e.prepend(i)}e.removeClass("top"),owlslidePTPreviews(),addFilteredImages()}function addFilteredImages(){$(".pt-preview-box").each(function(){if($(this).hasClass("image-filter")){var t=$(this).css("background-image").replace("url(","").replace(")",""),e=$(this);$.ajax({type:"POST",url:wpURL+"/async/image-filter.php",dataType:"json",data:{img:t},success:function(t){var i=$('<img src="'+t.img+'"/>');i.load(function(){e.css({"background-image":"url("+t.img+")"}),e.children("div").css({"background-color":"transparent","background-image":"none"})})}})}})}function sendData(){var t;t=tinyMCE.activeEditor?tinyMCE.activeEditor.getContent():$("#smamo_front_editor").val();var e={image:getThumbID(),postID:getID(),title:$('.fg-editor form input[name="title"]').val(),subheading:$('.fg-editor form input[name="subheading"]').val(),type:"tema-post",theme_id:$('.fg-editor form input[name="theme_id"]').val(),content:t},i=$.param(e),n=$(".fg-editor form").attr("action");""===e.title?(alert("Føj en titel til dit indlæg inden du gemmer"),$(".fg-editor .submit.loading").toggleClass("loading")):""===e.content?(alert("Føj et indhold til dit indlæg inden du gemmer"),$(".fg-editor .submit.loading").toggleClass("loading")):$.ajax({url:n,type:"POST",data:i,dataType:"json",success:function(t){window.location.href=t.href}})}function deletePost(t){var e={id:getID(),type:"tema-post",theme_id:$('.fg-editor form input[name="theme_id"]').val()},i=$.param(e);$.ajax({url:wpURL+"/async/delete-post.php",type:"POST",data:i,dataType:"json",success:function(t){window.location.href=t.href}})}function smamoSetCookie(t,e,i){var n=new Date;n.setTime(n.getTime()+24*i*60*60*1e3);var s="expires="+n.toUTCString();document.cookie=t+"="+e+"; "+s}function smamoGetCookie(t){for(var e=t+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var s=i[n];" "==s.charAt(0);)s=s.substring(1);if(0==s.indexOf(e))return s.substring(e.length,s.length)}return""}function makeCookieNotificationElement(){var t=$('<div id="cookie-notify"></div>'),e=$("<div></div>"),i=$("<span>Faaborg Gymnasiums hjemmeside anvender cookies</span>"),n=$('<a href="http://faaborg-gym.dk/cookie/">Læs mere</a>'),s=$('<a id="cookieOK" href="#">Godkend</a>');e.append(i),e.append(s),e.append(n),t.append(e),t.appendTo("body").animate({opacity:.9},1e3),s.click(function(e){e.preventDefault(),smamoSetCookie("cookieOK","true",365),t.remove()})}!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):t("undefined"!=typeof jQuery?jQuery:window.Zepto)}(function(t){"use strict";function e(e){var i=e.data;e.isDefaultPrevented()||(e.preventDefault(),t(e.target).ajaxSubmit(i))}function i(e){var i=e.target,n=t(i);if(!n.is("[type=submit],[type=image]")){var s=n.closest("[type=submit]");if(0===s.length)return;i=s[0]}var r=this;if(r.clk=i,"image"==i.type)if(void 0!==e.offsetX)r.clk_x=e.offsetX,r.clk_y=e.offsetY;else if("function"==typeof t.fn.offset){var o=n.offset();r.clk_x=e.pageX-o.left,r.clk_y=e.pageY-o.top}else r.clk_x=e.pageX-i.offsetLeft,r.clk_y=e.pageY-i.offsetTop;setTimeout(function(){r.clk=r.clk_x=r.clk_y=null},100)}function n(){if(t.fn.ajaxSubmit.debug){var e="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e)}}var s={};s.fileapi=void 0!==t("<input type='file'/>").get(0).files,s.formdata=void 0!==window.FormData;var r=!!t.fn.prop;t.fn.attr2=function(){if(!r)return this.attr.apply(this,arguments);var t=this.prop.apply(this,arguments);return t&&t.jquery||"string"==typeof t?t:this.attr.apply(this,arguments)},t.fn.ajaxSubmit=function(e){function i(i){var n,s,r=t.param(i,e.traditional).split("&"),o=r.length,a=[];for(n=0;o>n;n++)r[n]=r[n].replace(/\+/g," "),s=r[n].split("="),a.push([decodeURIComponent(s[0]),decodeURIComponent(s[1])]);return a}function o(n){for(var s=new FormData,r=0;r<n.length;r++)s.append(n[r].name,n[r].value);if(e.extraData){var o=i(e.extraData);for(r=0;r<o.length;r++)o[r]&&s.append(o[r][0],o[r][1])}e.data=null;var a=t.extend(!0,{},t.ajaxSettings,e,{contentType:!1,processData:!1,cache:!1,type:l||"POST"});e.uploadProgress&&(a.xhr=function(){var i=t.ajaxSettings.xhr();return i.upload&&i.upload.addEventListener("progress",function(t){var i=0,n=t.loaded||t.position,s=t.total;t.lengthComputable&&(i=Math.ceil(n/s*100)),e.uploadProgress(t,n,s,i)},!1),i}),a.data=null;var u=a.beforeSend;return a.beforeSend=function(t,i){i.data=e.formData?e.formData:s,u&&u.call(this,t,i)},t.ajax(a)}function a(i){function s(t){var e=null;try{t.contentWindow&&(e=t.contentWindow.document)}catch(t){n("cannot get iframe.contentWindow document: "+t)}if(e)return e;try{e=t.contentDocument?t.contentDocument:t.document}catch(i){n("cannot get iframe.contentDocument: "+i),e=t.document}return e}function o(){function e(){try{var t=s(v).readyState;n("state = "+t),t&&"uninitialized"==t.toLowerCase()&&setTimeout(e,50)}catch(t){n("Server abort: ",t," (",t.name,")"),a(S),_&&clearTimeout(_),_=void 0}}var i=c.attr2("target"),r=c.attr2("action"),o="multipart/form-data",u=c.attr("enctype")||c.attr("encoding")||o;k.setAttribute("target",g),(!l||/post/i.test(l))&&k.setAttribute("method","POST"),r!=d.url&&k.setAttribute("action",d.url),d.skipEncodingOverride||l&&!/post/i.test(l)||c.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),d.timeout&&(_=setTimeout(function(){x=!0,a(T)},d.timeout));var h=[];try{if(d.extraData)for(var p in d.extraData)d.extraData.hasOwnProperty(p)&&h.push(t.isPlainObject(d.extraData[p])&&d.extraData[p].hasOwnProperty("name")&&d.extraData[p].hasOwnProperty("value")?t('<input type="hidden" name="'+d.extraData[p].name+'">').val(d.extraData[p].value).appendTo(k)[0]:t('<input type="hidden" name="'+p+'">').val(d.extraData[p]).appendTo(k)[0]);d.iframeTarget||m.appendTo("body"),v.attachEvent?v.attachEvent("onload",a):v.addEventListener("load",a,!1),setTimeout(e,15);try{k.submit()}catch(t){var f=document.createElement("form").submit;f.apply(k)}}finally{k.setAttribute("action",r),k.setAttribute("enctype",u),i?k.setAttribute("target",i):c.removeAttr("target"),t(h).remove()}}function a(e){if(!b.aborted&&!I){if(P=s(v),P||(n("cannot access response document"),e=S),e===T&&b)return b.abort("timeout"),void C.reject(b,"timeout");if(e==S&&b)return b.abort("server abort"),void C.reject(b,"error","server abort");if(P&&P.location.href!=d.iframeSrc||x){v.detachEvent?v.detachEvent("onload",a):v.removeEventListener("load",a,!1);var i,r="success";try{if(x)throw"timeout";var o="xml"==d.dataType||P.XMLDocument||t.isXMLDoc(P);if(n("isXml="+o),!o&&window.opera&&(null===P.body||!P.body.innerHTML)&&--L)return n("requeing onLoad callback, DOM not available"),void setTimeout(a,250);var l=P.body?P.body:P.documentElement;b.responseText=l?l.innerHTML:null,b.responseXML=P.XMLDocument?P.XMLDocument:P,o&&(d.dataType="xml"),b.getResponseHeader=function(t){var e={"content-type":d.dataType};return e[t.toLowerCase()]},l&&(b.status=Number(l.getAttribute("status"))||b.status,b.statusText=l.getAttribute("statusText")||b.statusText);var u=(d.dataType||"").toLowerCase(),h=/(json|script|text)/.test(u);if(h||d.textarea){var c=P.getElementsByTagName("textarea")[0];if(c)b.responseText=c.value,b.status=Number(c.getAttribute("status"))||b.status,b.statusText=c.getAttribute("statusText")||b.statusText;else if(h){var g=P.getElementsByTagName("pre")[0],f=P.getElementsByTagName("body")[0];g?b.responseText=g.textContent?g.textContent:g.innerText:f&&(b.responseText=f.textContent?f.textContent:f.innerText)}}else"xml"==u&&!b.responseXML&&b.responseText&&(b.responseXML=z(b.responseText));try{E=R(b,u,d)}catch(t){r="parsererror",b.error=i=t||r}}catch(t){n("error caught: ",t),r="error",b.error=i=t||r}b.aborted&&(n("upload aborted"),r=null),b.status&&(r=b.status>=200&&b.status<300||304===b.status?"success":"error"),"success"===r?(d.success&&d.success.call(d.context,E,"success",b),C.resolve(b.responseText,"success",b),p&&t.event.trigger("ajaxSuccess",[b,d])):r&&(void 0===i&&(i=b.statusText),d.error&&d.error.call(d.context,b,r,i),C.reject(b,"error",i),p&&t.event.trigger("ajaxError",[b,d,i])),p&&t.event.trigger("ajaxComplete",[b,d]),p&&!--t.active&&t.event.trigger("ajaxStop"),d.complete&&d.complete.call(d.context,b,r),I=!0,d.timeout&&clearTimeout(_),setTimeout(function(){d.iframeTarget?m.attr("src",d.iframeSrc):m.remove(),b.responseXML=null},100)}}}var u,h,d,p,g,m,v,b,y,w,x,_,k=c[0],C=t.Deferred();if(C.abort=function(t){b.abort(t)},i)for(h=0;h<f.length;h++)u=t(f[h]),r?u.prop("disabled",!1):u.removeAttr("disabled");if(d=t.extend(!0,{},t.ajaxSettings,e),d.context=d.context||d,g="jqFormIO"+(new Date).getTime(),d.iframeTarget?(m=t(d.iframeTarget),w=m.attr2("name"),w?g=w:m.attr2("name",g)):(m=t('<iframe name="'+g+'" src="'+d.iframeSrc+'" />'),m.css({position:"absolute",top:"-1000px",left:"-1000px"})),v=m[0],b={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(e){var i="timeout"===e?"timeout":"aborted";n("aborting upload... "+i),this.aborted=1;try{v.contentWindow.document.execCommand&&v.contentWindow.document.execCommand("Stop")}catch(t){}m.attr("src",d.iframeSrc),b.error=i,d.error&&d.error.call(d.context,b,i,e),p&&t.event.trigger("ajaxError",[b,d,i]),d.complete&&d.complete.call(d.context,b,i)}},p=d.global,p&&0===t.active++&&t.event.trigger("ajaxStart"),p&&t.event.trigger("ajaxSend",[b,d]),d.beforeSend&&d.beforeSend.call(d.context,b,d)===!1)return d.global&&t.active--,C.reject(),C;if(b.aborted)return C.reject(),C;y=k.clk,y&&(w=y.name,w&&!y.disabled&&(d.extraData=d.extraData||{},d.extraData[w]=y.value,"image"==y.type&&(d.extraData[w+".x"]=k.clk_x,d.extraData[w+".y"]=k.clk_y)));var T=1,S=2,D=t("meta[name=csrf-token]").attr("content"),M=t("meta[name=csrf-param]").attr("content");M&&D&&(d.extraData=d.extraData||{},d.extraData[M]=D),d.forceSync?o():setTimeout(o,10);var E,P,I,L=50,z=t.parseXML||function(t,e){return window.ActiveXObject?(e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(t)):e=(new DOMParser).parseFromString(t,"text/xml"),e&&e.documentElement&&"parsererror"!=e.documentElement.nodeName?e:null},j=t.parseJSON||function(t){return window.eval("("+t+")")},R=function(e,i,n){var s=e.getResponseHeader("content-type")||"",r="xml"===i||!i&&s.indexOf("xml")>=0,o=r?e.responseXML:e.responseText;return r&&"parsererror"===o.documentElement.nodeName&&t.error&&t.error("parsererror"),n&&n.dataFilter&&(o=n.dataFilter(o,i)),"string"==typeof o&&("json"===i||!i&&s.indexOf("json")>=0?o=j(o):("script"===i||!i&&s.indexOf("javascript")>=0)&&t.globalEval(o)),o};return C}if(!this.length)return n("ajaxSubmit: skipping submit process - no element selected"),this;var l,u,h,c=this;"function"==typeof e?e={success:e}:void 0===e&&(e={}),l=e.type||this.attr2("method"),u=e.url||this.attr2("action"),h="string"==typeof u?t.trim(u):"",h=h||window.location.href||"",h&&(h=(h.match(/^([^#]+)/)||[])[1]),e=t.extend(!0,{url:h,success:t.ajaxSettings.success,type:l||t.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},e);var d={};if(this.trigger("form-pre-serialize",[this,e,d]),d.veto)return n("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(e.beforeSerialize&&e.beforeSerialize(this,e)===!1)return n("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var p=e.traditional;void 0===p&&(p=t.ajaxSettings.traditional);var g,f=[],m=this.formToArray(e.semantic,f);if(e.data&&(e.extraData=e.data,g=t.param(e.data,p)),e.beforeSubmit&&e.beforeSubmit(m,this,e)===!1)return n("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[m,this,e,d]),d.veto)return n("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var v=t.param(m,p);g&&(v=v?v+"&"+g:g),"GET"==e.type.toUpperCase()?(e.url+=(e.url.indexOf("?")>=0?"&":"?")+v,e.data=null):e.data=v;var b=[];if(e.resetForm&&b.push(function(){c.resetForm()}),e.clearForm&&b.push(function(){c.clearForm(e.includeHidden)}),!e.dataType&&e.target){var y=e.success||function(){};b.push(function(i){var n=e.replaceTarget?"replaceWith":"html";t(e.target)[n](i).each(y,arguments)})}else e.success&&b.push(e.success);if(e.success=function(t,i,n){for(var s=e.context||this,r=0,o=b.length;o>r;r++)b[r].apply(s,[t,i,n||c,c])},e.error){var w=e.error;e.error=function(t,i,n){var s=e.context||this;w.apply(s,[t,i,n,c])}}if(e.complete){var x=e.complete;e.complete=function(t,i){var n=e.context||this;x.apply(n,[t,i,c])}}var _=t("input[type=file]:enabled",this).filter(function(){return""!==t(this).val()}),k=_.length>0,C="multipart/form-data",T=c.attr("enctype")==C||c.attr("encoding")==C,S=s.fileapi&&s.formdata;n("fileAPI :"+S);var D,M=(k||T)&&!S;e.iframe!==!1&&(e.iframe||M)?e.closeKeepAlive?t.get(e.closeKeepAlive,function(){D=a(m)}):D=a(m):D=(k||T)&&S?o(m):t.ajax(e),c.removeData("jqxhr").data("jqxhr",D);for(var E=0;E<f.length;E++)f[E]=null;return this.trigger("form-submit-notify",[this,e]),this},t.fn.ajaxForm=function(s){if(s=s||{},s.delegation=s.delegation&&t.isFunction(t.fn.on),!s.delegation&&0===this.length){var r={s:this.selector,c:this.context};return!t.isReady&&r.s?(n("DOM not ready, queuing ajaxForm"),t(function(){t(r.s,r.c).ajaxForm(s)}),this):(n("terminating; zero elements found by selector"+(t.isReady?"":" (DOM not ready)")),this)}return s.delegation?(t(document).off("submit.form-plugin",this.selector,e).off("click.form-plugin",this.selector,i).on("submit.form-plugin",this.selector,s,e).on("click.form-plugin",this.selector,s,i),this):this.ajaxFormUnbind().bind("submit.form-plugin",s,e).bind("click.form-plugin",s,i)},t.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},t.fn.formToArray=function(e,i){var n=[];if(0===this.length)return n;var r,o=this[0],a=this.attr("id"),l=e?o.getElementsByTagName("*"):o.elements;if(l&&!/MSIE [678]/.test(navigator.userAgent)&&(l=t(l).get()),a&&(r=t(':input[form="'+a+'"]').get(),r.length&&(l=(l||[]).concat(r))),!l||!l.length)return n;var u,h,c,d,p,g,f;for(u=0,g=l.length;g>u;u++)if(p=l[u],c=p.name,c&&!p.disabled)if(e&&o.clk&&"image"==p.type)o.clk==p&&(n.push({name:c,value:t(p).val(),type:p.type}),n.push({name:c+".x",value:o.clk_x},{name:c+".y",value:o.clk_y}));else if(d=t.fieldValue(p,!0),d&&d.constructor==Array)for(i&&i.push(p),h=0,f=d.length;f>h;h++)n.push({name:c,value:d[h]});else if(s.fileapi&&"file"==p.type){i&&i.push(p);var m=p.files;if(m.length)for(h=0;h<m.length;h++)n.push({name:c,value:m[h],type:p.type});else n.push({name:c,value:"",type:p.type})}else null!==d&&"undefined"!=typeof d&&(i&&i.push(p),n.push({name:c,value:d,type:p.type,required:p.required}));if(!e&&o.clk){var v=t(o.clk),b=v[0];c=b.name,c&&!b.disabled&&"image"==b.type&&(n.push({name:c,value:v.val()}),n.push({name:c+".x",value:o.clk_x},{name:c+".y",value:o.clk_y}))}return n},t.fn.formSerialize=function(e){return t.param(this.formToArray(e))},t.fn.fieldSerialize=function(e){var i=[];return this.each(function(){var n=this.name;if(n){var s=t.fieldValue(this,e);if(s&&s.constructor==Array)for(var r=0,o=s.length;o>r;r++)i.push({name:n,value:s[r]});else null!==s&&"undefined"!=typeof s&&i.push({name:this.name,value:s})}}),t.param(i)},t.fn.fieldValue=function(e){for(var i=[],n=0,s=this.length;s>n;n++){var r=this[n],o=t.fieldValue(r,e);null===o||"undefined"==typeof o||o.constructor==Array&&!o.length||(o.constructor==Array?t.merge(i,o):i.push(o))}return i},t.fieldValue=function(e,i){var n=e.name,s=e.type,r=e.tagName.toLowerCase();if(void 0===i&&(i=!0),i&&(!n||e.disabled||"reset"==s||"button"==s||("checkbox"==s||"radio"==s)&&!e.checked||("submit"==s||"image"==s)&&e.form&&e.form.clk!=e||"select"==r&&-1==e.selectedIndex))return null;if("select"==r){var o=e.selectedIndex;if(0>o)return null;for(var a=[],l=e.options,u="select-one"==s,h=u?o+1:l.length,c=u?o:0;h>c;c++){var d=l[c];if(d.selected){var p=d.value;if(p||(p=d.attributes&&d.attributes.value&&!d.attributes.value.specified?d.text:d.value),u)return p;a.push(p)}}return a}return t(e).val()},t.fn.clearForm=function(e){return this.each(function(){t("input,select,textarea",this).clearFields(e)})},t.fn.clearFields=t.fn.clearInputs=function(e){var i=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var n=this.type,s=this.tagName.toLowerCase();i.test(n)||"textarea"==s?this.value="":"checkbox"==n||"radio"==n?this.checked=!1:"select"==s?this.selectedIndex=-1:"file"==n?/MSIE/.test(navigator.userAgent)?t(this).replaceWith(t(this).clone(!0)):t(this).val(""):e&&(e===!0&&/hidden/.test(n)||"string"==typeof e&&t(this).is(e))&&(this.value="")})},t.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},t.fn.enable=function(t){return void 0===t&&(t=!0),this.each(function(){this.disabled=!t})},t.fn.selected=function(e){return void 0===e&&(e=!0),this.each(function(){var i=this.type;if("checkbox"==i||"radio"==i)this.checked=e;else if("option"==this.tagName.toLowerCase()){var n=t(this).parent("select");e&&n[0]&&"select-one"==n[0].type&&n.find("option").selected(!1),this.selected=e}})},t.fn.ajaxSubmit.debug=!1}),function(t,e,$,i){"use strict";var n=$("html"),s=$(t),r=$(e),o=$.fancybox=function(){o.open.apply(this,arguments)},a=navigator.userAgent.match(/msie/i),l=null,u=e.createTouch!==i,h=function(t){return t&&t.hasOwnProperty&&t instanceof $},c=function(t){return t&&"string"===$.type(t)},d=function(t){return c(t)&&t.indexOf("%")>0},p=function(t){return t&&!(t.style.overflow&&"hidden"===t.style.overflow)&&(t.clientWidth&&t.scrollWidth>t.clientWidth||t.clientHeight&&t.scrollHeight>t.clientHeight)},g=function(t,e){var i=parseInt(t,10)||0;return e&&d(t)&&(i=o.getViewport()[e]/100*i),Math.ceil(i)},f=function(t,e){return g(t,e)+"px"};$.extend(o,{version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!u,fitToView:!0,aspectRatio:!1,topRatio:.5,leftRatio:.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(a?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:$.noop,beforeLoad:$.noop,afterLoad:$.noop,beforeShow:$.noop,afterShow:$.noop,beforeChange:$.noop,beforeClose:$.noop,afterClose:$.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(t,e){if(t&&($.isPlainObject(e)||(e={}),!1!==o.close(!0)))return $.isArray(t)||(t=h(t)?$(t).get():[t]),$.each(t,function(n,s){var r={},a,l,u,d,p,g,f;"object"===$.type(s)&&(s.nodeType&&(s=$(s)),h(s)?(r={href:s.data("fancybox-href")||s.attr("href"),title:s.data("fancybox-title")||s.attr("title"),isDom:!0,element:s},$.metadata&&$.extend(!0,r,s.metadata())):r=s),a=e.href||r.href||(c(s)?s:null),l=e.title!==i?e.title:r.title||"",u=e.content||r.content,d=u?"html":e.type||r.type,!d&&r.isDom&&(d=s.data("fancybox-type"),d||(p=s.prop("class").match(/fancybox\.(\w+)/),d=p?p[1]:null)),c(a)&&(d||(o.isImage(a)?d="image":o.isSWF(a)?d="swf":"#"===a.charAt(0)?d="inline":c(s)&&(d="html",u=s)),"ajax"===d&&(g=a.split(/\s+/,2),a=g.shift(),f=g.shift())),u||("inline"===d?a?u=$(c(a)?a.replace(/.*(?=#[^\s]+$)/,""):a):r.isDom&&(u=s):"html"===d?u=a:d||a||!r.isDom||(d="inline",u=s)),$.extend(r,{href:a,type:d,content:u,title:l,selector:f}),t[n]=r}),o.opts=$.extend(!0,{},o.defaults,e),e.keys!==i&&(o.opts.keys=!!e.keys&&$.extend({},o.defaults.keys,e.keys)),o.group=t,o._start(o.opts.index)},cancel:function(){var t=o.coming;t&&!1!==o.trigger("onCancel")&&(o.hideLoading(),o.ajaxLoad&&o.ajaxLoad.abort(),o.ajaxLoad=null,o.imgPreload&&(o.imgPreload.onload=o.imgPreload.onerror=null),t.wrap&&t.wrap.stop(!0,!0).trigger("onReset").remove(),o.coming=null,o.current||o._afterZoomOut(t))},close:function(t){o.cancel(),!1!==o.trigger("beforeClose")&&(o.unbindEvents(),o.isActive&&(o.isOpen&&t!==!0?(o.isOpen=o.isOpened=!1,o.isClosing=!0,$(".fancybox-item, .fancybox-nav").remove(),o.wrap.stop(!0,!0).removeClass("fancybox-opened"),o.transitions[o.current.closeMethod]()):($(".fancybox-wrap").stop(!0).trigger("onReset").remove(),o._afterZoomOut())))},play:function(t){var e=function(){clearTimeout(o.player.timer)},i=function(){e(),o.current&&o.player.isActive&&(o.player.timer=setTimeout(o.next,o.current.playSpeed))},n=function(){e(),r.unbind(".player"),o.player.isActive=!1,o.trigger("onPlayEnd")},s=function(){o.current&&(o.current.loop||o.current.index<o.group.length-1)&&(o.player.isActive=!0,r.bind({"onCancel.player beforeClose.player":n,"onUpdate.player":i,"beforeLoad.player":e}),i(),o.trigger("onPlayStart"))};t===!0||!o.player.isActive&&t!==!1?s():n()},next:function(t){var e=o.current;e&&(c(t)||(t=e.direction.next),o.jumpto(e.index+1,t,"next"))},prev:function(t){var e=o.current;e&&(c(t)||(t=e.direction.prev),o.jumpto(e.index-1,t,"prev"))},jumpto:function(t,e,n){var s=o.current;s&&(t=g(t),o.direction=e||s.direction[t>=s.index?"next":"prev"],o.router=n||"jumpto",s.loop&&(t<0&&(t=s.group.length+t%s.group.length),t%=s.group.length),s.group[t]!==i&&(o.cancel(),o._start(t)))},reposition:function(t,e){var i=o.current,n=i?i.wrap:null,s;n&&(s=o._getPosition(e),t&&"scroll"===t.type?(delete s.position,n.stop(!0,!0).animate(s,200)):(n.css(s),i.pos=$.extend({},i.dim,s)))},update:function(t){var e=t&&t.type,i=!e||"orientationchange"===e;i&&(clearTimeout(l),l=null),o.isOpen&&!l&&(l=setTimeout(function(){var n=o.current;n&&!o.isClosing&&(o.wrap.removeClass("fancybox-tmp"),(i||"load"===e||"resize"===e&&n.autoResize)&&o._setDimension(),"scroll"===e&&n.canShrink||o.reposition(t),o.trigger("onUpdate"),l=null)},i&&!u?0:300))},toggle:function(t){o.isOpen&&(o.current.fitToView="boolean"===$.type(t)?t:!o.current.fitToView,u&&(o.wrap.removeAttr("style").addClass("fancybox-tmp"),o.trigger("onUpdate")),o.update())},hideLoading:function(){r.unbind(".loading"),$("#fancybox-loading").remove()},showLoading:function(){var t,e;o.hideLoading(),t=$('<div id="fancybox-loading"><div></div></div>').click(o.cancel).appendTo("body"),r.bind("keydown.loading",function(t){27===(t.which||t.keyCode)&&(t.preventDefault(),o.cancel())}),o.defaults.fixed||(e=o.getViewport(),t.css({position:"absolute",top:.5*e.h+e.y,left:.5*e.w+e.x}))},getViewport:function(){var e=o.current&&o.current.locked||!1,i={x:s.scrollLeft(),y:s.scrollTop()};return e?(i.w=e[0].clientWidth,i.h=e[0].clientHeight):(i.w=u&&t.innerWidth?t.innerWidth:s.width(),i.h=u&&t.innerHeight?t.innerHeight:s.height()),i},unbindEvents:function(){o.wrap&&h(o.wrap)&&o.wrap.unbind(".fb"),r.unbind(".fb"),s.unbind(".fb")},bindEvents:function(){var t=o.current,e;t&&(s.bind("orientationchange.fb"+(u?"":" resize.fb")+(t.autoCenter&&!t.locked?" scroll.fb":""),o.update),e=t.keys,e&&r.bind("keydown.fb",function(n){var s=n.which||n.keyCode,r=n.target||n.srcElement;return(27!==s||!o.coming)&&void(n.ctrlKey||n.altKey||n.shiftKey||n.metaKey||r&&(r.type||$(r).is("[contenteditable]"))||$.each(e,function(e,r){return t.group.length>1&&r[s]!==i?(o[e](r[s]),n.preventDefault(),!1):$.inArray(s,r)>-1?(o[e](),n.preventDefault(),!1):void 0}))}),$.fn.mousewheel&&t.mouseWheel&&o.wrap.bind("mousewheel.fb",function(e,i,n,s){for(var r=e.target||null,a=$(r),l=!1;a.length&&!(l||a.is(".fancybox-skin")||a.is(".fancybox-wrap"));)l=p(a[0]),a=$(a).parent();0===i||l||o.group.length>1&&!t.canShrink&&(s>0||n>0?o.prev(s>0?"down":"left"):(s<0||n<0)&&o.next(s<0?"up":"right"),e.preventDefault())}))},trigger:function(t,e){var i,n=e||o.coming||o.current;if(n){if($.isFunction(n[t])&&(i=n[t].apply(n,Array.prototype.slice.call(arguments,1))),i===!1)return!1;n.helpers&&$.each(n.helpers,function(e,i){i&&o.helpers[e]&&$.isFunction(o.helpers[e][t])&&o.helpers[e][t]($.extend(!0,{},o.helpers[e].defaults,i),n)}),r.trigger(t)}},isImage:function(t){return c(t)&&t.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(t){return c(t)&&t.match(/\.(swf)((\?|#).*)?$/i)},_start:function(t){var e={},i,n,s,r,a;if(t=g(t),i=o.group[t]||null,!i)return!1;if(e=$.extend(!0,{},o.opts,i),r=e.margin,a=e.padding,"number"===$.type(r)&&(e.margin=[r,r,r,r]),"number"===$.type(a)&&(e.padding=[a,a,a,a]),e.modal&&$.extend(!0,e,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}}),e.autoSize&&(e.autoWidth=e.autoHeight=!0),"auto"===e.width&&(e.autoWidth=!0),"auto"===e.height&&(e.autoHeight=!0),e.group=o.group,e.index=t,o.coming=e,!1===o.trigger("beforeLoad"))return void(o.coming=null);if(s=e.type,n=e.href,!s)return o.coming=null,!(!o.current||!o.router||"jumpto"===o.router)&&(o.current.index=t,o[o.router](o.direction));if(o.isActive=!0,"image"!==s&&"swf"!==s||(e.autoHeight=e.autoWidth=!1,e.scrolling="visible"),"image"===s&&(e.aspectRatio=!0),"iframe"===s&&u&&(e.scrolling="scroll"),e.wrap=$(e.tpl.wrap).addClass("fancybox-"+(u?"mobile":"desktop")+" fancybox-type-"+s+" fancybox-tmp "+e.wrapCSS).appendTo(e.parent||"body"),$.extend(e,{skin:$(".fancybox-skin",e.wrap),outer:$(".fancybox-outer",e.wrap),inner:$(".fancybox-inner",e.wrap)}),$.each(["Top","Right","Bottom","Left"],function(t,i){e.skin.css("padding"+i,f(e.padding[t]))}),o.trigger("onReady"),"inline"===s||"html"===s){if(!e.content||!e.content.length)return o._error("content")}else if(!n)return o._error("href");"image"===s?o._loadImage():"ajax"===s?o._loadAjax():"iframe"===s?o._loadIframe():o._afterLoad()},_error:function(t){$.extend(o.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:t,content:o.coming.tpl.error}),o._afterLoad()},_loadImage:function(){var t=o.imgPreload=new Image;t.onload=function(){this.onload=this.onerror=null,o.coming.width=this.width/o.opts.pixelRatio,o.coming.height=this.height/o.opts.pixelRatio,o._afterLoad()},t.onerror=function(){this.onload=this.onerror=null,o._error("image")},t.src=o.coming.href,t.complete!==!0&&o.showLoading()},_loadAjax:function(){var t=o.coming;o.showLoading(),o.ajaxLoad=$.ajax($.extend({},t.ajax,{url:t.href,error:function(t,e){o.coming&&"abort"!==e?o._error("ajax",t):o.hideLoading()},success:function(e,i){"success"===i&&(t.content=e,o._afterLoad())}}))},_loadIframe:function(){var t=o.coming,e=$(t.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",u?"auto":t.iframe.scrolling).attr("src",t.href);$(t.wrap).bind("onReset",function(){try{$(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(t){}}),t.iframe.preload&&(o.showLoading(),e.one("load",function(){$(this).data("ready",1),u||$(this).bind("load.fb",o.update),$(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show(),o._afterLoad()})),t.content=e.appendTo(t.inner),t.iframe.preload||o._afterLoad()},_preloadImages:function(){var t=o.group,e=o.current,i=t.length,n=e.preload?Math.min(e.preload,i-1):0,s,r;for(r=1;r<=n;r+=1)s=t[(e.index+r)%i],"image"===s.type&&s.href&&((new Image).src=s.href)},_afterLoad:function(){var t=o.coming,e=o.current,i="fancybox-placeholder",n,s,r,a,l,u;if(o.hideLoading(),t&&o.isActive!==!1){if(!1===o.trigger("afterLoad",t,e))return t.wrap.stop(!0).trigger("onReset").remove(),void(o.coming=null);switch(e&&(o.trigger("beforeChange",e),e.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()),o.unbindEvents(),n=t,s=t.content,r=t.type,a=t.scrolling,$.extend(o,{wrap:n.wrap,skin:n.skin,outer:n.outer,inner:n.inner,current:n,previous:e}),l=n.href,r){case"inline":case"ajax":case"html":n.selector?s=$("<div>").html(s).find(n.selector):h(s)&&(s.data(i)||s.data(i,$('<div class="'+i+'"></div>').insertAfter(s).hide()),s=s.show().detach(),n.wrap.bind("onReset",function(){$(this).find(s).length&&s.hide().replaceAll(s.data(i)).data(i,!1)}));break;case"image":s=n.tpl.image.replace("{href}",l);break;case"swf":s='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+l+'"></param>',u="",$.each(n.swf,function(t,e){s+='<param name="'+t+'" value="'+e+'"></param>',u+=" "+t+'="'+e+'"'}),s+='<embed src="'+l+'" type="application/x-shockwave-flash" width="100%" height="100%"'+u+"></embed></object>"}h(s)&&s.parent().is(n.inner)||n.inner.append(s),o.trigger("beforeShow"),
n.inner.css("overflow","yes"===a?"scroll":"no"===a?"hidden":a),o._setDimension(),o.reposition(),o.isOpen=!1,o.coming=null,o.bindEvents(),o.isOpened?e.prevMethod&&o.transitions[e.prevMethod]():$(".fancybox-wrap").not(n.wrap).stop(!0).trigger("onReset").remove(),o.transitions[o.isOpened?n.nextMethod:n.openMethod](),o._preloadImages()}},_setDimension:function(){var t=o.getViewport(),e=0,i=!1,n=!1,s=o.wrap,r=o.skin,a=o.inner,l=o.current,u=l.width,h=l.height,c=l.minWidth,p=l.minHeight,m=l.maxWidth,v=l.maxHeight,b=l.scrolling,y=l.scrollOutside?l.scrollbarWidth:0,w=l.margin,x=g(w[1]+w[3]),_=g(w[0]+w[2]),k,C,T,S,D,M,E,P,I,L,z,j,R,O,A;if(s.add(r).add(a).width("auto").height("auto").removeClass("fancybox-tmp"),k=g(r.outerWidth(!0)-r.width()),C=g(r.outerHeight(!0)-r.height()),T=x+k,S=_+C,D=d(u)?(t.w-T)*g(u)/100:u,M=d(h)?(t.h-S)*g(h)/100:h,"iframe"===l.type){if(O=l.content,l.autoHeight&&1===O.data("ready"))try{O[0].contentWindow.document.location&&(a.width(D).height(9999),A=O.contents().find("body"),y&&A.css("overflow-x","hidden"),M=A.outerHeight(!0))}catch(t){}}else(l.autoWidth||l.autoHeight)&&(a.addClass("fancybox-tmp"),l.autoWidth||a.width(D),l.autoHeight||a.height(M),l.autoWidth&&(D=a.width()),l.autoHeight&&(M=a.height()),a.removeClass("fancybox-tmp"));if(u=g(D),h=g(M),I=D/M,c=g(d(c)?g(c,"w")-T:c),m=g(d(m)?g(m,"w")-T:m),p=g(d(p)?g(p,"h")-S:p),v=g(d(v)?g(v,"h")-S:v),E=m,P=v,l.fitToView&&(m=Math.min(t.w-T,m),v=Math.min(t.h-S,v)),j=t.w-x,R=t.h-_,l.aspectRatio?(u>m&&(u=m,h=g(u/I)),h>v&&(h=v,u=g(h*I)),u<c&&(u=c,h=g(u/I)),h<p&&(h=p,u=g(h*I))):(u=Math.max(c,Math.min(u,m)),l.autoHeight&&"iframe"!==l.type&&(a.width(u),h=a.height()),h=Math.max(p,Math.min(h,v))),l.fitToView)if(a.width(u).height(h),s.width(u+k),L=s.width(),z=s.height(),l.aspectRatio)for(;(L>j||z>R)&&u>c&&h>p&&!(e++>19);)h=Math.max(p,Math.min(v,h-10)),u=g(h*I),u<c&&(u=c,h=g(u/I)),u>m&&(u=m,h=g(u/I)),a.width(u).height(h),s.width(u+k),L=s.width(),z=s.height();else u=Math.max(c,Math.min(u,u-(L-j))),h=Math.max(p,Math.min(h,h-(z-R)));y&&"auto"===b&&h<M&&u+k+y<j&&(u+=y),a.width(u).height(h),s.width(u+k),L=s.width(),z=s.height(),i=(L>j||z>R)&&u>c&&h>p,n=l.aspectRatio?u<E&&h<P&&u<D&&h<M:(u<E||h<P)&&(u<D||h<M),$.extend(l,{dim:{width:f(L),height:f(z)},origWidth:D,origHeight:M,canShrink:i,canExpand:n,wPadding:k,hPadding:C,wrapSpace:z-r.outerHeight(!0),skinSpace:r.height()-h}),!O&&l.autoHeight&&h>p&&h<v&&!n&&a.height("auto")},_getPosition:function(t){var e=o.current,i=o.getViewport(),n=e.margin,s=o.wrap.width()+n[1]+n[3],r=o.wrap.height()+n[0]+n[2],a={position:"absolute",top:n[0],left:n[3]};return e.autoCenter&&e.fixed&&!t&&r<=i.h&&s<=i.w?a.position="fixed":e.locked||(a.top+=i.y,a.left+=i.x),a.top=f(Math.max(a.top,a.top+(i.h-r)*e.topRatio)),a.left=f(Math.max(a.left,a.left+(i.w-s)*e.leftRatio)),a},_afterZoomIn:function(){var t=o.current;t&&(o.isOpen=o.isOpened=!0,o.wrap.css("overflow","visible").addClass("fancybox-opened"),o.update(),(t.closeClick||t.nextClick&&o.group.length>1)&&o.inner.css("cursor","pointer").bind("click.fb",function(e){$(e.target).is("a")||$(e.target).parent().is("a")||(e.preventDefault(),o[t.closeClick?"close":"next"]())}),t.closeBtn&&$(t.tpl.closeBtn).appendTo(o.skin).bind("click.fb",function(t){t.preventDefault(),o.close()}),t.arrows&&o.group.length>1&&((t.loop||t.index>0)&&$(t.tpl.prev).appendTo(o.outer).bind("click.fb",o.prev),(t.loop||t.index<o.group.length-1)&&$(t.tpl.next).appendTo(o.outer).bind("click.fb",o.next)),o.trigger("afterShow"),t.loop||t.index!==t.group.length-1?o.opts.autoPlay&&!o.player.isActive&&(o.opts.autoPlay=!1,o.play()):o.play(!1))},_afterZoomOut:function(t){t=t||o.current,$(".fancybox-wrap").trigger("onReset").remove(),$.extend(o,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null}),o.trigger("afterClose",t)}}),o.transitions={getOrigPosition:function(){var t=o.current,e=t.element,i=t.orig,n={},s=50,r=50,a=t.hPadding,l=t.wPadding,u=o.getViewport();return!i&&t.isDom&&e.is(":visible")&&(i=e.find("img:first"),i.length||(i=e)),h(i)?(n=i.offset(),i.is("img")&&(s=i.outerWidth(),r=i.outerHeight())):(n.top=u.y+(u.h-r)*t.topRatio,n.left=u.x+(u.w-s)*t.leftRatio),("fixed"===o.wrap.css("position")||t.locked)&&(n.top-=u.y,n.left-=u.x),n={top:f(n.top-a*t.topRatio),left:f(n.left-l*t.leftRatio),width:f(s+l),height:f(r+a)}},step:function(t,e){var i,n,s,r=e.prop,a=o.current,l=a.wrapSpace,u=a.skinSpace;"width"!==r&&"height"!==r||(i=e.end===e.start?1:(t-e.start)/(e.end-e.start),o.isClosing&&(i=1-i),n="width"===r?a.wPadding:a.hPadding,s=t-n,o.skin[r](g("width"===r?s:s-l*i)),o.inner[r](g("width"===r?s:s-l*i-u*i)))},zoomIn:function(){var t=o.current,e=t.pos,i=t.openEffect,n="elastic"===i,s=$.extend({opacity:1},e);delete s.position,n?(e=this.getOrigPosition(),t.openOpacity&&(e.opacity=.1)):"fade"===i&&(e.opacity=.1),o.wrap.css(e).animate(s,{duration:"none"===i?0:t.openSpeed,easing:t.openEasing,step:n?this.step:null,complete:o._afterZoomIn})},zoomOut:function(){var t=o.current,e=t.closeEffect,i="elastic"===e,n={opacity:.1};i&&(n=this.getOrigPosition(),t.closeOpacity&&(n.opacity=.1)),o.wrap.animate(n,{duration:"none"===e?0:t.closeSpeed,easing:t.closeEasing,step:i?this.step:null,complete:o._afterZoomOut})},changeIn:function(){var t=o.current,e=t.nextEffect,i=t.pos,n={opacity:1},s=o.direction,r=200,a;i.opacity=.1,"elastic"===e&&(a="down"===s||"up"===s?"top":"left","down"===s||"right"===s?(i[a]=f(g(i[a])-r),n[a]="+="+r+"px"):(i[a]=f(g(i[a])+r),n[a]="-="+r+"px")),"none"===e?o._afterZoomIn():o.wrap.css(i).animate(n,{duration:t.nextSpeed,easing:t.nextEasing,complete:o._afterZoomIn})},changeOut:function(){var t=o.previous,e=t.prevEffect,i={opacity:.1},n=o.direction,s=200;"elastic"===e&&(i["down"===n||"up"===n?"top":"left"]=("up"===n||"left"===n?"-":"+")+"="+s+"px"),t.wrap.animate(i,{duration:"none"===e?0:t.prevSpeed,easing:t.prevEasing,complete:function(){$(this).trigger("onReset").remove()}})}},o.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!u,fixed:!0},overlay:null,fixed:!1,el:$("html"),create:function(t){t=$.extend({},this.defaults,t),this.overlay&&this.close(),this.overlay=$('<div class="fancybox-overlay"></div>').appendTo(o.coming?o.coming.parent:t.parent),this.fixed=!1,t.fixed&&o.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)},open:function(t){var e=this;t=$.extend({},this.defaults,t),this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(t),this.fixed||(s.bind("resize.overlay",$.proxy(this.update,this)),this.update()),t.closeClick&&this.overlay.bind("click.overlay",function(t){if($(t.target).hasClass("fancybox-overlay"))return o.isActive?o.close():e.close(),!1}),this.overlay.css(t.css).show()},close:function(){var t,e;s.unbind("resize.overlay"),this.el.hasClass("fancybox-lock")&&($(".fancybox-margin").removeClass("fancybox-margin"),t=s.scrollTop(),e=s.scrollLeft(),this.el.removeClass("fancybox-lock"),s.scrollTop(t).scrollLeft(e)),$(".fancybox-overlay").remove().hide(),$.extend(this,{overlay:null,fixed:!1})},update:function(){var t="100%",i;this.overlay.width(t).height("100%"),a?(i=Math.max(e.documentElement.offsetWidth,e.body.offsetWidth),r.width()>i&&(t=r.width())):r.width()>s.width()&&(t=r.width()),this.overlay.width(t).height(r.height())},onReady:function(t,e){var i=this.overlay;$(".fancybox-overlay").stop(!0,!0),i||this.create(t),t.locked&&this.fixed&&e.fixed&&(i||(this.margin=r.height()>s.height()&&$("html").css("margin-right").replace("px","")),e.locked=this.overlay.append(e.wrap),e.fixed=!1),t.showEarly===!0&&this.beforeShow.apply(this,arguments)},beforeShow:function(t,e){var i,n;e.locked&&(this.margin!==!1&&($("*").filter(function(){return"fixed"===$(this).css("position")&&!$(this).hasClass("fancybox-overlay")&&!$(this).hasClass("fancybox-wrap")}).addClass("fancybox-margin"),this.el.addClass("fancybox-margin")),i=s.scrollTop(),n=s.scrollLeft(),this.el.addClass("fancybox-lock"),s.scrollTop(i).scrollLeft(n)),this.open(t)},onUpdate:function(){this.fixed||this.update()},afterClose:function(t){this.overlay&&!o.coming&&this.overlay.fadeOut(t.speedOut,$.proxy(this.close,this))}},o.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(t){var e=o.current,i=e.title,n=t.type,s,r;if($.isFunction(i)&&(i=i.call(e.element,e)),c(i)&&""!==$.trim(i)){switch(s=$('<div class="fancybox-title fancybox-title-'+n+'-wrap">'+i+"</div>"),n){case"inside":r=o.skin;break;case"outside":r=o.wrap;break;case"over":r=o.inner;break;default:r=o.skin,s.appendTo("body"),a&&s.width(s.width()),s.wrapInner('<span class="child"></span>'),o.current.margin[2]+=Math.abs(g(s.css("margin-bottom")))}s["top"===t.position?"prependTo":"appendTo"](r)}}},$.fn.fancybox=function(t){var e,i=$(this),n=this.selector||"",s=function(s){var r=$(this).blur(),a=e,l,u;s.ctrlKey||s.altKey||s.shiftKey||s.metaKey||r.is(".fancybox-wrap")||(l=t.groupAttr||"data-fancybox-group",u=r.attr(l),u||(l="rel",u=r.get(0)[l]),u&&""!==u&&"nofollow"!==u&&(r=n.length?$(n):i,r=r.filter("["+l+'="'+u+'"]'),a=r.index(this)),t.index=a,o.open(r,t)!==!1&&s.preventDefault())};return t=t||{},e=t.index||0,n&&t.live!==!1?r.undelegate(n,"click.fb-start").delegate(n+":not('.fancybox-item, .fancybox-nav')","click.fb-start",s):i.unbind("click.fb-start").bind("click.fb-start",s),this.filter("[data-fancybox-start=1]").trigger("click"),this},r.ready(function(){var e,s;$.scrollbarWidth===i&&($.scrollbarWidth=function(){var t=$('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),e=t.children(),i=e.innerWidth()-e.height(99).innerWidth();return t.remove(),i}),$.support.fixedPosition===i&&($.support.fixedPosition=function(){var t=$('<div style="position:fixed;top:20px;"></div>').appendTo("body"),e=20===t[0].offsetTop||15===t[0].offsetTop;return t.remove(),e}()),$.extend(o.defaults,{scrollbarWidth:$.scrollbarWidth(),fixed:$.support.fixedPosition,parent:$("body")}),e=$(t).width(),n.addClass("fancybox-lock-test"),s=$(t).width(),n.removeClass("fancybox-lock-test"),$("<style type='text/css'>.fancybox-margin{margin-right:"+(s-e)+"px;}</style>").appendTo("head")})}(window,document,jQuery),function($,t){$.fn.wp_editor=function(t){if($(this).is("textarea")||console.warn("Element must be a textarea"),"undefined"==typeof tinyMCEPreInit&&console.warn("typeof tinyMCEPreInit == undefined"),"undefined"==typeof QTags&&console.warn("typeof QTags == undefined"),"undefined"==typeof ap_vars&&console.warn("typeof ap_vars == undefined"),!$(this).is("textarea")||"undefined"==typeof tinyMCEPreInit||"undefined"==typeof QTags||"undefined"==typeof ap_vars)return this;var e={mode:"html",mceInit:{theme:"modern",skin:"lightgray",language:"da",formats:{alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"},deep:!1,remove:"none"},{selector:"img,table,dl.wp-caption",classes:["alignleft"],deep:!1,remove:"none"}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"},deep:!1,remove:"none"},{selector:"img,table,dl.wp-caption",classes:["aligncenter"],deep:!1,remove:"none"}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"},deep:!1,remove:"none"},{selector:"img,table,dl.wp-caption",classes:["alignright"],deep:!1,remove:"none"}],strikethrough:{inline:"del",deep:!0,split:!0}},relative_urls:!1,remove_script_host:!1,convert_urls:!1,browser_spellcheck:!0,fix_list_elements:!0,entities:"38,amp,60,lt,62,gt",entity_encoding:"raw",keep_styles:!1,paste_webkit_styles:"font-weight font-style color",preview_styles:"font-family font-size font-weight font-style text-decoration text-transform",wpeditimage_disable_captions:!1,wpeditimage_html5_captions:!1,plugins:"charmap,hr,media,paste,tabfocus,textcolor,fullscreen,wordpress,wpeditimage,wpgallery,wplink,wpdialogs,wpview,image",content_css:ap_vars.includes_url+"css/dashicons.css?ver=3.9,"+ap_vars.includes_url+"js/mediaelement/mediaelementplayer.min.css?ver=3.9,"+ap_vars.includes_url+"js/mediaelement/wp-mediaelement.css?ver=3.9,"+ap_vars.includes_url+"js/tinymce/skins/wordpress/wp-content.css?ver=3.9",selector:"#apid",resize:"vertical",menubar:!1,wpautop:!0,indent:!1,toolbar1:"bold,italic,strikethrough,bullist,numlist,blockquote,hr,alignleft,aligncenter,alignright,link,unlink,wp_more,spellchecker,fullscreen,wp_adv",toolbar2:"formatselect,underline,alignjustify,forecolor,pastetext,removeformat,charmap,outdent,indent,undo,redo,wp_help",toolbar3:"",toolbar4:"",tabfocus_elements:":prev,:next",body_class:"apid"}},i=new RegExp("apid","g");tinyMCEPreInit.mceInit.apid&&(e.mceInit=tinyMCEPreInit.mceInit.apid);var t=$.extend(!0,e,t);return this.each(function(){if($(this).is("textarea")){var e=$(this).attr("id");$.each(t.mceInit,function(n,s){"string"==$.type(s)&&(t.mceInit[n]=s.replace(i,e))}),t.mode="tmce"==t.mode?"tmce":"html",tinyMCEPreInit.mceInit[e]=t.mceInit,$(this).addClass("wp-editor-area").show();var n=this;if($(this).closest(".wp-editor-wrap").length){var s=$(this).closest(".wp-editor-wrap").parent();$(this).closest(".wp-editor-wrap").before($(this).clone()),$(this).closest(".wp-editor-wrap").remove(),n=s.find('textarea[id="'+e+'"]')}var r=$('<div id="wp-'+e+'-wrap" class="wp-core-ui wp-editor-wrap '+t.mode+'-active" />'),o=$('<div id="wp-'+e+'-editor-tools" class="wp-editor-tools hide-if-no-js" />'),a=$('<div class="wp-editor-tabs" />'),l=$('<a id="'+e+'-html" class="wp-switch-editor switch-html" onclick="switchEditors.switchto(this);">Text</a>'),u=$('<a id="'+e+'-tmce" class="wp-switch-editor switch-tmce" onclick="switchEditors.switchto(this);">Visual</a>'),h=$('<div id="wp-'+e+'-media-buttons" class="wp-media-buttons" />'),c=$('<a href="#" id="insert-media-button" class="button insert-media add_media" data-editor="'+e+'" title="Add Media"><span class="wp-media-buttons-icon"></span> Add Media</a>'),d=$('<div id="wp-'+e+'-editor-container" class="wp-editor-container" />'),p=!1;c.appendTo(h),h.appendTo(o),l.appendTo(a),u.appendTo(a),a.appendTo(o),o.appendTo(r),d.appendTo(r),d.append($(n).clone().addClass("wp-editor-area")),0!=p&&$.each(p,function(){$('link[href="'+this+'"]').length||$(n).before('<link rel="stylesheet" type="text/css" href="'+this+'">')}),$(n).before('<link rel="stylesheet" id="editor-buttons-css" href="'+ap_vars.includes_url+'css/editor.css" type="text/css" media="all">'),$(n).before(r),$(n).remove(),new QTags(e),QTags._buttonsInit(),switchEditors.go(e,t.mode),$(r).on("click",".insert-media",function(t){var e=$(t.currentTarget),i=e.data("editor"),n={frame:"post",state:"insert",title:wp.media.view.l10n.addMedia,multiple:!0};t.preventDefault(),e.blur(),e.hasClass("gallery")&&(n.state="gallery",n.title=wp.media.view.l10n.createGalleryTitle),wp.media.editor.open(i,n)})}else console.warn("Element must be a textarea")})}}(jQuery,window),function($){$.fn.autogrow=function(t){return this.filter("textarea").each(function(){var e=this,i=$(e),n=i.height(),s=i.hasClass("autogrow-short")?0:parseInt(i.css("lineHeight"))||0,r=$.extend({preGrowCallback:null,postGrowCallback:null},t),o=$("<div></div>").css({position:"absolute",top:-1e4,left:-1e4,width:i.width(),fontSize:i.css("fontSize"),fontFamily:i.css("fontFamily"),fontWeight:i.css("fontWeight"),lineHeight:i.css("lineHeight"),resize:"none","word-wrap":"break-word"}).appendTo(document.body),a=function(t){var a=function(t,e){for(var i=0,n="";i<e;i++)n+=t;return n},l=e.value.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(t){return a("&nbsp;",t.length-1)+" "});t&&t.data&&"keydown"===t.data.event&&13===t.keyCode&&(l+="<br />"),o.css("width",i.width()),o.html(l+(0===s?"...":""));var u=Math.max(o.height()+s,n);null!=r.preGrowCallback&&(u=r.preGrowCallback(i,o,u,n)),i.height(u),null!=r.postGrowCallback&&r.postGrowCallback(i)};i.change(a).keyup(a).keydown({event:"keydown"},a),$(window).resize(a),a()})}}(jQuery),function(t,e){"use strict";"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.autosize=e()}(this,function(){function t(t){function e(){var e=window.getComputedStyle(t,null);"vertical"===e.resize?t.style.resize="none":"both"===e.resize&&(t.style.resize="horizontal"),t.style.wordWrap="break-word";var r=t.style.width;t.style.width="0px",t.offsetWidth,t.style.width=r,n="none"!==e.maxHeight&&parseFloat(e.maxHeight),s="content-box"===e.boxSizing?-(parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)):parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth),i()}function i(){var e=t.style.height,i=document.documentElement.scrollTop,r=document.body.scrollTop;t.style.height="auto";var o=t.scrollHeight+s;if(n!==!1&&n<o?(o=n,"scroll"!==t.style.overflowY&&(t.style.overflowY="scroll")):"hidden"!==t.style.overflowY&&(t.style.overflowY="hidden"),t.style.height=o+"px",document.documentElement.scrollTop=i,document.body.scrollTop=r,e!==t.style.height){var a=document.createEvent("Event");a.initEvent("autosize.resized",!0,!1),t.dispatchEvent(a)}}if(t&&t.nodeName&&"TEXTAREA"===t.nodeName&&!t.hasAttribute("data-autosize-on")){var n,s;"onpropertychange"in t&&"oninput"in t&&t.addEventListener("keyup",i),window.addEventListener("resize",i),t.addEventListener("input",i),t.addEventListener("autosize.update",i),t.addEventListener("autosize.destroy",function(e){window.removeEventListener("resize",i),t.removeEventListener("input",i),t.removeEventListener("keyup",i),t.removeEventListener("autosize.destroy"),Object.keys(e).forEach(function(i){t.style[i]=e[i]}),t.removeAttribute("data-autosize-on")}.bind(t,{height:t.style.height,overflow:t.style.overflow,overflowY:t.style.overflowY,wordWrap:t.style.wordWrap,resize:t.style.resize})),t.setAttribute("data-autosize-on",!0),t.style.overflow="hidden",t.style.overflowY="hidden",e()}}return"function"!=typeof window.getComputedStyle?function(t){return t}:function(e){return e&&e.length?Array.prototype.forEach.call(e,t):e&&e.nodeName&&t(e),e}}),function($,t,e,i){function n(t,e){this.settings=null,this.options=$.extend({},n.Defaults,e),this.$element=$(t),this.drag=$.extend({},c),this.state=$.extend({},d),this.e=$.extend({},p),this._plugins={},this._supress={},this._current=null,this._speed=null,this._coordinates=[],this._breakpoint=null,this._width=null,this._items=[],this._clones=[],this._mergers=[],this._invalidated={},this._pipe=[],$.each(n.Plugins,$.proxy(function(t,e){this._plugins[t[0].toLowerCase()+t.slice(1)]=new e(this)},this)),$.each(n.Pipe,$.proxy(function(t,e){this._pipe.push({filter:e.filter,run:$.proxy(e.run,this)})},this)),this.setup(),this.initialize()}function s(t){if(t.touches!==i)return{x:t.touches[0].pageX,y:t.touches[0].pageY};if(t.touches===i){if(t.pageX!==i)return{x:t.pageX,y:t.pageY};if(t.pageX===i)return{x:t.clientX,y:t.clientY}}}function r(t){var i,n,s=e.createElement("div"),r=t;for(i in r)if(n=r[i],"undefined"!=typeof s.style[n])return s=null,[n,i];return[!1]}function o(){return r(["transition","WebkitTransition","MozTransition","OTransition"])[1]}function a(){return r(["transform","WebkitTransform","MozTransform","OTransform","msTransform"])[0]}function l(){return r(["perspective","webkitPerspective","MozPerspective","OPerspective","MsPerspective"])[0]}function u(){return"ontouchstart"in t||!!navigator.msMaxTouchPoints}function h(){return t.navigator.msPointerEnabled}var c,d,p;c={start:0,startX:0,startY:0,current:0,currentX:0,currentY:0,offsetX:0,offsetY:0,distance:null,startTime:0,endTime:0,updatedX:0,targetEl:null},d={isTouch:!1,isScrolling:!1,isSwiping:!1,direction:!1,inMotion:!1},p={_onDragStart:null,_onDragMove:null,_onDragEnd:null,_transitionEnd:null,_resizer:null,_responsiveCall:null,_goToLoop:null,_checkVisibile:null},n.Defaults={items:3,loop:!1,center:!1,mouseDrag:!0,touchDrag:!0,pullDrag:!0,freeDrag:!1,margin:0,stagePadding:0,merge:!1,mergeFit:!0,autoWidth:!1,startPosition:0,rtl:!1,smartSpeed:250,fluidSpeed:!1,dragEndSpeed:!1,responsive:{},responsiveRefreshRate:200,responsiveBaseElement:t,responsiveClass:!1,fallbackEasing:"swing",info:!1,nestedItemSelector:!1,itemElement:"div",stageElement:"div",themeClass:"owl-theme",baseClass:"owl-carousel",itemClass:"owl-item",centerClass:"center",activeClass:"active"},n.Width={Default:"default",Inner:"inner",Outer:"outer"},n.Plugins={},n.Pipe=[{filter:["width","items","settings"],run:function(t){t.current=this._items&&this._items[this.relative(this._current)]}},{filter:["items","settings"],run:function(){var t=this._clones,e=this.$stage.children(".cloned");(e.length!==t.length||!this.settings.loop&&t.length>0)&&(this.$stage.children(".cloned").remove(),this._clones=[])}},{filter:["items","settings"],run:function(){var t,e,i=this._clones,n=this._items,s=this.settings.loop?i.length-Math.max(2*this.settings.items,4):0;for(t=0,e=Math.abs(s/2);t<e;t++)s>0?(this.$stage.children().eq(n.length+i.length-1).remove(),i.pop(),this.$stage.children().eq(0).remove(),i.pop()):(i.push(i.length/2),this.$stage.append(n[i[i.length-1]].clone().addClass("cloned")),i.push(n.length-1-(i.length-1)/2),this.$stage.prepend(n[i[i.length-1]].clone().addClass("cloned")))}},{filter:["width","items","settings"],run:function(){var t=this.settings.rtl?1:-1,e=(this.width()/this.settings.items).toFixed(3),i=0,n,s,r;for(this._coordinates=[],s=0,r=this._clones.length+this._items.length;s<r;s++)n=this._mergers[this.relative(s)],n=this.settings.mergeFit&&Math.min(n,this.settings.items)||n,i+=(this.settings.autoWidth?this._items[this.relative(s)].width()+this.settings.margin:e*n)*t,this._coordinates.push(i)}},{filter:["width","items","settings"],run:function(){var t,e,i=(this.width()/this.settings.items).toFixed(3),n={width:Math.abs(this._coordinates[this._coordinates.length-1])+2*this.settings.stagePadding,"padding-left":this.settings.stagePadding||"","padding-right":this.settings.stagePadding||""};if(this.$stage.css(n),n={width:this.settings.autoWidth?"auto":i-this.settings.margin},n[this.settings.rtl?"margin-left":"margin-right"]=this.settings.margin,!this.settings.autoWidth&&$.grep(this._mergers,function(t){return t>1}).length>0)for(t=0,e=this._coordinates.length;t<e;t++)n.width=Math.abs(this._coordinates[t])-Math.abs(this._coordinates[t-1]||0)-this.settings.margin,this.$stage.children().eq(t).css(n);else this.$stage.children().css(n)}},{filter:["width","items","settings"],run:function(t){t.current&&this.reset(this.$stage.children().index(t.current))}},{filter:["position"],run:function(){this.animate(this.coordinates(this._current))}},{filter:["width","position","items","settings"],run:function(){var t=this.settings.rtl?1:-1,e=2*this.settings.stagePadding,i=this.coordinates(this.current())+e,n=i+this.width()*t,s,r,o=[],a,l;for(a=0,l=this._coordinates.length;a<l;a++)s=this._coordinates[a-1]||0,r=Math.abs(this._coordinates[a])+e*t,(this.op(s,"<=",i)&&this.op(s,">",n)||this.op(r,"<",i)&&this.op(r,">",n))&&o.push(a);this.$stage.children("."+this.settings.activeClass).removeClass(this.settings.activeClass),this.$stage.children(":eq("+o.join("), :eq(")+")").addClass(this.settings.activeClass),this.settings.center&&(this.$stage.children("."+this.settings.centerClass).removeClass(this.settings.centerClass),this.$stage.children().eq(this.current()).addClass(this.settings.centerClass))}}],n.prototype.initialize=function(){if(this.trigger("initialize"),this.$element.addClass(this.settings.baseClass).addClass(this.settings.themeClass).toggleClass("owl-rtl",this.settings.rtl),this.browserSupport(),this.settings.autoWidth&&this.state.imagesLoaded!==!0){var t,e,n;if(t=this.$element.find("img"),e=this.settings.nestedItemSelector?"."+this.settings.nestedItemSelector:i,n=this.$element.children(e).width(),t.length&&n<=0)return this.preloadAutoWidthImages(t),!1}this.$element.addClass("owl-loading"),this.$stage=$("<"+this.settings.stageElement+' class="owl-stage"/>').wrap('<div class="owl-stage-outer">'),this.$element.append(this.$stage.parent()),this.replace(this.$element.children().not(this.$stage.parent())),this._width=this.$element.width(),this.refresh(),this.$element.removeClass("owl-loading").addClass("owl-loaded"),this.eventsCall(),this.internalEvents(),this.addTriggerableEvents(),this.trigger("initialized")},n.prototype.setup=function(){var t=this.viewport(),e=this.options.responsive,i=-1,n=null;e?($.each(e,function(e){e<=t&&e>i&&(i=Number(e))}),n=$.extend({},this.options,e[i]),delete n.responsive,n.responsiveClass&&this.$element.attr("class",function(t,e){return e.replace(/\b owl-responsive-\S+/g,"")}).addClass("owl-responsive-"+i)):n=$.extend({},this.options),null!==this.settings&&this._breakpoint===i||(this.trigger("change",{property:{name:"settings",value:n}}),this._breakpoint=i,this.settings=n,this.invalidate("settings"),this.trigger("changed",{property:{name:"settings",value:this.settings}}))},n.prototype.optionsLogic=function(){this.$element.toggleClass("owl-center",this.settings.center),this.settings.loop&&this._items.length<this.settings.items&&(this.settings.loop=!1),this.settings.autoWidth&&(this.settings.stagePadding=!1,this.settings.merge=!1)},n.prototype.prepare=function(t){var e=this.trigger("prepare",{content:t});return e.data||(e.data=$("<"+this.settings.itemElement+"/>").addClass(this.settings.itemClass).append(t)),this.trigger("prepared",{content:e.data}),e.data},n.prototype.update=function(){for(var t=0,e=this._pipe.length,i=$.proxy(function(t){return this[t]},this._invalidated),n={};t<e;)(this._invalidated.all||$.grep(this._pipe[t].filter,i).length>0)&&this._pipe[t].run(n),t++;this._invalidated={}},n.prototype.width=function(t){switch(t=t||n.Width.Default){case n.Width.Inner:case n.Width.Outer:return this._width;default:return this._width-2*this.settings.stagePadding+this.settings.margin}},n.prototype.refresh=function(){if(0===this._items.length)return!1;var e=(new Date).getTime();this.trigger("refresh"),this.setup(),this.optionsLogic(),this.$stage.addClass("owl-refresh"),this.update(),this.$stage.removeClass("owl-refresh"),this.state.orientation=t.orientation,this.watchVisibility(),this.trigger("refreshed")},n.prototype.eventsCall=function(){this.e._onDragStart=$.proxy(function(t){this.onDragStart(t)},this),this.e._onDragMove=$.proxy(function(t){this.onDragMove(t)},this),this.e._onDragEnd=$.proxy(function(t){this.onDragEnd(t)},this),this.e._onResize=$.proxy(function(t){this.onResize(t)},this),this.e._transitionEnd=$.proxy(function(t){this.transitionEnd(t)},this),this.e._preventClick=$.proxy(function(t){this.preventClick(t)},this)},n.prototype.onThrottledResize=function(){t.clearTimeout(this.resizeTimer),this.resizeTimer=t.setTimeout(this.e._onResize,this.settings.responsiveRefreshRate)},n.prototype.onResize=function(){return!!this._items.length&&(this._width!==this.$element.width()&&(!this.trigger("resize").isDefaultPrevented()&&(this._width=this.$element.width(),this.invalidate("width"),this.refresh(),void this.trigger("resized"))))},n.prototype.eventsRouter=function(t){var e=t.type;"mousedown"===e||"touchstart"===e?this.onDragStart(t):"mousemove"===e||"touchmove"===e?this.onDragMove(t):"mouseup"===e||"touchend"===e?this.onDragEnd(t):"touchcancel"===e&&this.onDragEnd(t)},n.prototype.internalEvents=function(){var e=u(),i=h();this.settings.mouseDrag?(this.$stage.on("mousedown",$.proxy(function(t){this.eventsRouter(t)},this)),this.$stage.on("dragstart",function(){return!1}),this.$stage.get(0).onselectstart=function(){return!1}):this.$element.addClass("owl-text-select-on"),this.settings.touchDrag&&!i&&this.$stage.on("touchstart touchcancel",$.proxy(function(t){this.eventsRouter(t)},this)),this.transitionEndVendor&&this.on(this.$stage.get(0),this.transitionEndVendor,this.e._transitionEnd,!1),this.settings.responsive!==!1&&this.on(t,"resize",$.proxy(this.onThrottledResize,this))},n.prototype.onDragStart=function(i){var n,r,o,a,l;if(n=i.originalEvent||i||t.event,3===n.which||this.state.isTouch)return!1;if("mousedown"===n.type&&this.$stage.addClass("owl-grab"),this.trigger("drag"),this.drag.startTime=(new Date).getTime(),this.speed(0),this.state.isTouch=!0,this.state.isScrolling=!1,this.state.isSwiping=!1,this.drag.distance=0,o=s(n).x,a=s(n).y,this.drag.offsetX=this.$stage.position().left,this.drag.offsetY=this.$stage.position().top,this.settings.rtl&&(this.drag.offsetX=this.$stage.position().left+this.$stage.width()-this.width()+this.settings.margin),this.state.inMotion&&this.support3d)l=this.getTransformProperty(),this.drag.offsetX=l,this.animate(l),this.state.inMotion=!0;else if(this.state.inMotion&&!this.support3d)return this.state.inMotion=!1,!1;this.drag.startX=o-this.drag.offsetX,this.drag.startY=a-this.drag.offsetY,this.drag.start=o-this.drag.startX,this.drag.targetEl=n.target||n.srcElement,this.drag.updatedX=this.drag.start,"IMG"!==this.drag.targetEl.tagName&&"A"!==this.drag.targetEl.tagName||(this.drag.targetEl.draggable=!1),$(e).on("mousemove.owl.dragEvents mouseup.owl.dragEvents touchmove.owl.dragEvents touchend.owl.dragEvents",$.proxy(function(t){this.eventsRouter(t)},this))},n.prototype.onDragMove=function(e){var n,r,o,a,l,u,h;this.state.isTouch&&(this.state.isScrolling||(n=e.originalEvent||e||t.event,o=s(n).x,a=s(n).y,this.drag.currentX=o-this.drag.startX,this.drag.currentY=a-this.drag.startY,this.drag.distance=this.drag.currentX-this.drag.offsetX,this.drag.distance<0?this.state.direction=this.settings.rtl?"right":"left":this.drag.distance>0&&(this.state.direction=this.settings.rtl?"left":"right"),this.settings.loop?this.op(this.drag.currentX,">",this.coordinates(this.minimum()))&&"right"===this.state.direction?this.drag.currentX-=(this.settings.center&&this.coordinates(0))-this.coordinates(this._items.length):this.op(this.drag.currentX,"<",this.coordinates(this.maximum()))&&"left"===this.state.direction&&(this.drag.currentX+=(this.settings.center&&this.coordinates(0))-this.coordinates(this._items.length)):(l=this.settings.rtl?this.coordinates(this.maximum()):this.coordinates(this.minimum()),u=this.settings.rtl?this.coordinates(this.minimum()):this.coordinates(this.maximum()),h=this.settings.pullDrag?this.drag.distance/5:0,this.drag.currentX=Math.max(Math.min(this.drag.currentX,l+h),u+h)),(this.drag.distance>8||this.drag.distance<-8)&&(n.preventDefault!==i?n.preventDefault():n.returnValue=!1,this.state.isSwiping=!0),this.drag.updatedX=this.drag.currentX,(this.drag.currentY>16||this.drag.currentY<-16)&&this.state.isSwiping===!1&&(this.state.isScrolling=!0,this.drag.updatedX=this.drag.start),this.animate(this.drag.updatedX)))},n.prototype.onDragEnd=function(t){var i,n,s;if(this.state.isTouch){if("mouseup"===t.type&&this.$stage.removeClass("owl-grab"),this.trigger("dragged"),this.drag.targetEl.removeAttribute("draggable"),this.state.isTouch=!1,this.state.isScrolling=!1,this.state.isSwiping=!1,0===this.drag.distance&&this.state.inMotion!==!0)return this.state.inMotion=!1,!1;this.drag.endTime=(new Date).getTime(),i=this.drag.endTime-this.drag.startTime,n=Math.abs(this.drag.distance),(n>3||i>300)&&this.removeClick(this.drag.targetEl),s=this.closest(this.drag.updatedX),this.speed(this.settings.dragEndSpeed||this.settings.smartSpeed),this.current(s),this.invalidate("position"),this.update(),this.settings.pullDrag||this.drag.updatedX!==this.coordinates(s)||this.transitionEnd(),this.drag.distance=0,$(e).off(".owl.dragEvents")}},n.prototype.removeClick=function(e){this.drag.targetEl=e,$(e).on("click.preventClick",this.e._preventClick),t.setTimeout(function(){$(e).off("click.preventClick")},300)},n.prototype.preventClick=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),$(t.target).off("click.preventClick")},n.prototype.getTransformProperty=function(){var e,i;return e=t.getComputedStyle(this.$stage.get(0),null).getPropertyValue(this.vendorName+"transform"),e=e.replace(/matrix(3d)?\(|\)/g,"").split(","),i=16===e.length,i!==!0?e[4]:e[12]},n.prototype.closest=function(t){var e=-1,i=30,n=this.width(),s=this.coordinates();return this.settings.freeDrag||$.each(s,$.proxy(function(r,o){return t>o-i&&t<o+i?e=r:this.op(t,"<",o)&&this.op(t,">",s[r+1]||o-n)&&(e="left"===this.state.direction?r+1:r),
e===-1},this)),this.settings.loop||(this.op(t,">",s[this.minimum()])?e=t=this.minimum():this.op(t,"<",s[this.maximum()])&&(e=t=this.maximum())),e},n.prototype.animate=function(t){this.trigger("translate"),this.state.inMotion=this.speed()>0,this.support3d?this.$stage.css({transform:"translate3d("+t+"px,0px, 0px)",transition:this.speed()/1e3+"s"}):this.state.isTouch?this.$stage.css({left:t+"px"}):this.$stage.animate({left:t},this.speed()/1e3,this.settings.fallbackEasing,$.proxy(function(){this.state.inMotion&&this.transitionEnd()},this))},n.prototype.current=function(t){if(t===i)return this._current;if(0===this._items.length)return i;if(t=this.normalize(t),this._current!==t){var e=this.trigger("change",{property:{name:"position",value:t}});e.data!==i&&(t=this.normalize(e.data)),this._current=t,this.invalidate("position"),this.trigger("changed",{property:{name:"position",value:this._current}})}return this._current},n.prototype.invalidate=function(t){this._invalidated[t]=!0},n.prototype.reset=function(t){t=this.normalize(t),t!==i&&(this._speed=0,this._current=t,this.suppress(["translate","translated"]),this.animate(this.coordinates(t)),this.release(["translate","translated"]))},n.prototype.normalize=function(t,e){var n=e?this._items.length:this._items.length+this._clones.length;return!$.isNumeric(t)||n<1?i:t=this._clones.length?(t%n+n)%n:Math.max(this.minimum(e),Math.min(this.maximum(e),t))},n.prototype.relative=function(t){return t=this.normalize(t),t-=this._clones.length/2,this.normalize(t,!0)},n.prototype.maximum=function(t){var e,i,n=0,s,r=this.settings;if(t)return this._items.length-1;if(!r.loop&&r.center)e=this._items.length-1;else if(r.loop||r.center)if(r.loop||r.center)e=this._items.length+r.items;else{if(!r.autoWidth&&!r.merge)throw"Can not detect maximum absolute position.";for(revert=r.rtl?1:-1,i=this.$stage.width()-this.$element.width();(s=this.coordinates(n))&&!(s*revert>=i);)e=++n}else e=this._items.length-r.items;return e},n.prototype.minimum=function(t){return t?0:this._clones.length/2},n.prototype.items=function(t){return t===i?this._items.slice():(t=this.normalize(t,!0),this._items[t])},n.prototype.mergers=function(t){return t===i?this._mergers.slice():(t=this.normalize(t,!0),this._mergers[t])},n.prototype.clones=function(t){var e=this._clones.length/2,n=e+this._items.length,s=function(t){return t%2===0?n+t/2:e-(t+1)/2};return t===i?$.map(this._clones,function(t,e){return s(e)}):$.map(this._clones,function(e,i){return e===t?s(i):null})},n.prototype.speed=function(t){return t!==i&&(this._speed=t),this._speed},n.prototype.coordinates=function(t){var e=null;return t===i?$.map(this._coordinates,$.proxy(function(t,e){return this.coordinates(e)},this)):(this.settings.center?(e=this._coordinates[t],e+=(this.width()-e+(this._coordinates[t-1]||0))/2*(this.settings.rtl?-1:1)):e=this._coordinates[t-1]||0,e)},n.prototype.duration=function(t,e,i){return Math.min(Math.max(Math.abs(e-t),1),6)*Math.abs(i||this.settings.smartSpeed)},n.prototype.to=function(e,i){if(this.settings.loop){var n=e-this.relative(this.current()),s=this.current(),r=this.current(),o=this.current()+n,a=r-o<0,l=this._clones.length+this._items.length;o<this.settings.items&&a===!1?(s=r+this._items.length,this.reset(s)):o>=l-this.settings.items&&a===!0&&(s=r-this._items.length,this.reset(s)),t.clearTimeout(this.e._goToLoop),this.e._goToLoop=t.setTimeout($.proxy(function(){this.speed(this.duration(this.current(),s+n,i)),this.current(s+n),this.update()},this),30)}else this.speed(this.duration(this.current(),e,i)),this.current(e),this.update()},n.prototype.next=function(t){t=t||!1,this.to(this.relative(this.current())+1,t)},n.prototype.prev=function(t){t=t||!1,this.to(this.relative(this.current())-1,t)},n.prototype.transitionEnd=function(t){return(t===i||(t.stopPropagation(),(t.target||t.srcElement||t.originalTarget)===this.$stage.get(0)))&&(this.state.inMotion=!1,void this.trigger("translated"))},n.prototype.viewport=function(){var i;if(this.options.responsiveBaseElement!==t)i=$(this.options.responsiveBaseElement).width();else if(t.innerWidth)i=t.innerWidth;else{if(!e.documentElement||!e.documentElement.clientWidth)throw"Can not detect viewport width.";i=e.documentElement.clientWidth}return i},n.prototype.replace=function(t){this.$stage.empty(),this._items=[],t&&(t=t instanceof jQuery?t:$(t)),this.settings.nestedItemSelector&&(t=t.find("."+this.settings.nestedItemSelector)),t.filter(function(){return 1===this.nodeType}).each($.proxy(function(t,e){e=this.prepare(e),this.$stage.append(e),this._items.push(e),this._mergers.push(1*e.find("[data-merge]").andSelf("[data-merge]").attr("data-merge")||1)},this)),this.reset($.isNumeric(this.settings.startPosition)?this.settings.startPosition:0),this.invalidate("items")},n.prototype.add=function(t,e){e=e===i?this._items.length:this.normalize(e,!0),this.trigger("add",{content:t,position:e}),0===this._items.length||e===this._items.length?(this.$stage.append(t),this._items.push(t),this._mergers.push(1*t.find("[data-merge]").andSelf("[data-merge]").attr("data-merge")||1)):(this._items[e].before(t),this._items.splice(e,0,t),this._mergers.splice(e,0,1*t.find("[data-merge]").andSelf("[data-merge]").attr("data-merge")||1)),this.invalidate("items"),this.trigger("added",{content:t,position:e})},n.prototype.remove=function(t){t=this.normalize(t,!0),t!==i&&(this.trigger("remove",{content:this._items[t],position:t}),this._items[t].remove(),this._items.splice(t,1),this._mergers.splice(t,1),this.invalidate("items"),this.trigger("removed",{content:null,position:t}))},n.prototype.addTriggerableEvents=function(){var t=$.proxy(function(t,e){return $.proxy(function(i){i.relatedTarget!==this&&(this.suppress([e]),t.apply(this,[].slice.call(arguments,1)),this.release([e]))},this)},this);$.each({next:this.next,prev:this.prev,to:this.to,destroy:this.destroy,refresh:this.refresh,replace:this.replace,add:this.add,remove:this.remove},$.proxy(function(e,i){this.$element.on(e+".owl.carousel",t(i,e+".owl.carousel"))},this))},n.prototype.watchVisibility=function(){function e(t){return t.offsetWidth>0&&t.offsetHeight>0}function i(){e(this.$element.get(0))&&(this.$element.removeClass("owl-hidden"),this.refresh(),t.clearInterval(this.e._checkVisibile))}e(this.$element.get(0))||(this.$element.addClass("owl-hidden"),t.clearInterval(this.e._checkVisibile),this.e._checkVisibile=t.setInterval($.proxy(i,this),500))},n.prototype.preloadAutoWidthImages=function(t){var e,i,n,s;e=0,i=this,t.each(function(r,o){n=$(o),s=new Image,s.onload=function(){e++,n.attr("src",s.src),n.css("opacity",1),e>=t.length&&(i.state.imagesLoaded=!0,i.initialize())},s.src=n.attr("src")||n.attr("data-src")||n.attr("data-src-retina")})},n.prototype.destroy=function(){this.$element.hasClass(this.settings.themeClass)&&this.$element.removeClass(this.settings.themeClass),this.settings.responsive!==!1&&$(t).off("resize.owl.carousel"),this.transitionEndVendor&&this.off(this.$stage.get(0),this.transitionEndVendor,this.e._transitionEnd);for(var i in this._plugins)this._plugins[i].destroy();(this.settings.mouseDrag||this.settings.touchDrag)&&(this.$stage.off("mousedown touchstart touchcancel"),$(e).off(".owl.dragEvents"),this.$stage.get(0).onselectstart=function(){},this.$stage.off("dragstart",function(){return!1})),this.$element.off(".owl"),this.$stage.children(".cloned").remove(),this.e=null,this.$element.removeData("owlCarousel"),this.$stage.children().contents().unwrap(),this.$stage.children().unwrap(),this.$stage.unwrap()},n.prototype.op=function(t,e,i){var n=this.settings.rtl;switch(e){case"<":return n?t>i:t<i;case">":return n?t<i:t>i;case">=":return n?t<=i:t>=i;case"<=":return n?t>=i:t<=i}},n.prototype.on=function(t,e,i,n){t.addEventListener?t.addEventListener(e,i,n):t.attachEvent&&t.attachEvent("on"+e,i)},n.prototype.off=function(t,e,i,n){t.removeEventListener?t.removeEventListener(e,i,n):t.detachEvent&&t.detachEvent("on"+e,i)},n.prototype.trigger=function(t,e,i){var n={item:{count:this._items.length,index:this.current()}},s=$.camelCase($.grep(["on",t,i],function(t){return t}).join("-").toLowerCase()),r=$.Event([t,"owl",i||"carousel"].join(".").toLowerCase(),$.extend({relatedTarget:this},n,e));return this._supress[t]||($.each(this._plugins,function(t,e){e.onTrigger&&e.onTrigger(r)}),this.$element.trigger(r),this.settings&&"function"==typeof this.settings[s]&&this.settings[s].apply(this,r)),r},n.prototype.suppress=function(t){$.each(t,$.proxy(function(t,e){this._supress[e]=!0},this))},n.prototype.release=function(t){$.each(t,$.proxy(function(t,e){delete this._supress[e]},this))},n.prototype.browserSupport=function(){if(this.support3d=l(),this.support3d){this.transformVendor=a();var e=["transitionend","webkitTransitionEnd","transitionend","oTransitionEnd"];this.transitionEndVendor=e[o()],this.vendorName=this.transformVendor.replace(/Transform/i,""),this.vendorName=""!==this.vendorName?"-"+this.vendorName.toLowerCase()+"-":""}this.state.orientation=t.orientation},$.fn.owlCarousel=function(t){return this.each(function(){$(this).data("owlCarousel")||$(this).data("owlCarousel",new n(this,t))})},$.fn.owlCarousel.Constructor=n}(window.Zepto||window.jQuery,window,document),function($,t,e,i){var n=function(t){this._core=t,this._loaded=[],this._handlers={"initialized.owl.carousel change.owl.carousel":$.proxy(function(t){if(t.namespace&&this._core.settings&&this._core.settings.lazyLoad&&(t.property&&"position"==t.property.name||"initialized"==t.type))for(var e=this._core.settings,i=e.center&&Math.ceil(e.items/2)||e.items,n=e.center&&i*-1||0,s=(t.property&&t.property.value||this._core.current())+n,r=this._core.clones().length,o=$.proxy(function(t,e){this.load(e)},this);n++<i;)this.load(r/2+this._core.relative(s)),r&&$.each(this._core.clones(this._core.relative(s++)),o)},this)},this._core.options=$.extend({},n.Defaults,this._core.options),this._core.$element.on(this._handlers)};n.Defaults={lazyLoad:!1},n.prototype.load=function(e){var i=this._core.$stage.children().eq(e),n=i&&i.find(".owl-lazy");!n||$.inArray(i.get(0),this._loaded)>-1||(n.each($.proxy(function(e,i){var n=$(i),s,r=t.devicePixelRatio>1&&n.attr("data-src-retina")||n.attr("data-src");this._core.trigger("load",{element:n,url:r},"lazy"),n.is("img")?n.one("load.owl.lazy",$.proxy(function(){n.css("opacity",1),this._core.trigger("loaded",{element:n,url:r},"lazy")},this)).attr("src",r):(s=new Image,s.onload=$.proxy(function(){n.css({"background-image":"url("+r+")",opacity:"1"}),this._core.trigger("loaded",{element:n,url:r},"lazy")},this),s.src=r)},this)),this._loaded.push(i.get(0)))},n.prototype.destroy=function(){var t,e;for(t in this.handlers)this._core.$element.off(t,this.handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},$.fn.owlCarousel.Constructor.Plugins.Lazy=n}(window.Zepto||window.jQuery,window,document),function($,t,e,i){var n=function(t){this._core=t,this._handlers={"initialized.owl.carousel":$.proxy(function(){this._core.settings.autoHeight&&this.update()},this),"changed.owl.carousel":$.proxy(function(t){this._core.settings.autoHeight&&"position"==t.property.name&&this.update()},this),"loaded.owl.lazy":$.proxy(function(t){this._core.settings.autoHeight&&t.element.closest("."+this._core.settings.itemClass)===this._core.$stage.children().eq(this._core.current())&&this.update()},this)},this._core.options=$.extend({},n.Defaults,this._core.options),this._core.$element.on(this._handlers)};n.Defaults={autoHeight:!1,autoHeightClass:"owl-height"},n.prototype.update=function(){this._core.$stage.parent().height(this._core.$stage.children().eq(this._core.current()).height()).addClass(this._core.settings.autoHeightClass)},n.prototype.destroy=function(){var t,e;for(t in this._handlers)this._core.$element.off(t,this._handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},$.fn.owlCarousel.Constructor.Plugins.AutoHeight=n}(window.Zepto||window.jQuery,window,document),function($,t,e,i){var n=function(t){this._core=t,this._videos={},this._playing=null,this._fullscreen=!1,this._handlers={"resize.owl.carousel":$.proxy(function(t){this._core.settings.video&&!this.isInFullScreen()&&t.preventDefault()},this),"refresh.owl.carousel changed.owl.carousel":$.proxy(function(t){this._playing&&this.stop()},this),"prepared.owl.carousel":$.proxy(function(t){var e=$(t.content).find(".owl-video");e.length&&(e.css("display","none"),this.fetch(e,$(t.content)))},this)},this._core.options=$.extend({},n.Defaults,this._core.options),this._core.$element.on(this._handlers),this._core.$element.on("click.owl.video",".owl-video-play-icon",$.proxy(function(t){this.play(t)},this))};n.Defaults={video:!1,videoHeight:!1,videoWidth:!1},n.prototype.fetch=function(t,e){var i=t.attr("data-vimeo-id")?"vimeo":"youtube",n=t.attr("data-vimeo-id")||t.attr("data-youtube-id"),s=t.attr("data-width")||this._core.settings.videoWidth,r=t.attr("data-height")||this._core.settings.videoHeight,o=t.attr("href");if(!o)throw new Error("Missing video URL.");if(n=o.match(/(http:|https:|)\/\/(player.|www.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com))\/(video\/|embed\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/),n[3].indexOf("youtu")>-1)i="youtube";else{if(!(n[3].indexOf("vimeo")>-1))throw new Error("Video URL not supported.");i="vimeo"}n=n[6],this._videos[o]={type:i,id:n,width:s,height:r},e.attr("data-video",o),this.thumbnail(t,this._videos[o])},n.prototype.thumbnail=function(t,e){var i,n,s,r=e.width&&e.height?'style="width:'+e.width+"px;height:"+e.height+'px;"':"",o=t.find("img"),a="src",l="",u=this._core.settings,h=function(e){n='<div class="owl-video-play-icon"></div>',i=u.lazyLoad?'<div class="owl-video-tn '+l+'" '+a+'="'+e+'"></div>':'<div class="owl-video-tn" style="opacity:1;background-image:url('+e+')"></div>',t.after(i),t.after(n)};return t.wrap('<div class="owl-video-wrapper"'+r+"></div>"),this._core.settings.lazyLoad&&(a="data-src",l="owl-lazy"),o.length?(h(o.attr(a)),o.remove(),!1):void("youtube"===e.type?(s="http://img.youtube.com/vi/"+e.id+"/hqdefault.jpg",h(s)):"vimeo"===e.type&&$.ajax({type:"GET",url:"http://vimeo.com/api/v2/video/"+e.id+".json",jsonp:"callback",dataType:"jsonp",success:function(t){s=t[0].thumbnail_large,h(s)}}))},n.prototype.stop=function(){this._core.trigger("stop",null,"video"),this._playing.find(".owl-video-frame").remove(),this._playing.removeClass("owl-video-playing"),this._playing=null},n.prototype.play=function(t){this._core.trigger("play",null,"video"),this._playing&&this.stop();var e=$(t.target||t.srcElement),i=e.closest("."+this._core.settings.itemClass),n=this._videos[i.attr("data-video")],s=n.width||"100%",r=n.height||this._core.$stage.height(),o,a;"youtube"===n.type?o='<iframe width="'+s+'" height="'+r+'" src="http://www.youtube.com/embed/'+n.id+"?autoplay=1&v="+n.id+'" frameborder="0" allowfullscreen></iframe>':"vimeo"===n.type&&(o='<iframe src="http://player.vimeo.com/video/'+n.id+'?autoplay=1" width="'+s+'" height="'+r+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>'),i.addClass("owl-video-playing"),this._playing=i,a=$('<div style="height:'+r+"px; width:"+s+'px" class="owl-video-frame">'+o+"</div>"),e.after(a)},n.prototype.isInFullScreen=function(){var i=e.fullscreenElement||e.mozFullScreenElement||e.webkitFullscreenElement;return i&&$(i).parent().hasClass("owl-video-frame")&&(this._core.speed(0),this._fullscreen=!0),!(i&&this._fullscreen&&this._playing)&&(this._fullscreen?(this._fullscreen=!1,!1):!this._playing||this._core.state.orientation===t.orientation||(this._core.state.orientation=t.orientation,!1))},n.prototype.destroy=function(){var t,e;this._core.$element.off("click.owl.video");for(t in this._handlers)this._core.$element.off(t,this._handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},$.fn.owlCarousel.Constructor.Plugins.Video=n}(window.Zepto||window.jQuery,window,document),function($,t,e,i){var n=function(t){this.core=t,this.core.options=$.extend({},n.Defaults,this.core.options),this.swapping=!0,this.previous=i,this.next=i,this.handlers={"change.owl.carousel":$.proxy(function(t){"position"==t.property.name&&(this.previous=this.core.current(),this.next=t.property.value)},this),"drag.owl.carousel dragged.owl.carousel translated.owl.carousel":$.proxy(function(t){this.swapping="translated"==t.type},this),"translate.owl.carousel":$.proxy(function(t){this.swapping&&(this.core.options.animateOut||this.core.options.animateIn)&&this.swap()},this)},this.core.$element.on(this.handlers)};n.Defaults={animateOut:!1,animateIn:!1},n.prototype.swap=function(){if(1===this.core.settings.items&&this.core.support3d){this.core.speed(0);var t,e=$.proxy(this.clear,this),i=this.core.$stage.children().eq(this.previous),n=this.core.$stage.children().eq(this.next),s=this.core.settings.animateIn,r=this.core.settings.animateOut;this.core.current()!==this.previous&&(r&&(t=this.core.coordinates(this.previous)-this.core.coordinates(this.next),i.css({left:t+"px"}).addClass("animated owl-animated-out").addClass(r).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",e)),s&&n.addClass("animated owl-animated-in").addClass(s).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",e))}},n.prototype.clear=function(t){$(t.target).css({left:""}).removeClass("animated owl-animated-out owl-animated-in").removeClass(this.core.settings.animateIn).removeClass(this.core.settings.animateOut),this.core.transitionEnd()},n.prototype.destroy=function(){var t,e;for(t in this.handlers)this.core.$element.off(t,this.handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},$.fn.owlCarousel.Constructor.Plugins.Animate=n}(window.Zepto||window.jQuery,window,document),function($,t,e,i){var n=function(t){this.core=t,this.core.options=$.extend({},n.Defaults,this.core.options),this.handlers={"translated.owl.carousel refreshed.owl.carousel":$.proxy(function(){this.autoplay()},this),"play.owl.autoplay":$.proxy(function(t,e,i){this.play(e,i)},this),"stop.owl.autoplay":$.proxy(function(){this.stop()},this),"mouseover.owl.autoplay":$.proxy(function(){this.core.settings.autoplayHoverPause&&this.pause()},this),"mouseleave.owl.autoplay":$.proxy(function(){this.core.settings.autoplayHoverPause&&this.autoplay()},this)},this.core.$element.on(this.handlers)};n.Defaults={autoplay:!1,autoplayTimeout:5e3,autoplayHoverPause:!1,autoplaySpeed:!1},n.prototype.autoplay=function(){this.core.settings.autoplay&&!this.core.state.videoPlay?(t.clearInterval(this.interval),this.interval=t.setInterval($.proxy(function(){this.play()},this),this.core.settings.autoplayTimeout)):t.clearInterval(this.interval)},n.prototype.play=function(i,n){if(e.hidden!==!0&&!(this.core.state.isTouch||this.core.state.isScrolling||this.core.state.isSwiping||this.core.state.inMotion))return this.core.settings.autoplay===!1?void t.clearInterval(this.interval):void this.core.next(this.core.settings.autoplaySpeed)},n.prototype.stop=function(){t.clearInterval(this.interval)},n.prototype.pause=function(){t.clearInterval(this.interval)},n.prototype.destroy=function(){var e,i;t.clearInterval(this.interval);for(e in this.handlers)this.core.$element.off(e,this.handlers[e]);for(i in Object.getOwnPropertyNames(this))"function"!=typeof this[i]&&(this[i]=null)},$.fn.owlCarousel.Constructor.Plugins.autoplay=n}(window.Zepto||window.jQuery,window,document),function($,t,e,i){"use strict";var n=function(t){this._core=t,this._initialized=!1,this._pages=[],this._controls={},this._templates=[],this.$element=this._core.$element,this._overrides={next:this._core.next,prev:this._core.prev,to:this._core.to},this._handlers={"prepared.owl.carousel":$.proxy(function(t){this._core.settings.dotsData&&this._templates.push($(t.content).find("[data-dot]").andSelf("[data-dot]").attr("data-dot"))},this),"add.owl.carousel":$.proxy(function(t){this._core.settings.dotsData&&this._templates.splice(t.position,0,$(t.content).find("[data-dot]").andSelf("[data-dot]").attr("data-dot"))},this),"remove.owl.carousel prepared.owl.carousel":$.proxy(function(t){this._core.settings.dotsData&&this._templates.splice(t.position,1)},this),"change.owl.carousel":$.proxy(function(t){if("position"==t.property.name&&!this._core.state.revert&&!this._core.settings.loop&&this._core.settings.navRewind){var e=this._core.current(),i=this._core.maximum(),n=this._core.minimum();t.data=t.property.value>i?e>=i?n:i:t.property.value<n?i:t.property.value}},this),"changed.owl.carousel":$.proxy(function(t){"position"==t.property.name&&this.draw()},this),"refreshed.owl.carousel":$.proxy(function(){this._initialized||(this.initialize(),this._initialized=!0),this._core.trigger("refresh",null,"navigation"),this.update(),this.draw(),this._core.trigger("refreshed",null,"navigation")},this)},this._core.options=$.extend({},n.Defaults,this._core.options),this.$element.on(this._handlers)};n.Defaults={nav:!1,navRewind:!0,navText:["prev","next"],navSpeed:!1,navElement:"div",navContainer:!1,navContainerClass:"owl-nav",navClass:["owl-prev","owl-next"],slideBy:1,dotClass:"owl-dot",dotsClass:"owl-dots",dots:!0,dotsEach:!1,dotData:!1,dotsSpeed:!1,dotsContainer:!1,controlsClass:"owl-controls"},n.prototype.initialize=function(){var t,e,i=this._core.settings;i.dotsData||(this._templates=[$("<div>").addClass(i.dotClass).append($("<span>")).prop("outerHTML")]),i.navContainer&&i.dotsContainer||(this._controls.$container=$("<div>").addClass(i.controlsClass).appendTo(this.$element)),this._controls.$indicators=i.dotsContainer?$(i.dotsContainer):$("<div>").hide().addClass(i.dotsClass).appendTo(this._controls.$container),this._controls.$indicators.on("click","div",$.proxy(function(t){var e=$(t.target).parent().is(this._controls.$indicators)?$(t.target).index():$(t.target).parent().index();t.preventDefault(),this.to(e,i.dotsSpeed)},this)),t=i.navContainer?$(i.navContainer):$("<div>").addClass(i.navContainerClass).prependTo(this._controls.$container),this._controls.$next=$("<"+i.navElement+">"),this._controls.$previous=this._controls.$next.clone(),this._controls.$previous.addClass(i.navClass[0]).html(i.navText[0]).hide().prependTo(t).on("click",$.proxy(function(t){this.prev(i.navSpeed)},this)),this._controls.$next.addClass(i.navClass[1]).html(i.navText[1]).hide().appendTo(t).on("click",$.proxy(function(t){this.next(i.navSpeed)},this));for(e in this._overrides)this._core[e]=$.proxy(this[e],this)},n.prototype.destroy=function(){var t,e,i,n;for(t in this._handlers)this.$element.off(t,this._handlers[t]);for(e in this._controls)this._controls[e].remove();for(n in this.overides)this._core[n]=this._overrides[n];for(i in Object.getOwnPropertyNames(this))"function"!=typeof this[i]&&(this[i]=null)},n.prototype.update=function(){var t,e,i,n=this._core.settings,s=this._core.clones().length/2,r=s+this._core.items().length,o=n.center||n.autoWidth||n.dotData?1:n.dotsEach||n.items;if("page"!==n.slideBy&&(n.slideBy=Math.min(n.slideBy,n.items)),n.dots||"page"==n.slideBy)for(this._pages=[],t=s,e=0,i=0;t<r;t++)(e>=o||0===e)&&(this._pages.push({start:t-s,end:t-s+o-1}),e=0,++i),e+=this._core.mergers(this._core.relative(t))},n.prototype.draw=function(){var t,e,i="",n=this._core.settings,s=this._core.$stage.children(),r=this._core.relative(this._core.current());if(!n.nav||n.loop||n.navRewind||(this._controls.$previous.toggleClass("disabled",r<=0),this._controls.$next.toggleClass("disabled",r>=this._core.maximum())),this._controls.$previous.toggle(n.nav),this._controls.$next.toggle(n.nav),n.dots){if(t=this._pages.length-this._controls.$indicators.children().length,n.dotData&&0!==t){for(e=0;e<this._controls.$indicators.children().length;e++)i+=this._templates[this._core.relative(e)];this._controls.$indicators.html(i)}else t>0?(i=new Array(t+1).join(this._templates[0]),this._controls.$indicators.append(i)):t<0&&this._controls.$indicators.children().slice(t).remove();this._controls.$indicators.find(".active").removeClass("active"),this._controls.$indicators.children().eq($.inArray(this.current(),this._pages)).addClass("active")}this._controls.$indicators.toggle(n.dots)},n.prototype.onTrigger=function(t){var e=this._core.settings;t.page={index:$.inArray(this.current(),this._pages),count:this._pages.length,size:e&&(e.center||e.autoWidth||e.dotData?1:e.dotsEach||e.items)}},n.prototype.current=function(){var t=this._core.relative(this._core.current());return $.grep(this._pages,function(e){return e.start<=t&&e.end>=t}).pop()},n.prototype.getPosition=function(t){var e,i,n=this._core.settings;return"page"==n.slideBy?(e=$.inArray(this.current(),this._pages),i=this._pages.length,t?++e:--e,e=this._pages[(e%i+i)%i].start):(e=this._core.relative(this._core.current()),i=this._core.items().length,t?e+=n.slideBy:e-=n.slideBy),e},n.prototype.next=function(t){$.proxy(this._overrides.to,this._core)(this.getPosition(!0),t)},n.prototype.prev=function(t){$.proxy(this._overrides.to,this._core)(this.getPosition(!1),t)},n.prototype.to=function(t,e,i){var n;i?$.proxy(this._overrides.to,this._core)(t,e):(n=this._pages.length,$.proxy(this._overrides.to,this._core)(this._pages[(t%n+n)%n].start,e))},$.fn.owlCarousel.Constructor.Plugins.Navigation=n}(window.Zepto||window.jQuery,window,document),function($,t,e,i){"use strict";var n=function(e){this._core=e,this._hashes={},this.$element=this._core.$element,this._handlers={"initialized.owl.carousel":$.proxy(function(){"URLHash"==this._core.settings.startPosition&&$(t).trigger("hashchange.owl.navigation")},this),"prepared.owl.carousel":$.proxy(function(t){var e=$(t.content).find("[data-hash]").andSelf("[data-hash]").attr("data-hash");this._hashes[e]=t.content},this)},this._core.options=$.extend({},n.Defaults,this._core.options),this.$element.on(this._handlers),$(t).on("hashchange.owl.navigation",$.proxy(function(){var e=t.location.hash.substring(1),i=this._core.$stage.children(),n=this._hashes[e]&&i.index(this._hashes[e])||0;return!!e&&void this._core.to(n,!1,!0)},this))};n.Defaults={URLhashListener:!1},n.prototype.destroy=function(){var e,i;$(t).off("hashchange.owl.navigation");for(e in this._handlers)this._core.$element.off(e,this._handlers[e]);for(i in Object.getOwnPropertyNames(this))"function"!=typeof this[i]&&(this[i]=null)},$.fn.owlCarousel.Constructor.Plugins.Hash=n}(window.Zepto||window.jQuery,window,document);var ubermenu_data={remove_conflicts:"on",reposition_on_load:"off",intent_delay:"300",intent_interval:"100",intent_threshold:"7",scrollto_offset:"50",responsive_breakpoint:"0",accessible:"on",retractor_display_strategy:"responsive"};!function($,t,e,i){"use strict";function n(e,i){var n=this;this.element=e,this.$ubermenu=$(this.element),this.orientation=this.$ubermenu.hasClass("ubermenu-vertical")?"v":"h",this.settings=$.extend({},r,i),this._defaults=r,this._name=s,this.settings.debug&&this.settings.debug_onscreen&&($("body").append('<div id="uber-onscreen-debug" style="color:#eee;z-index:10000;background:#222;position:fixed;left:0; bottom:0; width:100%; height:50%; padding:10px;overflow:scroll;"> '),this.debug_target=$("#uber-onscreen-debug"),this.debug_target.on("click",function(){$(this).height()<100?$(this).height("50%"):$(this).height("50px")})),this.log("-- START UBERMENU DEBUG --"),this.events_disabled=!1,this.suppress_clicks=!1,this.touchenabled="ontouchstart"in t||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,this.touchenabled?this.$ubermenu.addClass("ubermenu-touch"):this.$ubermenu.addClass("ubermenu-notouch"),t.navigator.pointerEnabled?(this.touchStart="pointerdown",this.touchEnd="pointerup",this.touchMove="pointermove",this.suppress_clicks=!0):t.navigator.msPointerEnabled?(this.touchStart="MSPointerDown",this.touchEnd="MSPointerUp",this.touchMove="MSPointerMove",this.suppress_clicks=!0):(this.touchStart="touchstart",this.touchEnd="touchend",this.touchMove="touchmove"),this.toggleevent="touchend"==this.touchEnd?this.touchEnd+" click":this.touchEnd,this.transitionend="transitionend.ubermenu webkitTransitionEnd.ubermenu msTransitionEnd.ubermenu oTransitionEnd.ubermenu",this.transitions=uber_supports("transition")&&!this.$ubermenu.hasClass("ubermenu-transition-none"),this.transitions||this.$ubermenu.addClass("ubermenu-no-transitions");var o=navigator.userAgent.toLowerCase();this.log(o),this.allow_trigger_overrides=!0,this.noTouchEnd=!1;var a=this.settings.android=/android/.test(o),l=this.settings.windowsmobile=/iemobile/.test(o);(a||l)&&(a&&!(/chrome/.test(o)||/firefox/.test(o)||/opera/.test(o))||l)&&(this.settings.touchOffClose=!1,this.disableTransitions(),a&&(this.$ubermenu.removeClass("ubermenu-trigger-hover_intent").removeClass("ubermenu-trigger-hover").addClass("ubermenu-trigger-click"),this.settings.touchEvents=!1,this.allow_trigger_overrides=!1)),l&&(this.log("disable touchoff close and accessibility"),this.settings.touchOffClose=!1,this.settings.accessible=!1,this.settings.mouseEvents=!1);var u=!/chrome/.test(o)&&/safari/.test(o)&&/version\/5/.test(o);u&&this.disableTransitions(),this.last_width=$(t).width();var h=this.last_width,c=n.$ubermenu.find(".ubermenu-item-level-0.ubermenu-align-right");c.size()&&$(t).ubersmartresize(function(){h=$(t).width(),n.last_width<=n.settings.breakpoint&&h>=n.settings.breakpoint&&(c.hide(),c[0].offsetHeight,c.show()),n.last_width=h}),this.settings.clicktest&&(this.touchEnd="click"),this.init()}var s="ubermenu",r={breakpoint:uber_op("responsive_breakpoint",{datatype:"numeric"},959),touchEvents:!0,mouseEvents:!0,retractors:!0,touchOffClose:!0,moveThreshold:10,submenuAnimationDuration:500,ignoreDummies:!0,clicktest:!1,windowstest:!1,debug:!1,debug_onscreen:!1,remove_conflicts:uber_op("remove_conflicts",{datatype:"boolean"},!0),reposition_on_load:uber_op("reposition_on_load",{datatype:"boolean"},!1),accessible:uber_op("accessible",{datatype:"boolean"},!0),retractor_display_strategy:uber_op("retractor_display_strategy",{datatype:"string"},"responsive"),intent_delay:uber_op("intent_delay",{datatype:"numeric"},300),intent_interval:uber_op("intent_interval",{datatype:"numeric"},100),intent_threshold:uber_op("intent_threshold",{datatype:"numeric"},300),scrollto_offset:uber_op("scrollto_offset",{datatype:"numeric"},0)},o,a,l,u;n.prototype={init:function(){this.log("Initializing UberMenu"),this.$ubermenu.removeClass("ubermenu-nojs"),this.removeConflicts(),this.initializeSubmenuToggleTouchEvents(),this.initializeSubmenuToggleMouseEvents(),this.initializeRetractors(),this.initializeResponsiveToggle(),this.initializeTouchoffClose(),this.initializeTabs(),this.initializeSubmenuPositioning(),this.initializeSegmentCurrentStates(),this.initializeAccessibilityOnTab(),this.initializeImageLazyLoad()},removeConflicts:function(){this.settings.remove_conflicts&&this.$ubermenu.find(".ubermenu-item, .ubermenu-target, .ubermenu-submenu").add(this.$ubermenu).removeAttr("style").unbind().off()},initializeAccessibilityOnTab:function(){if(this.settings.accessible){var t=this;$("body").on("keydown.ubermenu",function(e){var i=e.keyCode||e.which;9==i&&($("body").off("keydown.ubermenu"),t.initializeAccessibility())})}},initializeImageLazyLoad:function(){$(".ubermenu-item-level-0").one("ubermenuopen",function(){$(this).find(".ubermenu-image-lazyload").each(function(){$(this).attr("src",$(this).data("src")).removeClass("ubermenu-image-lazyload")})})},initializeAccessibility:function(){var t=this,e=".ubermenu-target, a, input, select, textarea";t.$current_focus=!1,t.mousedown=!1,t.$ubermenu.addClass("ubermenu-accessible"),t.$ubermenu.on("focus",e,function(){if(!t.mousedown){var i=$(this);t.$current_focus=i;var n=i.parent(".ubermenu-item");n.size()&&(n.is(".ubermenu-item-level-0")&&t.closeAllSubmenus(),n.is(".ubermenu-has-submenu-drop")&&setTimeout(function(){i.is(":focus")&&(n.siblings(".ubermenu-has-submenu-drop").each(function(){t.closeSubmenu($(this),"umac",t)}),t.openSubmenu(n,"umac",t))},500),i.on("blur.ubermenu",e,function(e){t.mousedown||(t.$current_focus=!1,$(this).off("blur.ubermenu"),setTimeout(function(){t.$current_focus||t.closeAllSubmenus();
},500)),t.mousedown=!1}))}t.mousedown=!1}),t.$ubermenu.on("mousedown",function(e){t.mousedown=!0,setTimeout(function(){t.mousedown=!1},100)})},initializeSubmenuPositioning:function(){var e=this;e.positionSubmenus(),$(t).ubersmartresize(function(){e.positionSubmenus()}),this.settings.reposition_on_load&&$(t).load(function(){e.positionSubmenus()})},initializeSubmenuToggleTouchEvents:function(){if(this.settings.touchEvents){var t=this;this.$ubermenu.on(this.touchStart,".ubermenu-target",function(e){t.handleTouchInteraction(e,this,t)}),this.$ubermenu.on("click",".ubermenu-has-submenu-drop > .ubermenu-target, .ubermenu-tab.ubermenu-item-has-children > .ubermenu-target",function(e){t.handleClicks(e,this,t)})}},initializeSubmenuToggleMouseEvents:function(t){if(t=t||this,t.settings.mouseEvents&&!t.settings.clicktest&&!t.settings.windowstest){t.log("initializeSubmenuToggleMouseEvents");var e="",i="hover";t.$ubermenu.hasClass("ubermenu-trigger-click")?i="click":t.$ubermenu.hasClass("ubermenu-trigger-hover_intent")&&(i="hover_intent"),"click"==i?this.suppress_clicks||(e="click.ubermenu-submenu-toggle",this.$ubermenu.on(e,".ubermenu-item.ubermenu-has-submenu-drop:not([data-ubermenu-trigger]) > .ubermenu-target",function(e){t.handleMouseClick(e,this,t)}),this.$ubermenu.on("click.ubermenu-click-target",".ubermenu-item:not(.ubermenu-has-submenu-drop):not([data-ubermenu-trigger]) > .ubermenu-target",function(e){t.handleLink(e,this,t)})):"hover_intent"==i?(e="mouseenter.mouse_intent",this.$ubermenu.on(e,".ubermenu-item.ubermenu-has-submenu-drop:not([data-ubermenu-trigger])",function(e){t.handleMouseIntent(e,this,t)}),this.$ubermenu.on("click.ubermenu-click-target",".ubermenu-item:not([data-ubermenu-trigger]) > .ubermenu-target",function(e){t.handleLink(e,this,t)})):(e="mouseenter.ubermenu-submenu-toggle",this.$ubermenu.on(e,".ubermenu-item.ubermenu-has-submenu-drop:not([data-ubermenu-trigger]) > .ubermenu-target",function(e){t.handleMouseover(e,this,t)}),this.$ubermenu.on("click.ubermenu-click-target",".ubermenu-item:not([data-ubermenu-trigger]) > .ubermenu-target",function(e){t.handleLink(e,this,t)})),this.allow_trigger_overrides?t.$ubermenu.find(".ubermenu-item[data-ubermenu-trigger]").each(function(){var e=$(this);i=e.data("ubermenu-trigger"),"click"==i?this.suppress_clicks||e.on("click.ubermenu-submenu-toggle",".ubermenu-target",function(e){t.handleMouseClick(e,this,t)}):"hover_intent"==i?e.on("mouseenter.mouse_intent",function(e){t.handleMouseIntent(e,this,t)}):e.on("mouseenter.ubermenu-submenu-toggle",".ubermenu-target",function(e){t.handleMouseover(e,this,t)})}):t.$ubermenu.find(".ubermenu-tab").on("click.ubermenu-submenu-toggle",".ubermenu-target",function(e){t.handleMouseClick(e,this,t)})}},disableSubmenuToggleMouseEvents:function(){this.log("disableSubmenuToggleMouseEvents"),this.events_disabled=!0},reenableSubmenuToggleMouseEvents:function(t){t=t||this,t.log("reenableSubmenuToggleMouseEvents"),t.events_disabled=!1},initializeRetractors:function(){if(this.settings.retractors){var t=this;this.$ubermenu.on("click",".ubermenu-retractor",function(e){t.handleSubmenuRetractorEnd(e,this,t)}),this.settings.touchEvents&&this.$ubermenu.on(this.touchStart,".ubermenu-retractor",function(e){t.handleSubmenuRetractorStart(e,this,t)}),this.touchenabled||"touch"!=t.settings.retractor_display_strategy||(this.$ubermenu.find(".ubermenu-retractor-mobile").remove(),this.$ubermenu.find(".ubermenu-submenu-retractor-top").removeClass("ubermenu-submenu-retractor-top").removeClass("ubermenu-submenu-retractor-top-2"))}},initializeResponsiveToggle:function(){var t=this,i=".ubermenu-responsive-toggle[data-ubermenu-target="+t.$ubermenu.attr("id")+"], .ubermenu-responsive-toggle[data-ubermenu-target=_any_]";t.log("initializeResponsiveToggle "+this.toggleevent),$(e).on(this.toggleevent,i,function(e){t.handleResponsiveToggle(e,this,t)})},initializeTouchoffClose:function(){if(this.settings.touchOffClose){var t=this;$(e).on(this.touchEnd+".ubermenu_touchoff",function(e){t.handleTouchoffClose(e,this,t)}),this.suppress_clicks||$(e).on("mouseup.ubermenu_clickoff",function(e){t.handleTouchoffClose(e,this,t)})}},initializeTabs:function(){var e=this;e.$tab_blocks=e.$ubermenu.find(".ubermenu-tabs"),e.$tab_blocks=$(e.$tab_blocks.get().reverse()),$(t).load(function(){e.sizeTabs()}),$(t).ubersmartresize(function(){e.$ubermenu.find(".ubermenu-tabs , .ubermenu-tab-content-panel , .ubermenu-tabs-group").css("min-height",""),e.sizeTabs()}),e.$ubermenu.find(".ubermenu-item-level-0.ubermenu-has-submenu-drop").on("ubermenuopen.sizetabs",function(){$(this).off("ubermenuopen.sizetabs"),e.sizeTabs()}),e.$ubermenu.find(".ubermenu-tabs-show-default > .ubermenu-tabs-group").each(function(){e.openSubmenu($(this).find("> .ubermenu-tab").first(),"tab default",e)})},sizeTabs:function(){var e=this,i=$(t).width()<e.settings.breakpoint;e.$tab_blocks.each(function(){var t=!1;!$(this).hasClass("ubermenu-tab-layout-top")&&!$(this).hasClass("ubermenu-tab-layout-bottom")||i||(t=!0);var e=0,n;n=i?$(this).parentsUntil(".ubermenu").add($(this).parents(".ubermenu")):$(this).parentsUntil(".ubermenu-item-level-0"),n.addClass("ubermenu-test-dimensions");var s=$(this).find(" > .ubermenu-tabs-group > .ubermenu-tab > .ubermenu-tab-content-panel");s.each(function(){$(this).addClass("ubermenu-test-dimensions"),$(this).outerHeight()>e&&(e=$(this).outerHeight()),$(this).removeClass("ubermenu-test-dimensions")});var r=$(this).find("> .ubermenu-tabs-group");if(t?$(this).css("min-height",e+r.outerHeight()):(r.outerHeight()>e&&(e=$(this).outerHeight()),r.css("min-height",e)),i)$(this).closest(".ubermenu-submenu-drop").css("min-height",e),s.css("min-height",!1);else{var o=$(this).closest(".ubermenu-submenu-drop");o.css("min-height",!1),s.css("min-height",e)}n.removeClass("ubermenu-test-dimensions")})},initializeSegmentCurrentStates:function(){this.$ubermenu.find(".ubermenu-current-menu-item").first().parents(".ubermenu-item").addClass("ubermenu-current-menu-ancestor")},disableTransitions:function(){this.transitions=!1,this.$ubermenu.removeClass("ubermenu-transition-slide").removeClass("ubermenu-transition-fade").removeClass("ubermenu-transition-shift").addClass("ubermenu-no-transitions").addClass("ubermenu-transition-none")},handleClicks:function(t,e,i){var n=$(e);n.data("ubermenu-killClick")&&(t.preventDefault(),i.log("killed click after touchend ",t))},handleTouchInteraction:function(t,e,i){t.stopPropagation(),t.type.indexOf("pointer")>=0&&i.disableTransitions();var n=$(e);if(n.parent().off("mouseleave.mouse_intent_none"),i.log("touchstart "+t.type+" "+n.text(),t),n.on(i.touchEnd,function(t){i.handleTap(t,this,i)}),n.on(i.touchMove,function(t){i.preventInteractionOnScroll(t,this,i)}),t.originalEvent.touches)n.data("ubermenu-startX",t.originalEvent.touches[0].clientX),n.data("ubermenu-startY",t.originalEvent.touches[0].clientY);else if(t.originalEvent.clientY){var s=n.offset();n.data("ubermenu-startX",t.originalEvent.clientX),n.data("ubermenu-startY",t.originalEvent.clientY)}},preventInteractionOnScroll:function(t,e,i){i.log("touchmove interaction "+t.type,t);var n=$(e);if(t.originalEvent.touches)Math.abs(t.originalEvent.touches[0].clientX-n.data("ubermenu-startX"))>i.settings.moveThreshold||Math.abs(t.originalEvent.touches[0].clientY-n.data("ubermenu-startY"))>i.settings.moveThreshold?(i.log("Preventing interaction on scroll, reset handlers (standard)"),i.resetHandlers(n,"preventScroll touches",i)):i.log("diff = "+Math.abs(t.originalEvent.touches[0].clientY-n.data("ubermenu-startY")));else if(t.originalEvent.clientY){var s=n.data(s);Math.abs(t.originalEvent.clientX-n.data("ubermenu-startX"))>i.settings.moveThreshold||Math.abs(t.originalEvent.clientY-n.data("ubermenu-startY"))>i.settings.moveThreshold?(i.log("Preventing interaction on scroll, reset handlers (standard)"),i.resetHandlers(n,"preventScroll client",i)):i.log("diff = "+t.originalEvent.clientY+" - "+n.data("ubermenu-startY")+" = "+Math.abs(t.originalEvent.clientY-n.data("ubermenu-startY")))}else i.log("no touch points found!")},handleTap:function(t,e,i){t.preventDefault(),t.stopPropagation();var n=$(e);if(n.data("ubermenu-killTouch"))i.log("kill tap"),t.preventDefault(),t.stopPropagation();else{var s=n.parent();i.log("handleTap ["+n.text()+"]",t.type),n.data("ubermenu-killClick",!0),n.data("ubermenu-killHover",!0),setTimeout(function(){n.data("ubermenu-killClick",!1).data("ubermenu-killHover",!1)},1e3),i.closeSubmenuInstantly(s.siblings(".ubermenu-active")),s.hasClass("ubermenu-has-submenu-drop")?s.hasClass("ubermenu-active")?(s.hasClass("ubermenu-tab")||i.closeSubmenu(s,"toggleUberMenuActive",i),i.handleLink(t,e,i,!0)):i.openSubmenu(s,"toggle",i):i.handleLink(t,e,i,!0)}n.data("ubermenu-killTouch",!1),i.resetHandlers(n,"handleTap",i)},handleLink:function(e,i,n,s){s=s||!1,n.log("handleLink");var r=$(i);if(r.is("a")){var o=r.attr("href"),a=r.data("ubermenu-scrolltarget");if(a){var l=$(a).first();if(l.size()>0)return e.preventDefault(),$("html,body").animate({scrollTop:l.offset().top-n.settings.scrollto_offset},1e3,"swing",function(){n.closeSubmenu(r.parent(".menu-item"),"handeLink")}),!1;o&&o.indexOf("#")==-1&&(a.indexOf("#")==-1&&(a="#"+a),t.location=o+a,e.preventDefault())}o?s&&e.isDefaultPrevented()&&(n.log("default prevented, follow link"),"_blank"==r.attr("target")?t.open(o,"_blank"):t.location=o):e.preventDefault()}},handleMouseClick:function(t,e,i){i.log("handleMouseClick",t);var n=$(e);if(n.data("ubermenu-killClick"))return void i.log("handleMouseClick: killClick");var s=n.parent(".ubermenu-item");s.size()&&(s.hasClass("ubermenu-active")?(n.is("a")&&i.handleLink(t,e,i),s.hasClass("ubermenu-tab")||i.closeSubmenu(s,"retract")):s.hasClass("ubermenu-has-submenu-drop")&&(t.preventDefault(),i.closeSubmenuInstantly(s.siblings(".ubermenu-active")),i.openSubmenu(s,"click",i)))},handleMouseIntent:function(t,e,i){i.log("handleMouseIntent");var n=$(e);n.data("mouse_intent_timer")&&n.data("mouse_intent_timer",clearTimeout(n.data("mouse_intent_timer")));var s=n.find(".ubermenu-target");return s.data("ubermenu-killHover")?(i.log("killHover MouseIntent"),t.preventDefault(),void t.stopPropagation()):(l=t.pageX,u=t.pageY,n.on("mousemove.mouse_intent",i.trackMouse),n.data("mouse_intent_timer",setTimeout(function(){i.compare(t,n,i.handleMouseIntentSuccess,i)},i.settings.intent_interval)),void n.on("mouseleave.mouse_intent_none",function(){return $(this).data("mouse_intent_timer",clearTimeout($(this).data("mouse_intent_timer"))),n.data("mouse_intent_state",0),n.off("mouseleave.mouse_intent_none"),s.data("ubermenu-killHover")?(i.log("killHover MouseIntent_Cancel"),t.preventDefault(),void t.stopPropagation()):void i.closeSubmenu(n,"mouse_intent_cancel",i)}))},handleMouseIntentSuccess:function(t,e,i){i.log("handleMouseIntentSuccess"),e.off("mouseleave.mouse_intent_none");var n=e.find(".ubermenu-target");return n.data("ubermenu-killHover")?(i.log("Kill hover on IntentSuccess"),t.preventDefault(),void t.stopPropagation()):(n.data("ubermenu-killHover",!1),i.triggerSubmenu(t,e,i),void(e.hasClass("ubermenu-tab")||e.on("mouseleave.mouse_intent",function(t){i.handleMouseIntentLeave(t,this,i)})))},handleMouseIntentLeave:function(t,e,i){var n=$(e);n.data("mouse_intent_timer")&&n.data("mouse_intent_timer",clearTimeout(n.data("mouse_intent_timer"))),n.off("mousemove.mouse_intent",i.trackMouse),1==n.data("mouse_intent_state")&&n.data("mouse_intent_timer",setTimeout(function(){i.delayMouseLeave(t,n,i.handleMouseIntentLeaveSuccess,i)},i.settings.intent_delay))},handleMouseIntentLeaveSuccess:function(t,e,i){e.off("mouseleave.mouse_intent"),e.find("> .ubermenu-target").data("ubermenu-killHover")||i.closeSubmenu(e,"mouse_intent_leave",i)},delayMouseLeave:function(t,e,i,n){return e.data("mouse_intent_timer",clearTimeout(e.data("mouse_intent_timer"))),e.data("mouse_intent_state",0),i.apply(e,[t,e,n])},trackMouse:function(t){o=t.pageX,a=t.pageY},compare:function(t,e,i,n){return e.data("mouse_intent_timer",clearTimeout(e.data("mouse_intent_timer"))),Math.abs(l-o)+Math.abs(u-a)<n.settings.intent_threshold?(e.off("mousemove.mouse_intent",n.track),e.data("mouse_intent_state",1),i.apply(e,[t,e,n])):(l=o,u=a,e.data("mouse_intent_timer",setTimeout(function(){n.compare(t,e,i,n)},n.settings.intent_interval)),void 0)},triggerSubmenu:function(t,e,i){i.closeSubmenuInstantly(e.siblings(".ubermenu-active, .ubermenu-in-transition")),i.openSubmenu(e,"mouseenter",i)},handleMouseover:function(t,e,i){if(!i.events_disabled){var n=$(e);n.data("ubermenu-killTouch",!0),setTimeout(function(){n.data("ubermenu-killTouch",!1)},1e3),i.log("handleMouseenter, add mouseleave",t);var s=n.parent(".ubermenu-item");s.size()&&(s.hasClass("ubermenu-active")||(i.triggerSubmenu(t,s,i),s.hasClass("ubermenu-tab")||s.on("mouseleave.ubermenu-submenu-toggle",function(t){i.handleMouseout(t,this,i)})))}},handleMouseout:function(t,e,i){i.log("handleMouseout, remove mouseout",t),$(e).off("mouseleave.ubermenu-submenu-toggle"),i.closeSubmenu($(e),"mouseout")},handleSubmenuRetractorStart:function(t,e,i){t.preventDefault(),t.stopPropagation(),$(e).on(i.touchEnd,function(t){i.handleSubmenuRetractorEnd(t,this,i)}),i.log("handleSubmenuRetractorStart "+$(e).text())},handleSubmenuRetractorEnd:function(t,e,i){t.preventDefault(),t.stopPropagation();var n=$(e).closest(".ubermenu-item");return i.closeSubmenu(n,"handleSubmenuRetractor"),$(e).off(i.touchEnd),i.log("handleSubmenuRetractorEnd "+n.find("> .ubermenu-target").text()),!1},handleResponsiveToggle:function(t,e,i){if(i.log("handleResponsiveToggle "+t.type,t),t.preventDefault(),t.stopPropagation(),"touchend"==t.type)i.$ubermenu.data("ubermenu-prevent-click",!0),setTimeout(function(){i.$ubermenu.data("ubermenu-prevent-click",!1)},500);else if("click"==t.type&&i.$ubermenu.data("ubermenu-prevent-click"))return void i.$ubermenu.data("ubermenu-prevent-click",!1);var n=$(e);i.$ubermenu.toggleClass("ubermenu-responsive-collapse"),i.transitions&&(i.$ubermenu.addClass("ubermenu-in-transition"),i.$ubermenu.on(i.transitionend+"_toggleubermenu",function(){i.$ubermenu.removeClass("ubermenu-in-transition"),i.$ubermenu.off(i.transitionend+"_toggleubermenu")}))},handleTouchoffClose:function(e,i,n){$(e.target).closest(".ubermenu").length||(n.log("touchoff close ",e),n.closeAllSubmenus()&&(n.disableSubmenuToggleMouseEvents(),t.setTimeout(function(){n.reenableSubmenuToggleMouseEvents(n)},n.settings.submenuAnimationDuration)))},positionSubmenus:function(){var t=this;"h"==t.orientation&&t.$ubermenu.find(".ubermenu-submenu-drop.ubermenu-submenu-align-center").each(function(){var e=$(this).parent(".ubermenu-item"),i=$(this),n;if(t.$ubermenu.hasClass("ubermenu-bound"))n=e.closest(".ubermenu , .ubermenu-submenu");else if(t.$ubermenu.hasClass("ubermenu-bound-inner"))n=e.closest(".ubermenu-nav , .ubermenu-submenu");else{var s=e.closest(".ubermenu-submenu");0===s.size()&&(n=t.$ubermenu.offsetParent())}var r=i.outerWidth(),o=e.outerWidth(),a=e.offset().left,l=n.width(),u=n.offset().left,h=a+o/2-(u+r/2),c=h>0?h:0;r>l?c=(r-l)/-2:c+r>l&&(i.css({right:0,left:"auto"}),c=!1),c!==!1&&i.css("left",c)})},openSubmenu:function(t,e,i){i=i||this,i.log("Open Submenu "+e),t.hasClass("ubermenu-active")||(t.addClass("ubermenu-active"),i.transitions&&(t.addClass("ubermenu-in-transition"),t.find("> .ubermenu-submenu").on(i.transitionend+"_opensubmenu",function(){i.log("finished submenu open transition"),t.removeClass("ubermenu-in-transition"),$(this).off(i.transitionend+"_opensubmenu")})),t.trigger("ubermenuopen"))},closeSubmenu:function(t,e,i){i=i||this,i.log("closeSubmenu "+t.find(">a").text()+" ["+e+"]"),t.hasClass("ubermenu-item-has-children")&&t.hasClass("ubermenu-active")&&(i.transitions&&t.addClass("ubermenu-in-transition"),t.each(function(){var t=$(this),e=t.find("> ul");i.transitions&&e.on(i.transitionend+"_closesubmenu",function(){i.log("finished submenu close transition"),t.removeClass("ubermenu-in-transition"),e.off(i.transitionend+"_closesubmenu")})})),t.removeClass("ubermenu-active"),t.trigger("ubermenuclose")},closeSubmenuInstantly:function(t){if(0!==t.size()){var e=this;t.addClass("ubermenu-notransition"),t.removeClass("ubermenu-active").removeClass("ubermenu-in-transition"),t[0].offsetHeight,t.removeClass("ubermenu-notransition"),t.trigger("ubermenuclose")}},closeAllSubmenus:function(){var t=this.$ubermenu.find(".ubermenu-item-level-0.ubermenu-active");return t.length&&this.closeSubmenuInstantly(t),t.length},resetHandlers:function(t,e,i){i.log("ResetHandlers: "+e),t.off(this.touchEnd),t.off(this.touchMove);var n=t.parent();n.off("mousemove.mouse_intent"),n.off("mouseleave.mouse_intent_none"),n.data("mouse_intent_timer",clearTimeout(n.data("mouse_intent_timer"))),n.data("mouse_intent_state",0)},log:function(t,e,i){i=i||this,i.settings.debug&&(i.settings.debug_onscreen?this.debug_target.prepend('<div class="um-debug-content">'+t+"</div>"):console.log(t,e))}},$.fn[s]=function(t){var e=arguments;if(t===i||"object"==typeof t)return this.each(function(){$.data(this,"plugin_"+s)||$.data(this,"plugin_"+s,new n(this,t))});if("string"==typeof t&&"_"!==t[0]&&"init"!==t){var r;return this.each(function(){var i=$.data(this,"plugin_"+s);i instanceof n&&"function"==typeof i[t]&&(r=i[t].apply(i,Array.prototype.slice.call(e,1))),"destroy"===t&&$.data(this,"plugin_"+s,null)}),r!==i?r:this}}}(jQuery,window,document),jQuery(document).ready(function($){if("."==window.location.hash.substring(1,2)){var t=$(window.location.hash.substring(1));t.size()&&window.scrollTo(0,t.offset().top)}$("#wp-admin-bar-ubermenu_loading").remove(),$(".ubermenu").ubermenu({}),"undefined"!=typeof google&&"undefined"!=typeof google.maps&&"undefined"!=typeof google.maps.LatLng&&$(".ubermenu-map-canvas").each(function(){var t=$(this),e=t.attr("data-zoom")?parseInt(t.attr("data-zoom")):8,i=t.attr("data-lat")?new google.maps.LatLng(t.attr("data-lat"),t.attr("data-lng")):new google.maps.LatLng(40.7143528,-74.0059731),n={zoom:e,mapTypeId:google.maps.MapTypeId.ROADMAP,center:i},s=new google.maps.Map(this,n);if(t.attr("data-address")){var r=new google.maps.Geocoder;r.geocode({address:t.attr("data-address")},function(e,n){if(n==google.maps.GeocoderStatus.OK){s.setCenter(e[0].geometry.location),i=e[0].geometry.location;var r=new google.maps.Marker({map:s,position:e[0].geometry.location,title:t.attr("data-mapTitle")})}})}else var o=new google.maps.Marker({map:s,position:i,title:t.attr("data-mapTitle")});var a=$(this).closest(".ubermenu-has-submenu-drop"),l=function(){google.maps.event.trigger(s,"resize"),s.setCenter(i),a.off("ubermenuopen",l)};a.on("ubermenuopen",l)})}),function($,t){var e=function(t,e,i){var n;return function s(){function r(){i||t.apply(o,a),n=null}var o=this,a=arguments;n?clearTimeout(n):i&&t.apply(o,a),n=setTimeout(r,e||100)}};jQuery.fn[t]=function(i){return i?this.bind("resize",e(i)):this.trigger(t)}}(jQuery,"ubersmartresize");var uber_supports=function(){var t=document.createElement("div"),e="Khtml Ms O Moz Webkit".split(" ");return function(i){var n=e.length;if(i in t.style)return!0;for(i=i.replace(/^[a-z]/,function(t){return t.toUpperCase()});n--;)if(e[n]+i in t.style)return!0;return!1}}();(function(){var $,t,e,i,n,s,r,o,a,l,u,h,c,d,p,g,f,m,v,b,y,w,x,_,k,C={}.hasOwnProperty,T=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1},S=function(t,e){return function(){return t.apply(e,arguments)}},D=[].slice;_=Array.prototype.slice,$=function(t,e){return null==e&&(e=document),"object"==typeof t||"undefined"!=typeof exports&&null!==exports?t:e.querySelector(t)},w=function(){function t(){}return t.uniqid=function(){var t;return t=0,{get:function(){return t++}}}(),t.extend=function(t){var e,i,n,s,r,o;for(i=t,s=_.call(arguments,1),r=0,o=s.length;r<o;r++){e=s[r];for(n in e)C.call(e,n)&&(i[n]=e[n])}return i},t.clampRGB=function(t){return t<0?0:t>255?255:t},t.copyAttributes=function(t,e,i){var n,s,r,o,a,l;for(null==i&&(i={}),o=t.attributes,l=[],s=0,r=o.length;s<r;s++)n=o[s],null!=i.except&&(a=n.nodeName,T.call(i.except,a)>=0)||l.push(e.setAttribute(n.nodeName,n.nodeValue));return l},t}(),"undefined"!=typeof exports&&null!==exports?(b=exports,r=require("canvas"),c=r.Image,l=require("fibers"),x=require("fs")):b=window,b.Caman=n=function(){function e(){var i,n,s,r=this;if(0===arguments.length)throw"Invalid arguments";return this instanceof e?(this.finishInit=this.finishInit.bind(this),this.imageLoaded=this.imageLoaded.bind(this),i=arguments[0],e.NodeJS||(s=parseInt(e.getAttrId(i[0]),10),n="function"==typeof i[1]?i[1]:"function"==typeof i[2]?i[2]:function(){},isNaN(s)||!y.has(s))?(this.id=w.uniqid.get(),this.originalPixelData=[],this.pixelStack=[],this.layerStack=[],this.canvasQueue=[],this.currentLayer=null,this.scaled=!1,this.analyze=new t(this),this.renderer=new v(this),this.domIsLoaded(function(){return r.parseArguments(i),r.setup()}),this):y.execute(s,n)):new e(arguments)}return e.version={release:"4.0.0",date:"1/6/13"},e.DEBUG=!1,e.NodeJS="undefined"!=typeof exports&&null!==exports,e.autoload=!e.NodeJS,e.crossOrigin="anonymous",e.toString=function(){return"Version "+e.version.release+", Released "+e.version.date},e.remoteProxy="",e.proxyParam="camanProxyUrl",e.getAttrId=function(t){return"string"==typeof t&&(t=$(t)),null==t||null==t.getAttribute?null:t.getAttribute("data-caman-id")},e.prototype.domIsLoaded=function(t){var i,n=this;return e.NodeJS?setTimeout(function(){return t.call(n)},0):"complete"===document.readyState?(p.debug("DOM initialized"),setTimeout(function(){return t.call(n)},0)):(i=function(){if("complete"===document.readyState)return p.debug("DOM initialized"),t.call(n)},document.addEventListener("readystatechange",i,!1))},e.prototype.parseArguments=function(t){if(0===t.length)throw"Invalid arguments given";if(this.initObj=null,this.initType=null,this.imageUrl=null,this.callback=function(){},this.setInitObject(t[0]),1!==t.length){switch(typeof t[1]){case"string":this.imageUrl=t[1];break;case"function":this.callback=t[1]}if(2!==t.length)return this.callback=t[2]}},e.prototype.setInitObject=function(t){return e.NodeJS?(this.initObj=t,void(this.initType="node")):("object"==typeof t?this.initObj=t:this.initObj=$(t),this.initType=this.initObj.nodeName.toLowerCase())},e.prototype.setup=function(){switch(this.initType){case"node":return this.initNode();case"img":return this.initImage();case"canvas":return this.initCanvas()}},e.prototype.initNode=function(){var t=this;return p.debug("Initializing for NodeJS"),this.image=new c,this.image.onload=function(){return p.debug("Image loaded. Width = "+t.image.width+", Height = "+t.image.height),t.canvas=new r(t.image.width,t.image.height),t.finishInit()},this.image.onerror=function(t){throw t},this.image.src=this.initObj},e.prototype.initImage=function(){return this.image=this.initObj,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),w.copyAttributes(this.image,this.canvas,{except:["src"]}),this.image.parentNode.replaceChild(this.canvas,this.image),this.imageAdjustments(),this.waitForImageLoaded()},e.prototype.initCanvas=function(){return this.canvas=this.initObj,this.context=this.canvas.getContext("2d"),null!=this.imageUrl?(this.image=document.createElement("img"),this.image.src=this.imageUrl,this.imageAdjustments(),this.waitForImageLoaded()):this.finishInit()},e.prototype.imageAdjustments=function(){if(this.needsHiDPISwap()&&(p.debug(this.image.src,"->",this.hiDPIReplacement()),this.swapped=!0,this.image.src=this.hiDPIReplacement()),h.isRemote(this.image))return this.image.src=h.proxyUrl(this.image.src),p.debug("Remote image detected, using URL = "+this.image.src)},e.prototype.waitForImageLoaded=function(){return this.image.complete?this.imageLoaded():this.image.onload=this.imageLoaded},e.prototype.imageLoaded=function(){return p.debug("Image loaded. Width = "+this.image.width+", Height = "+this.image.height),this.swapped?(this.canvas.width=this.image.width/this.hiDPIRatio(),this.canvas.height=this.image.height/this.hiDPIRatio()):(this.canvas.width=this.image.width,this.canvas.height=this.image.height),this.finishInit()},e.prototype.finishInit=function(){var t,e,i,n;for(null==this.context&&(this.context=this.canvas.getContext("2d")),this.originalWidth=this.width=this.canvas.width,this.originalHeight=this.height=this.canvas.height,this.hiDPIAdjustments(),this.assignId(),null!=this.image&&this.context.drawImage(this.image,0,0,this.image.width,this.image.height,0,0,this.originalWidth,this.originalHeight),this.imageData=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),this.pixelData=this.imageData.data,n=this.pixelData,e=0,i=n.length;e<i;e++)t=n[e],this.originalPixelData.push(t);return this.dimensions={width:this.canvas.width,height:this.canvas.height},y.put(this.id,this),this.callback.call(this,this)},e.prototype.assignId=function(){if(!e.NodeJS&&!this.canvas.getAttribute("data-caman-id"))return this.canvas.setAttribute("data-caman-id",this.id)},e.prototype.hiDPIDisabled=function(){return null!==this.canvas.getAttribute("data-caman-hidpi-disabled")},e.prototype.hiDPIAdjustments=function(){var t;if(!e.NodeJS&&!this.hiDPIDisabled())return t=this.hiDPIRatio(),1!==t?(p.debug("HiDPI ratio = "+t),this.scaled=!0,this.originalWidth=this.canvas.width,this.originalHeight=this.canvas.height,this.canvas.width=this.originalWidth*t,this.canvas.height=this.originalHeight*t,this.canvas.style.width=""+this.originalWidth+"px",this.canvas.style.height=""+this.originalHeight+"px",this.context.scale(t,t),this.width=this.canvas.width,this.height=this.canvas.height):void 0},e.prototype.hiDPIRatio=function(){var t,e;return e=window.devicePixelRatio||1,t=this.context.webkitBackingStorePixelRatio||this.context.mozBackingStorePixelRatio||this.context.msBackingStorePixelRatio||this.context.oBackingStorePixelRatio||this.context.backingStorePixelRatio||1,e/t},e.prototype.hiDPICapable=function(){return 1!==window.devicePixelRatio},e.prototype.needsHiDPISwap=function(){return!(this.hiDPIDisabled()||!this.hiDPICapable())&&null!==this.hiDPIReplacement()},e.prototype.hiDPIReplacement=function(){return null==this.image?null:this.image.getAttribute("data-caman-hidpi")},e.prototype.replaceCanvas=function(t){var e;return e=this.canvas,this.canvas=t,e.parentNode.replaceChild(this.canvas,e),this.finishInit()},e.prototype.render=function(t){var e=this;return null==t&&(t=function(){}),a.trigger(this,"renderStart"),this.renderer.execute(function(){return e.context.putImageData(e.imageData,0,0),t.call(e)})},e.prototype.revert=function(t){var e,i,n,s,r;for(null==t&&(t=function(){}),r=this.originalPixelData,e=n=0,s=r.length;n<s;e=++n)i=r[e],this.pixelData[e]=i;return this.context.putImageData(this.imageData,0,0),t.call(this)},e.prototype.process=function(t,e){return this.renderer.add({type:u.Type.Single,name:t,processFn:e}),this},e.prototype.processKernel=function(t,e,i,n){var s,r,o;if(!i)for(i=0,s=r=0,o=e.length;0<=o?r<o:r>o;s=0<=o?++r:--r)i+=e[s];return this.renderer.add({type:u.Type.Kernel,name:t,adjust:e,divisor:i,bias:n||0}),this},e.prototype.processPlugin=function(t,e){return this.renderer.add({type:u.Type.Plugin,plugin:t,args:e}),this},e.prototype.newLayer=function(t){var e;return e=new d(this),this.canvasQueue.push(e),this.renderer.add({type:u.Type.LayerDequeue}),t.call(e),this.renderer.add({type:u.Type.LayerFinished}),this},e.prototype.executeLayer=function(t){return this.pushContext(t)},e.prototype.pushContext=function(t){return this.layerStack.push(this.currentLayer),this.pixelStack.push(this.pixelData),this.currentLayer=t,this.pixelData=t.pixelData},e.prototype.popContext=function(){return this.pixelData=this.pixelStack.pop(),this.currentLayer=this.layerStack.pop()},e.prototype.applyCurrentLayer=function(){return this.currentLayer.applyToParent()},e}(),t=function(){function t(t){this.c=t}return t.prototype.calculateLevels=function(){var t,e,i,n,s,r,o;for(e={r:{},g:{},b:{}},t=n=0;n<=255;t=++n)e.r[t]=0,e.g[t]=0,e.b[t]=0;for(t=s=0,o=this.c.pixelData.length;s<o;t=s+=4)e.r[this.c.pixelData[t]]++,e.g[this.c.pixelData[t+1]]++,e.b[this.c.pixelData[t+2]]++;for(i=this.c.pixelData.length/4,t=r=0;r<=255;t=++r)e.r[t]/=i,e.g[t]/=i,e.b[t]/=i;return e},t}(),n.DOMUpdated=function(){var t,e,i,n,r,o;if(e=document.querySelectorAll("img[data-caman]"),e.length>0){for(o=[],n=0,r=e.length;n<r;n++)t=e[n],o.push(i=new s(t,function(){return this.parse(),this.execute()}));return o}},n.autoload&&!function(){return"complete"===document.readyState?n.DOMUpdated():document.addEventListener("DOMContentLoaded",n.DOMUpdated,!1)}(),s=function(){function t(t,e){this.dataStr=t.getAttribute("data-caman"),this.caman=n(t,e.bind(this))}var e;return e="(\\w+)\\((.*?)\\)",t.prototype.parse=function(){var t,i,n,s,r,o,a,l,u,h,c,d;if(this.ele=this.caman.canvas,a=new RegExp(e,"g"),l=this.dataStr.match(a),l.length>0){for(a=new RegExp(e),d=[],u=0,h=l.length;u<h;u++){s=l[u],c=s.match(a),o=c[0],i=c[1],t=c[2],r=new Function("return function() {        this."+i+"("+t+");      };");try{n=r(),d.push(n.call(this.caman))}catch(t){d.push(p.debug(t))}}return d}},t.prototype.execute=function(){var t;return t=this.ele,this.caman.render(function(){return t.parentNode.replaceChild(this.toImage(),t)})},t}(),n.Blender=e=function(){function t(){}return t.blenders={},t.register=function(t,e){return this.blenders[t]=e},t.execute=function(t,e,i){return this.blenders[t](e,i)},t}(),n.Calculate=i=function(){function t(){}return t.distance=function(t,e,i,n){return Math.sqrt(Math.pow(i-t,2)+Math.pow(n-e,2))},t.randomRange=function(t,e,i){var n;return null==i&&(i=!1),n=t+Math.random()*(e-t),i?n.toFixed(i):Math.round(n)},t.luminance=function(t){return.299*t.r+.587*t.g+.114*t.b},t.bezier=function(t,e,i,n,s,r){var o,a,l,u,h,c,d,p,g,f,m,v,b,y,w,x,_,k,C,T,S,D,M,E,P,I,L;for(w=t[0],C=t[1],x=e[0],T=e[1],_=i[0],S=i[1],k=n[0],D=n[1],d={},h=parseInt(3*(x-w),10),l=3*(_-x)-h,o=k-w-h-l,c=3*(T-C),u=3*(S-T)-c,a=D-C-c-u,f=M=0;M<1e3;f=++M)y=f/1e3,p=Math.round(o*Math.pow(y,3)+l*Math.pow(y,2)+h*y+w),g=Math.round(a*Math.pow(y,3)+u*Math.pow(y,2)+c*y+C),s&&g<s?g=s:r&&g>r&&(g=r),d[p]=g;if(d.length<n[0]+1)for(f=E=0,I=n[0];0<=I?E<=I:E>=I;f=0<=I?++E:--E)if(null==d[f]){for(v=[f-1,d[f-1]],m=P=f,L=n[0];f<=L?P<=L:P>=L;m=f<=L?++P:--P)if(null!=d[m]){b=[m,d[m]];break}d[f]=v[1]+(b[1]-v[1])/(b[0]-v[0])*(f-v[0])}return null==d[n[0]]&&(d[n[0]]=d[n[0]-1]),d},t}(),o=function(){function t(){}return t.hexToRGB=function(t){var e,i,n;return"#"===t.charAt(0)&&(t=t.substr(1)),n=parseInt(t.substr(0,2),16),i=parseInt(t.substr(2,2),16),e=parseInt(t.substr(4,2),16),{r:n,g:i,b:e}},t.rgbToHSL=function(t,e,i){var n,s,r,o,a,l;return"object"==typeof t&&(e=t.g,i=t.b,t=t.r),t/=255,e/=255,i/=255,o=Math.max(t,e,i),a=Math.min(t,e,i),r=(o+a)/2,o===a?s=l=0:(n=o-a,l=r>.5?n/(2-o-a):n/(o+a),s=function(){switch(o){case t:return(e-i)/n+(e<i?6:0);case e:return(i-t)/n+2;case i:return(t-e)/n+4}}(),s/=6),{h:s,s:l,l:r}},t.hslToRGB=function(t,e,i){var n,s,r,o,a;return"object"==typeof t&&(e=t.s,i=t.l,t=t.h),0===e?a=s=n=i:(o=i<.5?i*(1+e):i+e-i*e,r=2*i-o,a=this.hueToRGB(r,o,t+1/3),s=this.hueToRGB(r,o,t),n=this.hueToRGB(r,o,t-1/3)),{r:255*a,g:255*s,b:255*n}},t.hueToRGB=function(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t},t.rgbToHSV=function(t,e,i){var n,s,r,o,a,l;return t/=255,e/=255,i/=255,r=Math.max(t,e,i),o=Math.min(t,e,i),l=r,n=r-o,a=0===r?0:n/r,r===o?s=0:(s=function(){switch(r){case t:return(e-i)/n+(e<i?6:0);case e:return(i-t)/n+2;case i:return(t-e)/n+4}}(),s/=6),{h:s,s:a,v:l}},t.hsvToRGB=function(t,e,i){var n,s,r,o,a,l,u,h;switch(o=Math.floor(6*t),s=6*t-o,a=i*(1-e),l=i*(1-s*e),h=i*(1-(1-s)*e),o%6){case 0:u=i,r=h,n=a;break;case 1:u=l,r=i,n=a;break;case 2:u=a,r=i,n=h;break;case 3:u=a,r=l,n=i;break;case 4:u=h,r=a,n=i;break;case 5:u=i,r=a,n=l}return{r:255*u,g:255*r,b:255*n}},t.rgbToXYZ=function(t,e,i){var n,s,r;return t/=255,e/=255,i/=255,t>.04045?t=Math.pow((t+.055)/1.055,2.4):t/=12.92,e>.04045?e=Math.pow((e+.055)/1.055,2.4):e/=12.92,i>.04045?i=Math.pow((i+.055)/1.055,2.4):i/=12.92,n=.4124*t+.3576*e+.1805*i,s=.2126*t+.7152*e+.0722*i,
r=.0193*t+.1192*e+.9505*i,{x:100*n,y:100*s,z:100*r}},t.xyzToRGB=function(t,e,i){var n,s,r;return t/=100,e/=100,i/=100,r=3.2406*t+-1.5372*e+-.4986*i,s=-.9689*t+1.8758*e+.0415*i,n=.0557*t+-.204*e+1.057*i,r>.0031308?r=1.055*Math.pow(r,.4166666667)-.055:r*=12.92,s>.0031308?s=1.055*Math.pow(s,.4166666667)-.055:s*=12.92,n>.0031308?n=1.055*Math.pow(n,.4166666667)-.055:n*=12.92,{r:255*r,g:255*s,b:255*n}},t.xyzToLab=function(t,e,i){var n,s,r,o,a,l;return"object"==typeof t&&(e=t.y,i=t.z,t=t.x),o=95.047,a=100,l=108.883,t/=o,e/=a,i/=l,t=t>.008856451679?Math.pow(t,.3333333333):7.787037037*t+.1379310345,e=e>.008856451679?Math.pow(e,.3333333333):7.787037037*e+.1379310345,i=i>.008856451679?Math.pow(i,.3333333333):7.787037037*i+.1379310345,r=116*e-16,n=500*(t-e),s=200*(e-i),{l:r,a:n,b:s}},t.labToXYZ=function(t,e,i){var n,s,r;return"object"==typeof t&&(e=t.a,i=t.b,t=t.l),s=(t+16)/116,n=s+e/500,r=s-i/200,n=n>.2068965517?n*n*n:.1284185493*(n-.1379310345),s=s>.2068965517?s*s*s:.1284185493*(s-.1379310345),r=r>.2068965517?r*r*r:.1284185493*(r-.1379310345),{x:95.047*n,y:100*s,z:108.883*r}},t.rgbToLab=function(t,e,i){var n;return"object"==typeof t&&(e=t.g,i=t.b,t=t.r),n=this.rgbToXYZ(t,e,i),this.xyzToLab(n)},t.labToRGB=function(t,e,i){},t}(),a=function(){function t(){}return t.events={},t.types=["processStart","processComplete","renderStart","renderFinished","blockStarted","blockFinished"],t.trigger=function(t,e,i){var n,s,r,o,a;if(this.events[e]&&this.events[e].length){for(o=this.events[e],a=[],s=0,r=o.length;s<r;s++)n=o[s],null===n.target||t.id===n.target.id?a.push(n.fn.call(t,i)):a.push(void 0);return a}},t.listen=function(t,e,i){var n,s;return"string"==typeof t&&(s=t,n=e,t=null,e=s,i=n),!(T.call(this.types,e)<0)&&(this.events[e]||(this.events[e]=[]),this.events[e].push({target:t,fn:i}),!0)},t}(),n.Event=a,n.Filter=u=function(){function t(){}return t.Type={Single:1,Kernel:2,LayerDequeue:3,LayerFinished:4,LoadOverlay:5,Plugin:6},t.register=function(t,e){return n.prototype[t]=e},t}(),n.IO=h=function(){function t(){}return t.domainRegex=/(?:(?:http|https):\/\/)((?:\w+)\.(?:(?:\w|\.)+))/,t.isRemote=function(t){var e;return null!=t&&(!this.corsEnabled(t)&&(e=t.src.match(this.domainRegex),!!e&&e[1]!==document.domain))},t.corsEnabled=function(t){var e;return null!=t.crossOrigin&&("anonymous"===(e=t.crossOrigin.toLowerCase())||"use-credentials"===e)},t.proxyUrl=function(t){return""+n.remoteProxy+"?"+n.proxyParam+"="+encodeURIComponent(t)},t.useProxy=function(t){var e;return e={ruby:"rb",python:"py",perl:"pl",javascript:"js"},t=t.toLowerCase(),null!=e[t]&&(t=e[t]),"proxies/caman_proxy."+t},t}(),n.prototype.save=function(){return"undefined"!=typeof exports&&null!==exports?this.nodeSave.apply(this,arguments):this.browserSave.apply(this,arguments)},n.prototype.browserSave=function(t){var e;return null==t&&(t="png"),t=t.toLowerCase(),e=this.toBase64(t).replace("image/"+t,"image/octet-stream"),document.location.href=e},n.prototype.nodeSave=function(t,e){var i;null==e&&(e=!0);try{if(i=x.statSync(t),i.isFile()&&!e)return!1}catch(e){p.debug("Creating output file "+t)}return x.writeFile(t,this.canvas.toBuffer(),function(){return p.debug("Finished writing to "+t)})},n.prototype.toImage=function(t){var e;return e=document.createElement("img"),e.src=this.toBase64(t),e.width=this.dimensions.width,e.height=this.dimensions.height,window.devicePixelRatio&&(e.width/=window.devicePixelRatio,e.height/=window.devicePixelRatio),e},n.prototype.toBase64=function(t){return null==t&&(t="png"),t=t.toLowerCase(),this.canvas.toDataURL("image/"+t)},d=function(){function t(t){this.c=t,this.filter=this.c,this.options={blendingMode:"normal",opacity:1},this.layerID=w.uniqid.get(),this.canvas="undefined"!=typeof exports&&null!==exports?new r:document.createElement("canvas"),this.canvas.width=this.c.dimensions.width,this.canvas.height=this.c.dimensions.height,this.context=this.canvas.getContext("2d"),this.context.createImageData(this.canvas.width,this.canvas.height),this.imageData=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),this.pixelData=this.imageData.data}return t.prototype.newLayer=function(t){return this.c.newLayer.call(this.c,t)},t.prototype.setBlendingMode=function(t){return this.options.blendingMode=t,this},t.prototype.opacity=function(t){return this.options.opacity=t/100,this},t.prototype.copyParent=function(){var t,e,i,n;for(e=this.c.pixelData,t=i=0,n=this.c.pixelData.length;i<n;t=i+=4)this.pixelData[t]=e[t],this.pixelData[t+1]=e[t+1],this.pixelData[t+2]=e[t+2],this.pixelData[t+3]=e[t+3];return this},t.prototype.fillColor=function(){return this.c.fillColor.apply(this.c,arguments)},t.prototype.overlayImage=function(t){return"object"==typeof t?t=t.src:"string"==typeof t&&"#"===t[0]&&(t=$(t).src),t?(this.c.renderQueue.push({type:u.Type.LoadOverlay,src:t,layer:this}),this):this},t.prototype.applyToParent=function(){var t,i,n,s,r,o,a,l,u;for(n=this.c.pixelStack[this.c.pixelStack.length-1],i=this.c.pixelData,u=[],t=a=0,l=i.length;a<l;t=a+=4)o={r:n[t],g:n[t+1],b:n[t+2],a:n[t+3]},r={r:i[t],g:i[t+1],b:i[t+2],a:i[t+3]},s=e.execute(this.options.blendingMode,r,o),s.r=w.clampRGB(s.r),s.g=w.clampRGB(s.g),s.b=w.clampRGB(s.b),null==s.a&&(s.a=r.a),n[t]=o.r-(o.r-s.r)*(this.options.opacity*(s.a/255)),n[t+1]=o.g-(o.g-s.g)*(this.options.opacity*(s.a/255)),u.push(n[t+2]=o.b-(o.b-s.b)*(this.options.opacity*(s.a/255)));return u},t}(),g=function(){function t(){var t,e,i,s;for(s=["log","info","warn","error"],e=0,i=s.length;e<i;e++)t=s[e],this[t]=function(t){return function(){if(n.DEBUG)return console[t].apply(console,arguments)}}(t);this.debug=this.log}return t}(),p=new g,f=function(){function t(t){this.c=t,this.loc=0}return t.prototype.locationXY=function(){var t,e;return e=this.c.dimensions.height-Math.floor(this.loc/(4*this.c.dimensions.width)),t=this.loc%(4*this.c.dimensions.width)/4,{x:t,y:e}},t.prototype.getPixelRelative=function(t,e){var i;return i=this.loc+4*this.c.dimensions.width*(e*-1)+4*t,i>this.c.pixelData.length||i<0?{r:0,g:0,b:0,a:0}:{r:this.c.pixelData[i],g:this.c.pixelData[i+1],b:this.c.pixelData[i+2],a:this.c.pixelData[i+3]}},t.prototype.putPixelRelative=function(t,e,i){var n;if(n=this.loc+4*this.c.dimensions.width*(e*-1)+4*t,!(newLoc>this.c.pixelData.length||newLoc<0))return this.c.pixelData[newLoc]=i.r,this.c.pixelData[newLoc+1]=i.g,this.c.pixelData[newLoc+2]=i.b,this.c.pixelData[newLoc+3]=i.a,!0},t.prototype.getPixel=function(t,e){var i;return i=4*(e*this.c.dimensions.width+t),{r:this.c.pixelData[i],g:this.c.pixelData[i+1],b:this.c.pixelData[i+2],a:this.c.pixelData[i+3]}},t.prototype.putPixel=function(t,e,i){var n;return n=4*(e*this.c.dimensions.width+t),this.c.pixelData[n]=i.r,this.c.pixelData[n+1]=i.g,this.c.pixelData[n+2]=i.b,this.c.pixelData[n+3]=i.a},t}(),m=function(){function t(){}return t.plugins={},t.register=function(t,e){return this.plugins[t]=e},t.execute=function(t,e,i){return this.plugins[e].apply(t,i)},t}(),n.Plugin=m,n.Renderer=v=function(){function t(t){this.c=t,this.processNext=S(this.processNext,this),this.renderQueue=[],this.modPixelData=null}return t.Blocks=n.NodeJS?require("os").cpus().length:4,t.prototype.add=function(t){if(null!=t)return this.renderQueue.push(t)},t.prototype.processNext=function(){var t;if(0===this.renderQueue.length)return a.trigger(this,"renderFinished"),null!=this.finishedFn&&this.finishedFn.call(this.c),this;switch(this.currentJob=this.renderQueue.shift(),this.currentJob.type){case u.Type.LayerDequeue:return t=this.c.canvasQueue.shift(),this.c.executeLayer(t),this.processNext();case u.Type.LayerFinished:return this.c.applyCurrentLayer(),this.c.popContext(),this.processNext();case u.Type.LoadOverlay:return this.loadOverlay(this.currentJob.layer,this.currentJob.src);case u.Type.Plugin:return this.executePlugin();default:return this.executeFilter()}},t.prototype.execute=function(t){return this.finishedFn=t,this.modPixelData=new Uint8Array(this.c.pixelData.length),this.processNext()},t.prototype.eachBlock=function(e){var i,s,r,o,a,u,h,c,d,p,g,f=this;for(this.blocksDone=0,h=this.c.pixelData.length,s=Math.floor(h/4/t.Blocks),i=4*s,u=i+h/4%t.Blocks*4,g=[],a=d=0,p=t.Blocks;0<=p?d<p:d>p;a=0<=p?++d:--d)c=a*i,r=c+(a===t.Blocks-1?u:i),n.NodeJS?(o=l(function(){return e.call(f,a,c,r)}),g.push(o.run())):g.push(setTimeout(function(t,i,n){return function(){return e.call(f,t,i,n)}}(a,c,r),0));return g},t.prototype.executeFilter=function(){return a.trigger(this.c,"processStart",this.currentJob),this.currentJob.type===u.Type.Single?this.eachBlock(this.renderBlock):this.eachBlock(this.renderKernel)},t.prototype.executePlugin=function(){return p.debug("Executing plugin "+this.currentJob.plugin),m.execute(this.c,this.currentJob.plugin,this.currentJob.args),p.debug("Plugin "+this.currentJob.plugin+" finished!"),this.processNext()},t.prototype.renderBlock=function(e,i,s){var r,o,u,h,c;for(p.debug("Block #"+e+" - Filter: "+this.currentJob.name+", Start: "+i+", End: "+s),a.trigger(this.c,"blockStarted",{blockNum:e,totalBlocks:t.Blocks,startPixel:i,endPixel:s}),r={r:0,g:0,b:0,a:0},u=new f(this.c),o=c=i;c<s;o=c+=4)u.loc=o,r.r=this.c.pixelData[o],r.g=this.c.pixelData[o+1],r.b=this.c.pixelData[o+2],r.a=this.c.pixelData[o+3],h=this.currentJob.processFn.call(u,r),null==h.a&&(h.a=r.a),this.c.pixelData[o]=w.clampRGB(h.r),this.c.pixelData[o+1]=w.clampRGB(h.g),this.c.pixelData[o+2]=w.clampRGB(h.b),this.c.pixelData[o+3]=w.clampRGB(h.a);if(this.blockFinished(e),n.NodeJS)return l.yield()},t.prototype.renderKernel=function(t,e,i){var s,r,o,a,u,h,c,d,g,m,v,b,y,x,_,k,C,T;for(b=this.currentJob.name,o=this.currentJob.bias,h=this.currentJob.divisor,v=this.c.pixelData.length,s=this.currentJob.adjust,r=Math.sqrt(s.length),m=[],p.debug("Rendering kernel - Filter: "+this.currentJob.name),e=Math.max(e,4*this.c.dimensions.width*((r-1)/2)),i=Math.min(i,v-4*this.c.dimensions.width*((r-1)/2)),a=(r-1)/2,x=new f(this.c),c=k=e;k<i;c=k+=4){for(x.loc=c,u=0,d=C=-a;-a<=a?C<=a:C>=a;d=-a<=a?++C:--C)for(g=T=a;a<=-a?T<=-a:T>=-a;g=a<=-a?++T:--T)y=x.getPixelRelative(d,g),m[3*u]=y.r,m[3*u+1]=y.g,m[3*u+2]=y.b,u++;_=this.processKernel(s,m,h,o),this.modPixelData[c]=w.clampRGB(_.r),this.modPixelData[c+1]=w.clampRGB(_.g),this.modPixelData[c+2]=w.clampRGB(_.b),this.modPixelData[c+3]=this.c.pixelData[c+3]}if(this.blockFinished(t),n.NodeJS)return l.yield()},t.prototype.blockFinished=function(e){var i,n,s;if(e>=0&&p.debug("Block #"+e+" finished! Filter: "+this.currentJob.name),this.blocksDone++,a.trigger(this.c,"blockFinished",{blockNum:e,blocksFinished:this.blocksDone,totalBlocks:t.Blocks}),this.blocksDone===t.Blocks){if(this.currentJob.type===u.Type.Kernel)for(i=n=0,s=this.c.pixelData.length;0<=s?n<s:n>s;i=0<=s?++n:--n)this.c.pixelData[i]=this.modPixelData[i];return e>=0&&p.debug("Filter "+this.currentJob.name+" finished!"),a.trigger(this.c,"processComplete",this.currentJob),this.processNext()}},t.prototype.processKernel=function(t,e,i,n){var s,r,o,a;for(r={r:0,g:0,b:0},s=o=0,a=t.length;0<=a?o<a:o>a;s=0<=a?++o:--o)r.r+=t[s]*e[3*s],r.g+=t[s]*e[3*s+1],r.b+=t[s]*e[3*s+2];return r.r=r.r/i+n,r.g=r.g/i+n,r.b=r.b/i+n,r},t.prototype.loadOverlay=function(t,e){var i,n,s=this;return i=document.createElement("img"),i.onload=function(){return t.context.drawImage(i,0,0,s.c.dimensions.width,s.c.dimensions.height),t.imageData=t.context.getImageData(0,0,s.c.dimensions.width,s.c.dimensions.height),t.pixelData=t.imageData.data,s.c.pixelData=t.pixelData,s.processNext()},n=h.remoteCheck(e),i.src=null!=n?n:e},t}(),n.Store=y=function(){function t(){}return t.items={},t.has=function(t){return null!=this.items[t]},t.get=function(t){return this.items[t]},t.put=function(t,e){return this.items[t]=e},t.execute=function(t,e){var i=this;return setTimeout(function(){return e.call(i.get(t),i.get(t))},0),this.get(t)},t.flush=function(t){return null==t&&(t=!1),t?delete this.items[t]:this.items={}},t}(),e.register("normal",function(t,e){return{r:t.r,g:t.g,b:t.b}}),e.register("multiply",function(t,e){return{r:t.r*e.r/255,g:t.g*e.g/255,b:t.b*e.b/255}}),e.register("screen",function(t,e){return{r:255-(255-t.r)*(255-e.r)/255,g:255-(255-t.g)*(255-e.g)/255,b:255-(255-t.b)*(255-e.b)/255}}),e.register("overlay",function(t,e){var i;return i={},i.r=e.r>128?255-2*(255-t.r)*(255-e.r)/255:e.r*t.r*2/255,i.g=e.g>128?255-2*(255-t.g)*(255-e.g)/255:e.g*t.g*2/255,i.b=e.b>128?255-2*(255-t.b)*(255-e.b)/255:e.b*t.b*2/255,i}),e.register("difference",function(t,e){return{r:t.r-e.r,g:t.g-e.g,b:t.b-e.b}}),e.register("addition",function(t,e){return{r:e.r+t.r,g:e.g+t.g,b:e.b+t.b}}),e.register("exclusion",function(t,e){return{r:128-2*(e.r-128)*(t.r-128)/255,g:128-2*(e.g-128)*(t.g-128)/255,b:128-2*(e.b-128)*(t.b-128)/255}}),e.register("softLight",function(t,e){var i;return i={},i.r=e.r>128?255-(255-e.r)*(255-(t.r-128))/255:e.r*(t.r+128)/255,i.g=e.g>128?255-(255-e.g)*(255-(t.g-128))/255:e.g*(t.g+128)/255,i.b=e.b>128?255-(255-e.b)*(255-(t.b-128))/255:e.b*(t.b+128)/255,i}),e.register("lighten",function(t,e){return{r:e.r>t.r?e.r:t.r,g:e.g>t.g?e.g:t.g,b:e.b>t.b?e.b:t.b}}),e.register("darken",function(t,e){return{r:e.r>t.r?t.r:e.r,g:e.g>t.g?t.g:e.g,b:e.b>t.b?t.b:e.b}}),u.register("fillColor",function(){var t;return t=1===arguments.length?o.hexToRGB(arguments[0]):{r:arguments[0],g:arguments[1],b:arguments[2]},this.process("fillColor",function(e){return e.r=t.r,e.g=t.g,e.b=t.b,e.a=255,e})}),u.register("brightness",function(t){return t=Math.floor(255*(t/100)),this.process("brightness",function(e){return e.r+=t,e.g+=t,e.b+=t,e})}),u.register("saturation",function(t){return t*=-.01,this.process("saturation",function(e){var i;return i=Math.max(e.r,e.g,e.b),e.r!==i&&(e.r+=(i-e.r)*t),e.g!==i&&(e.g+=(i-e.g)*t),e.b!==i&&(e.b+=(i-e.b)*t),e})}),u.register("vibrance",function(t){return t*=-1,this.process("vibrance",function(e){var i,n,s;return s=Math.max(e.r,e.g,e.b),n=(e.r+e.g+e.b)/3,i=2*Math.abs(s-n)/255*t/100,e.r!==s&&(e.r+=(s-e.r)*i),e.g!==s&&(e.g+=(s-e.g)*i),e.b!==s&&(e.b+=(s-e.b)*i),e})}),u.register("greyscale",function(t){return this.process("greyscale",function(t){var e;return e=i.luminance(t),t.r=e,t.g=e,t.b=e,t})}),u.register("contrast",function(t){return t=Math.pow((t+100)/100,2),this.process("contrast",function(e){return e.r/=255,e.r-=.5,e.r*=t,e.r+=.5,e.r*=255,e.g/=255,e.g-=.5,e.g*=t,e.g+=.5,e.g*=255,e.b/=255,e.b-=.5,e.b*=t,e.b+=.5,e.b*=255,e})}),u.register("hue",function(t){return this.process("hue",function(e){var i,n,s;return n=o.rgbToHSV(e.r,e.g,e.b),i=100*n.h,i+=Math.abs(t),i%=100,i/=100,n.h=i,s=o.hsvToRGB(n.h,n.s,n.v),s.a=e.a,s})}),u.register("colorize",function(){var t,e;return 2===arguments.length?(e=o.hexToRGB(arguments[0]),t=arguments[1]):4===arguments.length&&(e={r:arguments[0],g:arguments[1],b:arguments[2]},t=arguments[3]),this.process("colorize",function(i){return i.r-=(i.r-e.r)*(t/100),i.g-=(i.g-e.g)*(t/100),i.b-=(i.b-e.b)*(t/100),i})}),u.register("invert",function(){return this.process("invert",function(t){return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,t})}),u.register("sepia",function(t){return null==t&&(t=100),t/=100,this.process("sepia",function(e){return e.r=Math.min(255,e.r*(1-.607*t)+e.g*(.769*t)+e.b*(.189*t)),e.g=Math.min(255,e.r*(.349*t)+e.g*(1-.314*t)+e.b*(.168*t)),e.b=Math.min(255,e.r*(.272*t)+e.g*(.534*t)+e.b*(1-.869*t)),e})}),u.register("gamma",function(t){return this.process("gamma",function(e){return e.r=255*Math.pow(e.r/255,t),e.g=255*Math.pow(e.g/255,t),e.b=255*Math.pow(e.b/255,t),e})}),u.register("noise",function(t){return t=2.55*Math.abs(t),this.process("noise",function(e){var n;return n=i.randomRange(t*-1,t),e.r+=n,e.g+=n,e.b+=n,e})}),u.register("clip",function(t){return t=2.55*Math.abs(t),this.process("clip",function(e){return e.r>255-t?e.r=255:e.r<t&&(e.r=0),e.g>255-t?e.g=255:e.g<t&&(e.g=0),e.b>255-t?e.b=255:e.b<t&&(e.b=0),e})}),u.register("channels",function(t){var e,i;if("object"!=typeof t)return this;for(e in t)C.call(t,e)&&(i=t[e],0!==i?t[e]/=100:delete t[e]);return 0===t.length?this:this.process("channels",function(e){return null!=t.red&&(t.red>0?e.r+=(255-e.r)*t.red:e.r-=e.r*Math.abs(t.red)),null!=t.green&&(t.green>0?e.g+=(255-e.g)*t.green:e.g-=e.g*Math.abs(t.green)),null!=t.blue&&(t.blue>0?e.b+=(255-e.b)*t.blue:e.b-=e.b*Math.abs(t.blue)),e})}),u.register("curves",function(){var t,e,n,s,r,o,a,l,u,h,c,d;if(e=arguments[0],n=2<=arguments.length?D.call(arguments,1):[],"string"==typeof e&&(e=e.split("")),"v"===e[0]&&(e=["r","g","b"]),n.length<3||n.length>4)throw"Invalid number of arguments to curves filter";if(l=n[0],s=n[1],r=4===n.length?n[2]:n[1],o=n[n.length-1],t=i.bezier(l,s,r,o,0,255),l[0]>0)for(a=u=0,c=l[0];0<=c?u<c:u>c;a=0<=c?++u:--u)t[a]=l[1];if(o[0]<255)for(a=h=d=o[0];d<=255?h<=255:h>=255;a=d<=255?++h:--h)t[a]=o[1];return this.process("curves",function(i){var n,s;for(a=n=0,s=e.length;0<=s?n<s:n>s;a=0<=s?++n:--n)i[e[a]]=t[i[e[a]]];return i})}),u.register("exposure",function(t){var e,i,n;return n=Math.abs(t)/100,e=[0,255*n],i=[255-255*n,255],t<0&&(e=e.reverse(),i=i.reverse()),this.curves("rgb",[0,0],e,i,[255,255])}),n.Filter.register("boxBlur",function(){return this.processKernel("Box Blur",[1,1,1,1,1,1,1,1,1])}),n.Filter.register("heavyRadialBlur",function(){return this.processKernel("Heavy Radial Blur",[0,0,1,0,0,0,1,1,1,0,1,1,1,1,1,0,1,1,1,0,0,0,1,0,0])}),n.Filter.register("gaussianBlur",function(){return this.processKernel("Gaussian Blur",[1,4,6,4,1,4,16,24,16,4,6,24,36,24,6,4,16,24,16,4,1,4,6,4,1])}),n.Filter.register("motionBlur",function(t){var e;return e=0===t||180===t?[0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0]:t>0&&t<90||t>180&&t<270?[0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0]:90===t||270===t?[0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0]:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],this.processKernel("Motion Blur",e)}),n.Filter.register("sharpen",function(t){return null==t&&(t=100),t/=100,this.processKernel("Sharpen",[0,-t,0,-t,4*t+1,-t,0,-t,0])}),k={brightness:function(t,e,i){return t.r=t.r-t.r*e*i.strength,t.g=t.g-t.g*e*i.strength,t.b=t.b-t.b*e*i.strength,t},gamma:function(t,e,i){return t.r=255*Math.pow(t.r/255,Math.max(10*e*i.strength,1)),t.g=255*Math.pow(t.g/255,Math.max(10*e*i.strength,1)),t.b=255*Math.pow(t.b/255,Math.max(10*e*i.strength,1)),t},colorize:function(t,e,i){return t.r-=(t.r-i.color.r)*e,t.g-=(t.g-i.color.g)*e,t.b-=(t.b-i.color.b)*e,t}},u.register("vignette",function(t,e){var n,s,r,o;return null==e&&(e=60),"string"==typeof t&&"%"===t.substr(-1)&&(t=this.dimensions.height>this.dimensions.width?this.dimensions.width*(parseInt(t.substr(0,t.length-1),10)/100):this.dimensions.height*(parseInt(t.substr(0,t.length-1),10)/100)),e/=100,s=[this.dimensions.width/2,this.dimensions.height/2],o=Math.sqrt(Math.pow(s[0],2)+Math.pow(s[1],2)),r=o-t,n=i.bezier([0,1],[30,30],[70,60],[100,80]),this.process("vignette",function(o){var a,l,u;return u=this.locationXY(),a=i.distance(u.x,u.y,s[0],s[1]),a>r&&(l=Math.max(1,n[Math.round((a-r)/t*100)]/10*e),o.r=255*Math.pow(o.r/255,l),o.g=255*Math.pow(o.g/255,l),o.b=255*Math.pow(o.b/255,l)),o})}),u.register("rectangularVignette",function(t){var e,s,r,a,l,u,h;if(e={strength:50,cornerRadius:0,method:"brightness",color:{r:0,g:0,b:0}},t=w.extend(e,t),!t.size)return this;if("string"==typeof t.size)r=parseInt(t.size,10)/100,t.size={width:this.dimensions.width*r,height:this.dimensions.height*r};else if("object"==typeof t.size)for(h=["width","height"],l=0,u=h.length;l<u;l++)s=h[l],"string"==typeof t.size[s]&&(t.size[s]=this.dimensions[s]*(parseInt(t.size[s],10)/100));else"number"===t.size&&(a=t.size,t.size={width:a,height:a});return"string"==typeof t.cornerRadius&&(t.cornerRadius=t.size.width/2*(parseInt(t.cornerRadius,10)/100)),t.strength/=100,t.size.width=Math.floor(t.size.width),t.size.height=Math.floor(t.size.height),t.image={width:this.dimensions.width,height:this.dimensions.height},"colorize"===t.method&&"string"==typeof t.color&&(t.color=o.hexToRGB(t.color)),t.coords={left:(this.dimensions.width-t.size.width)/2,right:this.dimensions.width-t.coords.left,bottom:(this.dimensions.height-t.size.height)/2,top:this.dimensions.height-t.coords.bottom},t.corners=[{x:t.coords.left+t.cornerRadius,y:t.coords.top-t.cornerRadius},{x:t.coords.right-t.cornerRadius,y:t.coords.top-t.cornerRadius},{x:t.coords.right-t.cornerRadius,y:t.coords.bottom+t.cornerRadius},{x:t.coords.left+t.cornerRadius,y:t.coords.bottom+t.cornerRadius}],t.maxDist=i.distance(0,0,t.corners[3].x,t.corners[3].y)-t.cornerRadius,this.process("rectangularVignette",function(e){var i,s,r;return s=this.locationXY(),s.x>t.corners[0].x&&s.x<t.corners[1].x&&s.y>t.coords.bottom&&s.y<t.coords.top?e:s.x>t.coords.left&&s.x<t.coords.right&&s.y>t.corners[3].y&&s.y<t.corners[2].y?e:(s.x>t.corners[0].x&&s.x<t.corners[1].x&&s.y>t.coords.top?i=(s.y-t.coords.top)/t.maxDist:s.y>t.corners[2].y&&s.y<t.corners[1].y&&s.x>t.coords.right?i=(s.x-t.coords.right)/t.maxDist:s.x>t.corners[0].x&&s.x<t.corners[1].x&&s.y<t.coords.bottom?i=(t.coords.bottom-s.y)/t.maxDist:s.y>t.corners[2].y&&s.y<t.corners[1].y&&s.x<t.coords.left?i=(t.coords.left-s.x)/t.maxDist:s.x<=t.corners[0].x&&s.y>=t.corners[0].y?(r=n.distance(s.x,s.y,t.corners[0].x,t.corners[0].y),i=(r-t.cornerRadius)/t.maxDist):s.x>=t.corners[1].x&&s.y>=t.corners[1].y?(r=n.distance(s.x,s.y,t.corners[1].x,t.corners[1].y),i=(r-t.cornerRadius)/t.maxDist):s.x>=t.corners[2].x&&s.y<=t.corners[2].y?(r=n.distance(s.x,s.y,t.corners[2].x,t.corners[2].y),i=(r-t.cornerRadius)/t.maxDist):s.x<=t.corners[3].x&&s.y<=t.corners[3].y&&(r=n.distance(s.x,s.y,t.corners[3].x,t.corners[3].y),i=(r-t.cornerRadius)/t.maxDist),i<0?e:k[t.method](e,i,t))})}),function(){var t,e,i,s,o;return s=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],o=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],e=function(t,e,i,n,s,o,a){var l,u,h,c,d,p,g;return l="undefined"!=typeof exports&&null!==exports?new r:document.createElement("canvas"),l.width=t,l.height=e,c=i+Math.cos(s)*o*.5,p=n+Math.sin(s)*o*.5,d=i-Math.cos(s)*o*.5,g=n-Math.sin(s)*o*.5,u=l.getContext("2d"),h=u.createLinearGradient(c,p,d,g),a?(h.addColorStop(0,"white"),h.addColorStop(.5,"black"),h.addColorStop(1,"white")):(h.addColorStop(0,"white"),h.addColorStop(1,"black")),u.fillStyle=h,u.fillRect(0,0,t,e),u.getImageData(0,0,t,e)},i=function(t,e,i,n,s,o){var a,l,u;return a="undefined"!=typeof exports&&null!==exports?new r:document.createElement("canvas"),a.width=t,a.height=e,l=a.getContext("2d"),u=l.createRadialGradient(i,n,s,i,n,o),u.addColorStop(1,"white"),u.addColorStop(0,"black"),l.fillStyle=u,l.fillRect(0,0,t,e),l.getImageData(0,0,t,e)},t=function(){return this.r=0,this.g=0,this.b=0,this.a=0,this.next=null},n.Plugin.register("compoundBlur",function(e,i,n,r){var a,l,u,h,c,d,p,g,f,m,v,b,y,w,x,_,k,C,T,S,D,M,E,P,I,L,z,j,R,O,A,B,F,H,W,N,X,U,G,q,V,Y,Q,J,K,Z,tt,et,it,nt,st,rt,ot,at,lt,ut,ht,ct;for(Y=this.dimensions.width,m=this.dimensions.height,x=this.pixelData,j=e.data,q=Y*m,V=q<<2,E=[],b=it=0;0<=V?it<V:it>V;b=0<=V?++it:--it)E[b]=x[b];for(c=0,X=r,r-=1;X-- >=0;)if(k=i+.5|0,0!==k){for(k>256&&(k=256),d=k+k+1,G=Y<<2,Q=Y-1,v=m-1,R=k+1,U=R*(R+1)/2,N=new t,F=void 0,B=N,b=nt=1;1<=d?nt<d:nt>d;b=1<=d?++nt:--nt)B=B.next=new t,b===R&&(F=B);for(B.next=N,H=null,W=null,et=Z=0,T=s[k],A=o[k],K=st=0;0<=m?st<m:st>m;K=0<=m?++st:--st){for(I=p=a=z=f=u=0,L=R*(P=E[Z]),g=R*(M=E[Z+1]),l=R*(D=E[Z+2]),z+=U*P,f+=U*M,u+=U*D,B=N,b=rt=0;0<=R?rt<R:rt>R;b=0<=R?++rt:--rt)B.r=P,B.g=M,B.b=D,B=B.next;for(b=ot=1;1<=R?ot<R:ot>R;b=1<=R?++ot:--ot)S=Z+((Q<b?Q:b)<<2),z+=(B.r=P=E[S])*(O=R-b),f+=(B.g=M=E[S+1])*O,u+=(B.b=D=E[S+2])*O,I+=P,p+=M,a+=D,B=B.next;for(H=N,W=F,J=at=0;0<=Y?at<Y:at>Y;J=0<=Y?++at:--at)E[Z]=z*T>>A,E[Z+1]=f*T>>A,E[Z+2]=u*T>>A,z-=L,f-=g,u-=l,L-=H.r,g-=H.g,l-=H.b,S=et+((S=J+R)<Q?S:Q)<<2,I+=H.r=E[S],p+=H.g=E[S+1],a+=H.b=E[S+2],z+=I,f+=p,u+=a,H=H.next,L+=P=W.r,g+=M=W.g,l+=D=W.b,I-=P,p-=M,a-=D,W=W.next,Z+=4;et+=Y}for(J=lt=0;0<=Y?lt<Y:lt>Y;J=0<=Y?++lt:--lt){for(p=a=I=f=u=z=0,Z=J<<2,L=R*(P=E[Z]),g=R*(M=E[Z+1]),l=R*(D=E[Z+2]),z+=U*P,f+=U*M,u+=U*D,B=N,b=ut=0;0<=R?ut<R:ut>R;b=0<=R?++ut:--ut)B.r=P,B.g=M,B.b=D,B=B.next;for(tt=Y,b=ht=1;1<=R?ht<R:ht>R;b=1<=R?++ht:--ht)Z=tt+J<<2,z+=(B.r=P=E[Z])*(O=R-b),f+=(B.g=M=E[Z+1])*O,u+=(B.b=D=E[Z+2])*O,I+=P,p+=M,a+=D,B=B.next,b<v&&(tt+=Y);for(Z=J,H=N,W=F,K=ct=0;0<=m?ct<m:ct>m;K=0<=m?++ct:--ct)S=Z<<2,E[S]=z*T>>A,E[S+1]=f*T>>A,E[S+2]=u*T>>A,z-=L,f-=g,u-=l,L-=H.r,g-=H.g,l-=H.b,S=J+((S=K+R)<v?S:v)*Y<<2,z+=I+=H.r=E[S],f+=p+=H.g=E[S+1],u+=a+=H.b=E[S+2],H=H.next,L+=P=W.r,g+=M=W.g,l+=D=W.b,I-=P,p-=M,a-=D,W=W.next,Z+=Y}for(i*=n,b=q;--b>-1;)w=b<<2,C=(255&j[w+2])/255*r,_=0|C,_===c?(h=256*(C-(0|C)),y=256-h,x[w]=x[w]*y+E[w]*h>>8,x[w+1]=x[w+1]*y+E[w+1]*h>>8,x[w+2]=x[w+2]*y+E[w+2]*h>>8):_===c+1&&(x[w]=E[w],x[w+1]=E[w+1],x[w+2]=E[w+2]);c++}return this}),n.Filter.register("tiltShift",function(t){var i,n;return i={center:{x:this.dimensions.width/2,y:this.dimensions.height/2},angle:45,focusWidth:200,startRadius:3,radiusFactor:1.5,steps:3},t=w.extend(i,t),t.angle*=Math.PI/180,n=e(this.dimensions.width,this.dimensions.height,t.center.x,t.center.y,t.angle,t.focusWidth,!0),this.processPlugin("compoundBlur",[n,t.startRadius,t.radiusFactor,t.steps])}),n.Filter.register("radialBlur",function(t){var e,n,s,r;return e={size:50,center:{x:this.dimensions.width/2,y:this.dimensions.height/2},startRadius:3,radiusFactor:1.5,steps:3,radius:null},t=w.extend(e,t),t.radius||(t.radius=this.dimensions.width<this.dimensions.height?this.dimensions.height:this.dimensions.width),s=t.radius/2-t.size,r=t.radius/2,n=i(this.dimensions.width,this.dimensions.height,t.center.x,t.center.y,s,r),this.processPlugin("compoundBlur",[n,t.startRadius,t.radiusFactor,t.steps])})}(),n.Filter.register("edgeEnhance",function(){return this.processKernel("Edge Enhance",[0,0,0,-1,1,0,0,0,0])}),n.Filter.register("edgeDetect",function(){return this.processKernel("Edge Detect",[-1,-1,-1,-1,8,-1,-1,-1,-1])}),n.Filter.register("emboss",function(){return this.processKernel("Emboss",[-2,-1,0,-1,1,1,0,1,2])}),n.Filter.register("posterize",function(t){var e,i;return e=256/t,i=255/(t-1),this.process("posterize",function(t){return t.r=Math.floor(Math.floor(t.r/e)*i),t.g=Math.floor(Math.floor(t.g/e)*i),t.b=Math.floor(Math.floor(t.b/e)*i),t})}),n.Filter.register("vintage",function(t){if(null==t&&(t=!0),this.greyscale(),this.contrast(5),this.noise(3),this.sepia(100),this.channels({red:8,blue:2,green:4}),this.gamma(.87),t)return this.vignette("40%",30)}),n.Filter.register("lomo",function(t){return null==t&&(t=!0),this.brightness(15),this.exposure(15),this.curves("rgb",[0,0],[200,0],[155,255],[255,255]),this.saturation(-20),this.gamma(1.8),t&&this.vignette("50%",60),this.brightness(5)}),n.Filter.register("clarity",function(t){return null==t&&(t=!1),this.vibrance(20),this.curves("rgb",[5,0],[130,150],[190,220],[250,255]),this.sharpen(15),this.vignette("45%",20),t&&(this.greyscale(),this.contrast(4)),this}),n.Filter.register("sinCity",function(){return this.contrast(100),this.brightness(15),this.exposure(10),this.posterize(80),this.clip(30),this.greyscale()}),n.Filter.register("sunrise",function(){return this.exposure(3.5),this.saturation(-5),this.vibrance(50),this.sepia(60),this.colorize("#e87b22",10),this.channels({red:8,blue:8}),this.contrast(5),this.gamma(1.2),this.vignette("55%",25)}),n.Filter.register("crossProcess",function(){return this.exposure(5),this.colorize("#e87b22",4),this.sepia(20),this.channels({blue:8,red:3}),this.curves("b",[0,0],[100,150],[180,180],[255,255]),this.contrast(15),this.vibrance(75),this.gamma(1.6)}),n.Filter.register("orangePeel",function(){return this.curves("rgb",[0,0],[100,50],[140,200],[255,255]),this.vibrance(-30),this.saturation(-30),this.colorize("#ff9000",30),this.contrast(-5),this.gamma(1.4)}),n.Filter.register("love",function(){return this.brightness(5),this.exposure(8),this.contrast(4),this.colorize("#c42007",30),this.vibrance(50),this.gamma(1.3)}),n.Filter.register("grungy",function(){return this.gamma(1.5),this.clip(25),this.saturation(-60),this.contrast(5),this.noise(5),this.vignette("50%",30)}),n.Filter.register("jarques",function(){return this.saturation(-35),this.curves("b",[20,0],[90,120],[186,144],[255,230]),this.curves("r",[0,0],[144,90],[138,120],[255,255]),this.curves("g",[10,0],[115,105],[148,100],[255,248]),this.curves("rgb",[0,0],[120,100],[128,140],[255,255]),this.sharpen(20)}),n.Filter.register("pinhole",function(){return this.greyscale(),this.sepia(10),this.exposure(10),this.contrast(15),this.vignette("60%",35)}),n.Filter.register("oldBoot",function(){return this.saturation(-20),this.vibrance(-50),this.gamma(1.1),this.sepia(30),this.channels({red:-10,blue:5}),this.curves("rgb",[0,0],[80,50],[128,230],[255,255]),this.vignette("60%",30)}),n.Filter.register("glowingSun",function(t){if(null==t&&(t=!0),this.brightness(10),this.newLayer(function(){return this.setBlendingMode("multiply"),this.opacity(80),this.copyParent(),this.filter.gamma(.8),this.filter.contrast(50),this.filter.exposure(10)}),this.newLayer(function(){return this.setBlendingMode("softLight"),this.opacity(80),this.fillColor("#f49600")}),this.exposure(20),this.gamma(.8),t)return this.vignette("45%",20)}),n.Filter.register("hazyDays",function(){return this.gamma(1.2),this.newLayer(function(){return this.setBlendingMode("overlay"),this.opacity(60),this.copyParent(),this.filter.channels({red:5}),this.filter.stackBlur(15)}),this.newLayer(function(){return this.setBlendingMode("addition"),this.opacity(40),this.fillColor("#6899ba")}),this.newLayer(function(){return this.setBlendingMode("multiply"),this.opacity(35),this.copyParent(),this.filter.brightness(40),this.filter.vibrance(40),this.filter.exposure(30),this.filter.contrast(15),this.filter.curves("r",[0,40],[128,128],[128,128],[255,215]),this.filter.curves("g",[0,40],[128,128],[128,128],[255,215]),this.filter.curves("b",[0,40],[128,128],[128,128],[255,215]),this.filter.stackBlur(5)}),this.curves("r",[20,0],[128,158],[128,128],[235,255]),this.curves("g",[20,0],[128,128],[128,128],[235,255]),this.curves("b",[20,0],[128,108],[128,128],[235,255]),this.vignette("45%",20)}),n.Filter.register("herMajesty",function(){return this.brightness(40),this.colorize("#ea1c5d",10),this.curves("b",[0,10],[128,180],[190,190],[255,255]),this.newLayer(function(){return this.setBlendingMode("overlay"),this.opacity(50),this.copyParent(),this.filter.gamma(.7),this.newLayer(function(){return this.setBlendingMode("normal"),this.opacity(60),this.fillColor("#ea1c5d")})}),this.newLayer(function(){return this.setBlendingMode("multiply"),
this.opacity(60),this.copyParent(),this.filter.saturation(50),this.filter.hue(90),this.filter.contrast(10)}),this.gamma(1.4),this.vibrance(-30),this.newLayer(function(){return this.opacity(10),this.fillColor("#e5f0ff")}),this}),n.Filter.register("nostalgia",function(){return this.saturation(20),this.gamma(1.4),this.greyscale(),this.contrast(5),this.sepia(100),this.channels({red:8,blue:2,green:4}),this.gamma(.8),this.contrast(5),this.exposure(10),this.newLayer(function(){return this.setBlendingMode("overlay"),this.copyParent(),this.opacity(55),this.filter.stackBlur(10)}),this.vignette("50%",30)}),n.Filter.register("hemingway",function(){return this.greyscale(),this.contrast(10),this.gamma(.9),this.newLayer(function(){return this.setBlendingMode("multiply"),this.opacity(40),this.copyParent(),this.filter.exposure(15),this.filter.contrast(15),this.filter.channels({green:10,red:5})}),this.sepia(30),this.curves("rgb",[0,10],[120,90],[180,200],[235,255]),this.channels({red:5,green:-2}),this.exposure(15)}),n.Filter.register("concentrate",function(){return this.sharpen(40),this.saturation(-50),this.channels({red:3}),this.newLayer(function(){return this.setBlendingMode("multiply"),this.opacity(80),this.copyParent(),this.filter.sharpen(5),this.filter.contrast(50),this.filter.exposure(10),this.filter.channels({blue:5})}),this.brightness(10)}),n.Plugin.register("crop",function(t,e,i,n){var s,o;return null==i&&(i=0),null==n&&(n=0),"undefined"!=typeof exports&&null!==exports?s=new r(t,e):(s=document.createElement("canvas"),s.width=t,s.height=e),o=s.getContext("2d"),o.drawImage(this.canvas,i,n,t,e,0,0,t,e),this.replaceCanvas(s)}),n.Plugin.register("resize",function(t){var e,i;return null==t&&(t=null),null===t||null==t.width&&null==t.height?void p.error("Invalid or missing dimensions given for resize"):(null==t.width?t.width=this.canvas.width*t.height/this.canvas.height:null==t.height&&(t.height=this.canvas.height*t.width/this.canvas.width),"undefined"!=typeof exports&&null!==exports?e=new r(t.width,t.height):(e=document.createElement("canvas"),e.width=t.width,e.height=t.height),i=e.getContext("2d"),i.drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,t.width,t.height),this.replaceCanvas(e))}),n.Filter.register("crop",function(t,e,i,n){return null==i&&(i=0),null==n&&(n=0),this.processPlugin("crop",Array.prototype.slice.call(arguments,0))}),n.Filter.register("resize",function(t,e){return this.processPlugin("resize",Array.prototype.slice.call(arguments,0))}),function(){var t,e,i;return e=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],i=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],t=function(){return this.r=0,this.g=0,this.b=0,this.a=0,this.next=null},n.Plugin.register("stackBlur",function(n){var s,r,o,a,l,u,h,c,d,p,g,f,m,v,b,y,w,x,_,k,C,T,S,D,M,E,P,I,L,z,j,R,O,A,B,F,H,W,N,X,U,G,q,V,Y;if(!(isNaN(n)||n<1)){for(n|=0,b=this.pixelData,z=this.dimensions.width,c=this.dimensions.height,a=n+n+1,L=z<<2,j=z-1,d=c-1,k=n+1,I=k*(k+1)/2,P=new t,S=P,p=H=1;1<=a?H<a:H>a;p=1<=a?++H:--H)S=S.next=new t,p===k&&(D=S);for(S.next=P,M=null,E=null,F=A=0,g=e[n],T=i[n],O=W=0;0<=c?W<c:W>c;O=0<=c?++W:--W){for(w=l=s=_=h=o=0,x=k*(y=b[A]),u=k*(v=b[A+1]),r=k*(m=b[A+2]),_+=I*y,h+=I*v,o+=I*m,S=P,p=N=0;0<=k?N<k:N>k;p=0<=k?++N:--N)S.r=y,S.g=v,S.b=m,S=S.next;for(p=X=1;1<=k?X<k:X>k;p=1<=k?++X:--X)f=A+((j<p?j:p)<<2),_+=(S.r=y=b[f])*(C=k-p),h+=(S.g=v=b[f+1])*C,o+=(S.b=m=b[f+2])*C,w+=y,l+=v,s+=m,S=S.next;for(M=P,E=D,R=U=0;0<=z?U<z:U>z;R=0<=z?++U:--U)b[A]=_*g>>T,b[A+1]=h*g>>T,b[A+2]=o*g>>T,_-=x,h-=u,o-=r,x-=M.r,u-=M.g,r-=M.b,f=F+((f=R+n+1)<j?f:j)<<2,w+=M.r=b[f],l+=M.g=b[f+1],s+=M.b=b[f+2],_+=w,h+=l,o+=s,M=M.next,x+=y=E.r,u+=v=E.g,r+=m=E.b,w-=y,l-=v,s-=m,E=E.next,A+=4;F+=z}for(R=G=0;0<=z?G<z:G>z;R=0<=z?++G:--G){for(l=s=w=h=o=_=0,A=R<<2,x=k*(y=b[A]),u=k*(v=b[A+1]),r=k*(m=b[A+2]),_+=I*y,h+=I*v,o+=I*m,S=P,p=q=0;0<=k?q<k:q>k;p=0<=k?++q:--q)S.r=y,S.g=v,S.b=m,S=S.next;for(B=z,p=V=1;1<=n?V<=n:V>=n;p=1<=n?++V:--V)A=B+R<<2,_+=(S.r=y=b[A])*(C=k-p),h+=(S.g=v=b[A+1])*C,o+=(S.b=m=b[A+2])*C,w+=y,l+=v,s+=m,S=S.next,p<d&&(B+=z);for(A=R,M=P,E=D,O=Y=0;0<=c?Y<c:Y>c;O=0<=c?++Y:--Y)f=A<<2,b[f]=_*g>>T,b[f+1]=h*g>>T,b[f+2]=o*g>>T,_-=x,h-=u,o-=r,x-=M.r,u-=M.g,r-=M.b,f=R+((f=O+k)<d?f:d)*z<<2,_+=w+=M.r=b[f],h+=l+=M.g=b[f+1],o+=s+=M.b=b[f+2],M=M.next,x+=y=E.r,u+=v=E.g,r+=m=E.b,w-=y,l-=v,s-=m,E=E.next,A+=z}return this}}),n.Filter.register("stackBlur",function(t){return this.processPlugin("stackBlur",[t])})}(),n.Filter.register("threshold",function(t){return this.process("threshold",function(e){var i;return i=.2126*e.r+.7152*e.g+.0722*e.b,i<t?(e.r=0,e.g=0,e.b=0):(e.r=255,e.g=255,e.b=255),e})})}).call(this),/**
 * Trumbowyg v1.1.6 - A lightweight WYSIWYG editor
 * Trumbowyg core file
 * ------------------------
 * @link http://alex-d.github.io/Trumbowyg
 * @license MIT
 * @author Alexandre Demode (Alex-D)
 *         Twitter : @AlexandreDemode
 *         Website : alex-d.fr
 */
jQuery.trumbowyg={langs:{da:{viewHTML:"Vis HTML",formatting:"Formatter",p:"Afsnit",blockquote:"Citat",code:"Kode",header:"Overskrift",bold:"Fed",italic:"Kursiv",strikethrough:"Gennemstreg",underline:"Understreg",strong:"Vigtig",em:"Fremhæv",del:"Slettet",unorderedList:"Uordnet liste",orderedList:"Ordnet liste",insertImage:"Indsæt billede",insertVideo:"Indsæt video",link:"Link",createLink:"Indsæt link",unlink:"Fjern link",justifyLeft:"Venstrestil",justifyCenter:"Centrer",justifyRight:"Højrestil",justifyFull:"Lige margener",horizontalRule:"Horisontal linie",fullscreen:"Fuld skærm",close:"Luk",submit:"Bekræft",reset:"Annuller",invalidUrl:"Ugyldig URL",required:"Påkrævet",description:"Beskrivelse",title:"Titel",text:"Tekst"}},opts:{},btnsGrps:{design:["bold","italic","underline","strikethrough"],semantic:["strong","em","del"],justify:["justifyLeft","justifyCenter","justifyRight","justifyFull"],lists:["unorderedList","orderedList"]}},function(t,e,$,i){"use strict";$.fn.trumbowyg=function(t,e){if(t===Object(t)||!t)return this.each(function(){$(this).data("trumbowyg")||$(this).data("trumbowyg",new n(this,t))});if(1===this.length)try{var i=$(this).data("trumbowyg");switch(t){case"openModal":return i.openModal(e.title,e.content);case"closeModal":return i.closeModal();case"openModalInsert":return i.openModalInsert(e.title,e.fields,e.callback);case"saveSelection":return i.saveSelection();case"getSelection":return i.selection;case"getSelectedText":return i.selection+"";case"restoreSelection":return i.restoreSelection();case"destroy":return i.destroy();case"empty":return i.empty();case"lang":return i.lang;case"duration":return i.o.duration;case"html":return i.html(e)}}catch(t){}return!1};var n=function(t,i){var n=this;n.doc=t.ownerDocument||e,n.$e=$(t),n.$creator=$(t),i=$.extend(!0,{},i,$.trumbowyg.opts),"undefined"==typeof i.lang||"undefined"==typeof $.trumbowyg.langs[i.lang]?n.lang=$.trumbowyg.langs.en:n.lang=$.extend(!0,{},$.trumbowyg.langs.en,$.trumbowyg.langs[i.lang]),n.o=$.extend(!0,{},{lang:"en",dir:"ltr",duration:200,mobile:!1,tablet:!0,closable:!1,fullscreenable:!0,fixedBtnPane:!1,fixedFullWidth:!1,autogrow:!1,prefix:"trumbowyg-",convertLink:!0,semantic:!1,resetCss:!1,btns:["viewHTML","|","formatting","|",$.trumbowyg.btnsGrps.design,"|","link","|","insertImage","|",$.trumbowyg.btnsGrps.justify,"|",$.trumbowyg.btnsGrps.lists,"|","horizontalRule"],btnsAdd:[],btnsDef:{viewHTML:{func:"toggle"},p:{func:"formatBlock"},blockquote:{func:"formatBlock"},h1:{func:"formatBlock",title:n.lang.header+" 1"},h2:{func:"formatBlock",title:n.lang.header+" 2"},h3:{func:"formatBlock",title:n.lang.header+" 3"},h4:{func:"formatBlock",title:n.lang.header+" 4"},bold:{},italic:{},underline:{},strikethrough:{},strong:{func:"bold"},em:{func:"italic"},del:{func:"strikethrough"},createLink:{},unlink:{},insertImage:{},justifyLeft:{},justifyCenter:{},justifyRight:{},justifyFull:{},unorderedList:{func:"insertUnorderedList"},orderedList:{func:"insertOrderedList"},horizontalRule:{func:"insertHorizontalRule"},formatting:{dropdown:["p","blockquote","h1","h2","h3","h4"]},link:{dropdown:["createLink","unlink"]}}},i),n.o.semantic&&!i.btns?n.o.btns=["viewHTML","|","formatting","|",$.trumbowyg.btnsGrps.semantic,"|","link","|","insertImage","|",$.trumbowyg.btnsGrps.justify,"|",$.trumbowyg.btnsGrps.lists,"|","horizontalRule"]:i&&i.btns&&(n.o.btns=i.btns),n.init()};n.prototype={init:function(){var t=this;return t.height=t.$e.css("height"),t.isEnabled()?void t.buildEditor(!0):(t.buildEditor(),t.buildBtnPane(),t.fixedBtnPaneEvents(),void t.buildOverlay())},buildEditor:function(t){var e=this,i=e.o.prefix,n="";if(t!==!0)e.$box=$("<div/>",{class:i+"box "+i+e.o.lang+" trumbowyg"}),e.isTextarea=!0,e.$e.is("textarea")?e.$editor=$("<div/>"):(e.$editor=e.$e,e.$e=e.buildTextarea().val(e.$e.val()),e.isTextarea=!1),e.$creator.is("[placeholder]")&&e.$editor.attr("placeholder",e.$creator.attr("placeholder")),e.$e.hide().addClass(i+"textarea"),e.isTextarea?(n=e.$e.val(),e.$box.insertAfter(e.$e).append(e.$editor).append(e.$e)):(n=e.$editor.html(),e.$box.insertAfter(e.$editor).append(e.$e).append(e.$editor),e.syncCode()),e.$editor.addClass(i+"editor").attr("contenteditable",!0).attr("dir",e.lang._dir||e.o.dir).html(n),e.o.resetCss&&e.$editor.addClass(i+"reset-css"),e.o.autogrow||$.each([e.$editor,e.$e],function(t,i){i.css({height:e.height,overflow:"auto"})}),e.o.semantic&&(e.$editor.html(e.$editor.html().replace("<br>","</p><p>").replace("&nbsp;","")),e.semanticCode()),e.$editor.on("dblclick","img",function(t){var i=$(this);e.openModalInsert(e.lang.insertImage,{url:{label:"URL",value:i.attr("src"),required:!0},alt:{label:"description",value:i.attr("alt")}},function(t){i.attr({src:t.url,alt:t.alt})}),t.stopPropagation()}).on("keyup",function(t){e.semanticCode(!1,13===t.which)}).on("focus",function(){e.$creator.trigger("tbwfocus")}).on("blur",function(){e.syncCode(),e.$creator.trigger("tbwblur")});else if(!e.$e.is("textarea")){var s=e.buildTextarea().val(e.$e.val());e.$e.hide().after(s)}},buildTextarea:function(){return $("<textarea/>",{name:this.$e.attr("id"),height:this.height})},buildBtnPane:function(){var e=this,n=e.o.prefix;if(e.o.btns!==!1){e.$btnPane=$("<ul/>",{class:n+"button-pane"}),$.each(e.o.btns.concat(e.o.btnsAdd),function(t,s){try{var r=s.split("btnGrp-");r[1]!==i&&(s=$.trumbowyg.btnsGrps[r[1]])}catch(t){}$.isArray(s)||(s=[s]),$.each(s,function(t,i){try{var s=$("<li/>");"|"===i?s.addClass(n+"separator"):e.isSupportedBtn(i)&&s.append(e.buildBtn(i)),e.$btnPane.append(s)}catch(t){}})});var s=$("<li/>",{class:n+"not-disable "+n+"buttons-right"});e.o.fullscreenable&&s.append(e.buildRightBtn("fullscreen").on("click",function(){var i=n+"fullscreen";e.$box.toggleClass(i),e.$box.hasClass(i)?($("body").css("overflow","hidden"),$.each([e.$editor,e.$e],function(){$(this).css({height:"calc(100% - 35px)",overflow:"auto"})}),e.$btnPane.css("width","100%")):($("body").css("overflow","auto"),e.$box.removeAttr("style"),e.o.autogrow||$.each([e.$editor,e.$e],function(){$(this).css("height",e.height)})),$(t).trigger("scroll")})),e.o.closable&&s.append(e.buildRightBtn("close").on("click",function(){e.$box.hasClass(n+"fullscreen")&&$("body").css("overflow","auto"),e.destroy()})),s.not(":empty")&&e.$btnPane.append(s),e.$box.prepend(e.$btnPane)}},buildBtn:function(t){var e=this,i=e.o.prefix,n=e.o.btnsDef[t],s=n.dropdown,r=e.lang[t]||t,o=$("<button/>",{type:"button",class:i+t+"-button"+(n.ico?" "+i+n.ico+"-button":""),text:n.text||n.title||r,title:n.title||n.text||r,mousedown:function(r){return s&&!e.$box.find("."+t+"-"+i+"dropdown").is(":hidden")||$("body",e.doc).trigger("mousedown"),!(e.$btnPane.hasClass(i+"disable")&&!$(this).hasClass(i+"active")&&!$(this).parent().hasClass(i+"not-disable"))&&(e.execCmd(!!s&&"dropdown"||n.func||t,n.param||t),r.stopPropagation(),void r.preventDefault())}});if(s){o.addClass(i+"open-dropdown");var a=i+"dropdown",l=$("<div/>",{class:t+"-"+a+" "+a+" "+i+"fixed-top"});$.each(s,function(t,i){e.o.btnsDef[i]&&e.isSupportedBtn(i)&&l.append(e.buildSubBtn(i))}),e.$box.append(l.hide())}return o},buildSubBtn:function(t){var e=this,i=e.o.btnsDef[t];return $("<button/>",{type:"button",text:i.text||i.title||e.lang[t]||t,style:i.style||null,mousedown:function(n){$("body",e.doc).trigger("mousedown"),e.execCmd(i.func||t,i.param||t),n.stopPropagation()}})},buildRightBtn:function(t){return $("<button/>",{type:"button",class:this.o.prefix+t+"-button",title:this.lang[t],text:this.lang[t]})},isSupportedBtn:function(t){var e=this.o.btnsDef[t];return"function"!=typeof e.isSupported||e.isSupported()},buildOverlay:function(){var t=this;return t.$overlay=$("<div/>",{class:t.o.prefix+"overlay"}).css({top:t.$btnPane.outerHeight(),height:parseInt(t.$editor.outerHeight())+1+"px"}).appendTo(t.$box),t.$overlay},showOverlay:function(){var e=this;$(t).trigger("scroll"),e.$overlay.fadeIn(e.o.duration),e.$box.addClass(e.o.prefix+"box-blur")},hideOverlay:function(){var t=this;t.$overlay.fadeOut(t.o.duration/4),t.$box.removeClass(t.o.prefix+"box-blur")},fixedBtnPaneEvents:function(){var e=this,i=e.o.fixedFullWidth;e.o.fixedBtnPane&&(e.isFixed=!1,$(t).on("scroll resize",function(){if(e.$box){e.syncCode();var n=$(t).scrollTop(),s=e.$box.offset().top+1,r=n-s>0&&n-s-parseInt(e.height)<0,o=e.$btnPane,a=o.css("height"),l=o.outerHeight();r?(e.isFixed||(e.isFixed=!0,o.css({position:"fixed",top:0,left:i?"0":"auto",zIndex:7}),$([e.$editor,e.$e]).css({marginTop:a})),o.css({width:i?"100%":parseInt(e.$box.css("width"))-1+"px"}),$("."+e.o.prefix+"fixed-top",e.$box).css({position:i?"fixed":"absolute",top:i?l:parseInt(l)+(n-s)+"px",zIndex:15})):e.isFixed&&(e.isFixed=!1,o.removeAttr("style"),$([e.$editor,e.$e]).css({marginTop:0}),$("."+e.o.prefix+"fixed-top",e.$box).css({position:"absolute",top:l}))}}))},destroy:function(){var t=this,e=t.o.prefix,i=t.height,n=t.html();t.isTextarea?t.$box.after(t.$e.css({height:i}).val(n).removeClass(e+"textarea").show()):t.$box.after(t.$editor.css({height:i}).removeClass(e+"editor").removeAttr("contenteditable").html(n).show()),t.$box.remove(),t.$creator.removeData("trumbowyg")},empty:function(){this.$e.val(""),this.syncCode(!0)},toggle:function(){var t=this,e=t.o.prefix;t.semanticCode(!1,!0),t.$editor.toggle(),t.$e.toggle(),t.$btnPane.toggleClass(e+"disable"),t.$btnPane.find("."+e+"viewHTML-button").toggleClass(e+"active")},dropdown:function(e){var i=this,n=i.doc,s=i.o.prefix,r=i.$box.find("."+e+"-"+s+"dropdown"),o=i.$btnPane.find("."+s+e+"-button");if(r.is(":hidden")){var a=o.offset().left;o.addClass(s+"active"),r.css({position:"absolute",top:i.$btnPane.outerHeight(),left:i.o.fixedFullWidth&&i.isFixed?a+"px":a-i.$btnPane.offset().left+"px"}).show(),$(t).trigger("scroll"),$("body",n).on("mousedown",function(){$("."+s+"dropdown",n).hide(),$("."+s+"active",n).removeClass(s+"active"),$("body",n).off("mousedown")})}else $("body",n).trigger("mousedown")},html:function(t){var e=this;return t?(e.$e.val(t),e.syncCode(!0),e):e.$e.val()},syncCode:function(t){var e=this;!t&&e.$editor.is(":visible")?e.$e.val(e.$editor.html()):e.$editor.html(e.$e.val()),e.o.autogrow&&(e.height=e.$editor.css("height"),e.$e.css({height:e.height}))},semanticCode:function(t,e){var i=this;i.syncCode(t),i.o.semantic&&(i.semanticTag("b","strong"),i.semanticTag("i","em"),i.semanticTag("strike","del"),e&&(i.$editor.contents().filter(function(){return 3===this.nodeType&&$.trim(this.nodeValue).length>0}).wrap("<p></p>").end().filter("br").remove(),i.saveSelection(),i.semanticTag("div","p"),i.restoreSelection()),i.$e.val(i.$editor.html()))},semanticTag:function(t,e){$(t,this.$editor).each(function(){$(this).replaceWith(function(){return"<"+e+">"+$(this).html()+"</"+e+">"})})},createLink:function(){var t=this;t.saveSelection(),t.openModalInsert(t.lang.createLink,{url:{label:"URL",value:"http://",required:!0},title:{label:t.lang.title,value:t.selection},text:{label:t.lang.text,value:t.selection}},function(e){t.execCmd("createLink",e.url);var i=$('a[href="'+e.url+'"]:not([title])',t.$box);return e.text.length>0&&i.text(e.text),e.title.length>0&&i.attr("title",e.title),!0})},insertImage:function(){var t=this;t.saveSelection(),t.openModalInsert(t.lang.insertImage,{url:{label:"URL",value:"http://",required:!0},alt:{label:t.lang.description,value:t.selection}},function(e){return t.execCmd("insertImage",e.url),$('img[src="'+e.url+'"]:not([alt])',t.$box).attr("alt",e.alt),!0})},execCmd:function(t,e){var i=this;"dropdown"!=t&&i.$editor.focus();try{i[t](e)}catch(n){try{t(e,i)}catch(n){"insertHorizontalRule"==t?e=null:"formatBlock"==t&&(navigator.userAgent.indexOf("MSIE")!==-1||navigator.appVersion.indexOf("Trident/")>0)&&(e="<"+e+">"),i.doc.execCommand(t,!1,e)}}i.syncCode()},openModal:function(e,i){var n=this,s=n.o.prefix;if($("."+s+"modal-box",n.$box).size()>0)return!1;n.saveSelection(),n.showOverlay(),n.$btnPane.addClass(s+"disable");var r=$("<div/>",{class:s+"modal "+s+"fixed-top"}).css({top:parseInt(n.$btnPane.css("height"))+1+"px"}).appendTo(n.$box);n.$overlay.one("click",function(t){t.preventDefault(),r.trigger(s+"cancel")});var o=$("<form/>",{action:"",html:i}).on("submit",function(t){t.preventDefault(),r.trigger(s+"confirm")}).on("reset",function(t){t.preventDefault(),r.trigger(s+"cancel")}),a=$("<div/>",{class:s+"modal-box",html:o}).css({top:"-"+parseInt(n.$btnPane.outerHeight())+"px",opacity:0}).appendTo(r).animate({top:0,opacity:1},n.o.duration/2);return $("<span/>",{text:e,class:s+"modal-title"}).prependTo(a),a.find("input:first").focus(),n.buildModalBtn("submit",a),n.buildModalBtn("reset",a),$(t).trigger("scroll"),r},buildModalBtn:function(t,e){var i=this,n=i.o.prefix;return $("<button/>",{class:n+"modal-button "+n+"modal-"+t,type:t,text:i.lang[t]||t}).appendTo(e.find("form"))},closeModal:function(){var t=this,e=t.o.prefix;t.$btnPane.removeClass(e+"disable"),t.$overlay.off();var i=$("."+e+"modal-box",t.$box);i.animate({top:"-"+i.css("height")},t.o.duration/2,function(){$(this).parent().remove(),t.hideOverlay()})},openModalInsert:function(t,e,n){var s=this,r=s.o.prefix,o=s.lang,a="";for(var l in e){var u=e[l],h=u.label===i?o[l]?o[l]:l:o[u.label]?o[u.label]:u.label;u.name===i&&(u.name=l),u.pattern||"url"!==l||(u.pattern=/^(http|https):\/\/([\w~#!:.?+=&%@!\-\/]+)$/,u.patternError=o.invalidUrl),a+='<label><input type="'+(u.type||"text")+'" name="'+u.name+'" value="'+(u.value||"")+'"><span class="'+r+'input-infos"><span>'+h+"</span></span></label>"}return s.openModal(t,a).on(r+"confirm",function(){var t=$(this).find("form"),i=!0,o={};for(var a in e){var l=$('input[name="'+a+'"]',t);o[a]=$.trim(l.val()),e[a].required&&""===o[a]?(i=!1,s.addErrorOnModalField(l,s.lang.required)):e[a].pattern&&!e[a].pattern.test(o[a])&&(i=!1,s.addErrorOnModalField(l,e[a].patternError))}i&&(s.restoreSelection(),n(o,e)&&(s.syncCode(),s.closeModal(),$(this).off(r+"confirm")))}).one(r+"cancel",function(){$(this).off(r+"confirm"),s.closeModal(),s.restoreSelection()})},addErrorOnModalField:function(t,e){var i=this.o.prefix,n=t.parent();t.on("change keyup",function(){n.removeClass(i+"input-error")}),n.addClass(i+"input-error").find("input+span").append($("<span/>",{class:i+"msg-error",text:e}))},saveSelection:function(){var e=this,i=e.doc;if(e.selection=null,t.getSelection){var n=t.getSelection();n.getRangeAt&&n.rangeCount&&(e.selection=n.getRangeAt(0))}else i.selection&&i.selection.createRange&&(e.selection=i.selection.createRange())},restoreSelection:function(){var e=this,i=e.selection;if(i)if(t.getSelection){var n=t.getSelection();n.removeAllRanges(),n.addRange(i)}else e.doc.selection&&i.select&&i.select()},isEnabled:function(){var t=new RegExp("(iPad|webOS)"),e=new RegExp("(iPhone|iPod|Android|BlackBerry|Windows Phone|ZuneWP7)"),i=navigator.userAgent;return this.o.tablet===!0&&t.test(i)||this.o.mobile===!0&&e.test(i)}}}(window,document,jQuery),$(function(){window.onpopstate=function(t){t.state&&("nyt"!==t.state.type&&"medarbejder"!==t.state.type||(document.title=t.state.name+" · Faaborg Gymnasium",resetOldPush(),setPopstateReading($("#post_"+t.state.ID))))},$(".archive-entry.reading").length&&($(".archive-entry.reading"),$(".archive-entry.reading"),($("body").hasClass("single-nyt")||$("body").hasClass("archive-nyt"))&&($(".archive-entry.reading").next("hr").prependTo(".post-list"),$(".archive-entry.reading").prependTo(".post-list")),$("html, body").delay(200).animate({scrollTop:$(".archive-entry.reading").offset().top-20},200)),$(".archive-entry").click(function(t){$("body").hasClass("post-type-archive-tema")||"content-add-btn"===$(this).attr("id")||"add-edit-content"===$(this).attr("id")||$("body").hasClass("page")||$(this).hasClass("reading")||(resetOldPush(),addPush($(this),"nyt"),setPopstateReading($(this)))}),$(".mb-entry.reading").length&&($(".mb-entry.reading").next("hr").prependTo(".post-list"),$(".mb-entry.reading").prependTo(".post-list")),$(".mb-entry").click(function(t){$(this).hasClass("reading")||(resetOldPush(),addPush($(this),"medarbejder"),setPopstateReading($(this)))}),$(".page .archive-entry").bind("click",function(){var t=$(this).attr("data-href");console.log(t),window.location=t})}),$(function(){$("#slides .slide").length>1&&($("#slides").owlCarousel({items:1,autoplay:!0,autoplayTimeout:$("#slideshow").attr("data-duration"),smartSpeed:$("#slideshow").attr("data-transition"),autoplayHoverPause:!1,dots:!0,animateOut:"fadeOut",animateIn:"fadeIn",baseClass:"slide",theme:"owl-theme",lazyLoad:!0,lazyFollow:!0,lazyEffect:"fade",autoHeight:!1,loop:!0}),$("#slides a.slide").click(function(t){t.preventDefault();var e=$(this).attr("href"),i=$(this).attr("target");return""!=e&&void("_blank"===i?window.open(e,"_blank"):window.location=e)}))});var smamoStatus={getUser:function(){$.ajax({url:$("form").attr("action"),type:"POST",data:"action=get-user",dataType:"json",success:function(t){smamoStatus.adjustGUI(t)}})},adjustGUI:function(t){t.login?($(".status-comment a.login, .status-comment a.register").hide(),$(".user-info span").html(t.login.name)):($(".status-comment textarea").attr("disabled","disabled"),$(".user-info").hide(),$('.status-comment input[type="submit"]').hide())},sendStatus:function(t){var e=t.parents("form"),i=e.attr("action");data=e.serialize(),e.hasClass("loading")||(e.addClass("loading"),$.ajax({url:i,type:"POST",data:data,dataType:"json",success:function(t){smamoStatus.sendResponse(t,e)}}))},sendResponse:function(t,e){e.removeClass("loading").find("textarea").val("");var i=e.find("textarea"),n=$('<div class="status-post" style="display:block;"></div>'),s=$('<span class="status-post-content"></span>'),r=$('<span class="status-post-author"></span>');s.html(t.msg),r.html(t.user.name),n.append(s,r),e.prev(".status-posts").append(n).append('<hr class="red" style="display:block;">')},register:function(t){window.location.href=t.attr("href")},login:function(t){window.location.href=t.attr("href")}};jQuery(function($){smamoStatus.getUser(),autosize($(".status-comment textarea")),$(".status-comment").on({click:function(t){var e=$(t.target);e.is('input[type="submit"]')?(t.preventDefault(),smamoStatus.sendStatus(e)):e.is("a.login")?(t.preventDefault(),smamoStatus.login(e)):e.is("a.register")&&(t.preventDefault(),smamoStatus.register(e))}}),$(".status-post-count").on({click:function(t){t.preventDefault();var e=$(this).parents(".status-posts");e.find(".status-post").show(),e.find("hr").show(),$(this).hide()}})}),$(function(){$("#projekt-tema-preview").length&&$.ajax({type:"POST",url:wpURL+"/async/projekt-tema-preview.php",dataType:"json",data:"",success:function(t){t.error?console.log(t.error):PTmakePreviews(t)}})});var setID=function(t){wp.media.view.settings.post.id=t},setThumbID=function(t){wp.media.view.settings.post.featuredImageId=t},getID=function(){return wp.media.view.settings.post.id},getThumbID=function(){return wp.media.view.settings.post.featuredImageId};jQuery(function($){$("#page-center").on("click",function(t){var e=$(t.target);if(e.is(".single-tema-post .toggle-new")||e.is(".single-tema .toggle-new"))t.preventDefault(),e.toggleClass("editor-active"),$(".fg-editor").removeClass("inactive").children(".submit").html("Opret nyt indlæg"),$("html,body").animate({scrollTop:$(".fg-editor").offset().top-20}),setID(-1),setThumbID(-1),$('.fg-editor form input[name="title"]').val(""),$('.fg-editor form input[name="subheading"]').val("");else if(e.is(".single-tema-post .fg-editor .submit")||e.is(".single-tema .fg-editor .submit"))t.preventDefault(),e.hasClass("loading")||(e.toggleClass("loading"),sendData());else if(e.is("#page-center .dashicons-trash"))t.preventDefault(),setID(e.closest(".edit-delete").attr("id").replace("edit-","")),confirm("Er du sikker på du vil flytte indlægget til papirkurven?")&&deletePost(getID());else if(e.is("#page-center .dashicons-edit")){t.preventDefault(),setID(e.closest(".edit-delete").attr("id").replace("edit-","")),setThumbID(-1);var i=$("#post_"+getID()),n=i.find(".preread-inner h4").html(),s=i.find(".preread-inner h6").html(),r=i.find(".archive-content").html(),o=i.find(".archive-img").attr("data-attachment");tinyMCE.activeEditor?tinyMCE.activeEditor.setContent(r):$("#smamo_front_editor").val(r),i.hide().nextAll(".archive-entry, .red").insertAfter(".fg-editor").animate({opacity:.4},300).addClass("disabled"),i.prevAll(".archive-entry, .red").animate({opacity:.4},300).addClass("disabled"),$(".archive-entry").unbind("click"),$(".toggle-new").toggleClass("editor-active"),$(".fg-editor").removeClass("inactive").children(".submit").html("Opdater indlæg"),$('.fg-editor input[name="title"]').val(n),$('.fg-editor input[name="subheading"]').val(s),$("html,body").animate({scrollTop:$(".fg-editor").offset().top-40},100)}else e.is("#page-center .cancel")&&(t.preventDefault(),location.reload())})}),$(".load img").css("opacity",.2),$(window).load(function(){$(".filter img").each(function(){var t=$(this),e=t.attr("src");$.ajax({type:"POST",url:wpURL+"/async/image-filter.php",dataType:"json",data:{img:e},success:function(e){var i=$('<img src="'+e.img+'"/>');i.load(function(){t.attr("src",e.img).animate({opacity:1},100)})}})}),$("#page-center img").each(function(){var t=$(this),e=t.attr("src");$.ajax({type:"POST",url:wpURL+"/async/image-filter.php",dataType:"json",data:{img:e},success:function(e){var i=$('<img src="'+e.img+'"/>');i.load(function(){t.attr("src",e.img).animate({opacity:1},100)})}})}),$(".ubermenu-image").each(function(){var t=$(this),e=t.attr("src");$.ajax({type:"POST",url:wpURL+"/async/image-filter.php",dataType:"json",data:{img:e},success:function(e){var i=$('<img src="'+e.img+'"/>');i.load(function(){t.attr("src",e.img).animate({opacity:1},100)})}})}),$(".smamo_img_widget img").each(function(){var t=$(this),e=t.attr("src");$.ajax({type:"POST",url:wpURL+"/async/image-filter.php",dataType:"json",data:{img:e},success:function(e){var i=$('<img src="'+e.img+'"/>');i.load(function(){t.attr("src",e.img).animate({opacity:1},100)})}})})}),$(function(){var t=Math.floor(10*Math.random()+1),e;$("#page-center li").each(function(){$(this).attr("data-list-style",t),e=Math.floor(10*Math.random()+1),e===t&&e++,t=e})}),jQuery(function($){var t=smamoGetCookie("cookieOK");""!=t||makeCookieNotificationElement()}),$(function(){$(".mb-entry .dropdown").on("click",function(t){t.preventDefault();var e=$(this),i=$(t.target);(i.is("h6 strong")||i.is("h6"))&&(e.hasClass("active")?(e.children("p").slideUp(100),e.removeClass("active")):(e.children("p").slideDown(100),e.addClass("active")))})}),$(function(){$(".gallery").length&&($(".gallery a.gallery-item").addClass("fancybox"),$(".fancybox").fancybox({closeClick:!0,helpers:{overlay:{css:{background:"rgba(33, 33, 33, 0.65)"}},loading:{css:{}}}}))});var smamo_instagram={};smamo_instagram.fetchImages=function(t,e,i){var n=t.attr("data-fetch-url"),s=t.attr("data-hashtag");$.ajax({url:n,type:"POST",data:{action:"fetch-instagram",hash:s,num:e},dataType:"json",success:function(t){"function"==typeof i&&i(t)}})},smamo_instagram.makeImg=function(t,e){for(var i=t.images,n="",s=0;s<i.length;++s)n+='<li class="inst-img"><a target="_blank" href="'+i[s].link+'" style="background-image:url('+i[s].images.low_resolution.url+');"></a></li>';"function"==typeof e&&e(n)},smamo_instagram.init=function(){$(".instagram-box").each(function(){var t=$(this);smamo_instagram.fetchImages(t,2,function(e){smamo_instagram.makeImg(e,function(e){t.children("ul").html(e)})})})},$(function(){smamo_instagram.init(),$(".instagram-box").off().on({click:function(e){var i=$(this),n=i.children("ul");t=$(e.target),t.is(".news-more-btn")&&(e.preventDefault(),n.hasClass("expand")?t.html("Vis flere billeder"):t.html("Vis færre billeder"),n.toggleClass("expand"),$("html,body").animate({scrollTop:i.offset().top},500))}})}),$(function(){$(".gallery a.show-more-btn").click(function(t){t.preventDefault();var e=$(this).parents(".gallery");e.hasClass("open")?($(this).html("Åbn album"),e.removeClass("open"),e.children(".item-plchld").slideUp(100)):($(this).html("Luk album"),e.addClass("open"),e.children(".item-plchld").each(function(){var t=$(this),e=new Image;t.slideDown(100),t.hasClass("loaded")||(e.src=t.attr("data-thumb"),e.onload=function(){t.html(e).addClass("loaded")})}))})});
